(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{4201:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/orders",function(){return a(1844)}])},2115:function(e,t,a){"use strict";var s=a(5893);a(7294),t.Z=e=>{let{itemsPerPage:t,setItemsPerPage:a,currentPage:r,setCurrentPage:n,totalEntries:l,totalPages:i}=e;return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("label",{htmlFor:"items",className:"text-sm",children:"Items per page:"}),(0,s.jsx)("select",{id:"items",className:"border border-gray-300 rounded-md py-1 px-2 outline-none",value:t,onChange:e=>{a(parseInt(e.target.value,10)),n(1)},children:[15,20,25,30,35].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-3 md:mt-0",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-700",children:[t*r-t+1," to"," ",t*r<l?t*r:l," ","of ",l]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("button",{onClick:()=>n(1),disabled:1===r,className:"p-2 rounded-full ".concat(r>1?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-bar-left text-lg"})}),(0,s.jsx)("button",{onClick:()=>n(e=>e>1?e-1:e),disabled:1===r,className:"p-2 rounded-full ".concat(r>1?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-left text-lg"})}),(0,s.jsx)("button",{onClick:()=>n(e=>e<i?e+1:e),disabled:r===i,className:"p-2 rounded-full ".concat(r<i?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-right text-lg"})}),(0,s.jsx)("button",{onClick:()=>n(i),disabled:r===i,className:"p-2 rounded-full ".concat(r<i?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-bar-right text-lg"})})]})]})]})}},4625:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(7294);function r(e,t){let[a,r]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let a=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}},1844:function(e,t,a){"use strict";a.r(t);var s=a(5893),r=a(7294),n=a(4625),l=a(2115),i=a(1163),c=a(9469),d=a(9621),o=a(843),m=a(5066),u=a(5961),x=a.n(u),h=a(5152);a.n(h)()(()=>a.e(607).then(a.t.bind(a,8607,23)),{loadableGenerated:{webpack:()=>[8607]},ssr:!1}),t.default=()=>{(0,i.useRouter)();let[e,t]=(0,r.useState)(""),[u,h]=(0,r.useState)([]),[p,b]=(0,r.useState)(null),[f,g]=(0,r.useState)(null),[j,N]=(0,r.useState)(15),[v,y]=(0,r.useState)(1),[w,_]=(0,r.useState)(1),[k,C]=(0,r.useState)(!1),[S,A]=(0,r.useState)(""),[P,D]=(0,r.useState)(""),[E,F]=(0,r.useState)(""),[q,X]=(0,r.useState)(""),[I,z]=(0,r.useState)(!0),[O,T]=(0,r.useState)({key:"",direction:"ascending"}),[M,G]=(0,r.useState)([]),[L,Z]=(0,r.useState)({startDate:"",endDate:""}),K=e=>{let{name:t,value:a}=e.target;"location"===t&&shipmentID||Z(e=>({...e,[t]:a}))},W=async()=>{C(!0);try{let t=O.key,a="descending"===O.direction,s=await fetch("".concat("https://buybackservice.unicornstore.in","/get-order-details-by-staff?staff_id=").concat(e,"&per_page=").concat(j,"&page=").concat(w,"&search=").concat(E,"&sort_by=").concat(t,"&sort_desc=").concat(a,"&from_date=").concat(L.startDate,"&to_date=").concat(L.endDate));if(!s.ok)throw Error("Could not get order details by staff id");let r=await s.json();0===r.data.length?X("No entries found, please refine your search query"):X(""),h(r.data.length>0?r.data:[]),y(Math.ceil(r.total_count/j)),D(r.total_count),A("")}catch(e){console.log(e),A(e)}finally{setTimeout(()=>{C(!1)},600)}},B=e=>{b(e)},H=e=>{g(e)},J=e=>{let t="ascending";O.key===e&&"ascending"===O.direction&&(t="descending"),T({key:e,direction:t}),_(1)};(0,r.useEffect)(()=>{t(localStorage.getItem("staff_id")),e&&W()},[e,j,w,O]),(0,r.useEffect)(()=>{p||f?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden")},[p,f]);let Q=(0,n.Z)(E,500);(0,r.useEffect)(()=>{""!==Q&&(_(1),W())},[Q,E]);let R=e=>O.key!==e?null:"ascending"===O.direction?(0,s.jsx)("i",{className:"bi bi-arrow-up"}):(0,s.jsx)("i",{className:"bi bi-arrow-down"}),U=e=>{let t=document.createElement("svg");x()(t,e,{format:"CODE128",width:1,height:20,margin:0});let a=t.querySelector("text");a&&a.remove();let s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style","font: 8px monospace; fill: black; line-height: 0.5em"),s.setAttribute("text-anchor","middle"),s.setAttribute("x","35"),s.setAttribute("y",35),s.textContent="OID: ".concat(e),t.appendChild(s);let r=t.outerHTML;return'\n      <div style="font-size: 10px; width: 25mm; height: 11mm; padding: 0; display: flex; align-items: center; justify-content: center; padding: 8px 0px 0px 0px;">\n        '.concat(r,"\n      </div>\n    ")},V=e=>{a.e(607).then(a.t.bind(a,8607,23)).then(t=>{(0,t.default)({printable:U(e),type:"raw-html",style:"\n            @page { \n              size: 25mm 14mm; \n              margin: 0; \n            } \n            body { \n              display: flex; \n              align-items: center; \n              justify-content: center; \n              height: 100%; \n            } \n          "})}).catch(e=>{console.error("Failed to load printJS:",e)})};return(0,s.jsx)("div",{className:"flex justify-center bg-gray-100 min-h-screen relative -top-28",children:(0,s.jsx)("div",{className:"container max-w-screen-xl mx-4",children:(0,s.jsxs)("div",{className:"flex flex-col justify-center space-y-2 bg-white shadow p-4 my-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"relative pb-4",children:[(0,s.jsx)(c.d,{variant:"bordered",selectedKeys:M,onSelectionChange:G,children:(0,s.jsx)(d.G,{"aria-label":"Filters",title:"Filters",startContent:(0,s.jsx)("i",{className:"fas fa-filter"}),children:(0,s.jsxs)("div",{className:"border-t grid grid-cols-2 gap-4 pt-2",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("label",{htmlFor:"startDate",className:"mb-1",children:"Date From:"}),(0,s.jsx)("input",{type:"date",name:"startDate",id:"startDate",value:L.startDate,onChange:K,className:"px-4 py-1 border rounded w-full outline-none"})]}),(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("label",{htmlFor:"endDate",className:"mb-1",children:"Date To:"}),(0,s.jsx)("input",{type:"date",name:"endDate",id:"endDate",value:L.endDate,onChange:K,className:"px-4 py-1 border rounded w-full outline-none"})]}),(0,s.jsx)("div",{className:"col-span-2 relative flex justify-center",children:(0,s.jsxs)("button",{className:"bg-accent px-4 py-1 rounded text-white ring-accent",onClick:()=>{W(),G("0")},children:[(0,s.jsx)("i",{className:"fa-solid fa-filter me-2"}),"Filter"]})})]})},"1")}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2 mt-3",children:[(0,s.jsx)("label",{className:"text-sm text-gray-700",htmlFor:"search-bar",children:"Search by Customer Name, Final Price or Product Name"}),(0,s.jsxs)("span",{className:"w-full grid grid-cols-1 md:grid-cols-6 md:space-x-2",children:[(0,s.jsx)("input",{type:"text",className:"border border-gray-400 py-2 px-4 rounded-md ring-accent col-span-5 transition-all",name:"search-bar",id:"search-bar",value:E,onChange:e=>F(e.target.value),spellCheck:!1,placeholder:"Search by Customer Name, Final Price or Product Name"}),(0,s.jsx)("button",{className:"mt-2 md:mt-0 px-3 py-1 rounded bg-accent text-white cursor-pointer ring-accent",onClick:()=>{F(""),T({key:"",direction:"ascending"}),Z({startDate:"",endDate:""})},children:"Clear All Filters"})]})]}),(0,s.jsxs)("div",{className:"mt-4 rounded-md p-4 text-md",children:[(0,s.jsxs)("table",{className:"min-w-full table-auto bg-white rounded overflow-hidden shadow",children:[(0,s.jsx)("thead",{className:"bg-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>J("order_detail_id"),children:["Order ID ",R("order_detail_id")]}),(0,s.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>J("customer_name"),children:["Customer Name ",R("customer_name")]}),(0,s.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>J("order_status"),children:["Order Status ",R("order_status")]}),(0,s.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>J("price"),children:["Final Price ",R("price")]}),(0,s.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>J("product_name"),children:["Product Name ",R("product_name")]}),(0,s.jsx)("th",{className:"text-center cursor-pointer py-2.5",children:"Barcode"}),(0,s.jsx)("th",{className:"text-center py-2.5",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y",children:k?Array(j).fill(0).map((e,t)=>(0,s.jsxs)("tr",{className:"divide-x hover:bg-gray-100",children:[(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsx)(o.X,{className:"h-5 rounded-full"})})]},t)):u.map((e,t)=>(0,s.jsxs)("tr",{className:"text-center  text-sm md:text-base divide-x hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"py-1.5",children:e.order_id}),(0,s.jsx)("td",{className:"py-1.5",children:e.customer_name}),(0,s.jsx)("td",{className:"py-1.5",children:e.order_status}),(0,s.jsx)("td",{className:"py-1.5",children:(0,m.fK)(e.price)}),(0,s.jsx)("td",{className:"py-1.5",children:e.product_name}),(0,s.jsx)("td",{className:"py-1.5",children:(0,s.jsx)("div",{className:"inline-block",dangerouslySetInnerHTML:{__html:U(e.order_id)}})}),(0,s.jsxs)("td",{className:"py-1.5",children:[p===e.order_detail_id&&(0,s.jsx)("div",{id:"imageGalleryModal",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm overflow-hidden",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"relative w-full max-w-3xl bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,s.jsx)("span",{className:"absolute top-4 right-4 z-20 cursor-pointer rounded px-1 text-red-500 hover:bg-[#AAAAAA60] transition duration-200",onClick:()=>b(!1),children:(0,s.jsx)("i",{className:"bi bi-x-lg text-2xl"})}),(0,s.jsx)("div",{className:"p-6 grid grid-cols-2 sm:grid-cols-4 gap-4 overflow-y-auto max-h-[100vh]",children:e.images&&e.images.map((e,t)=>(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-lg shadow-md border flex flex-col pb-2",children:[(0,s.jsx)("p",{className:"w-full text-center",children:Object.keys(e)}),(0,s.jsx)("div",{className:"my-auto",children:(0,s.jsx)("img",{src:e[Object.keys(e)[0]],alt:"Product Image",className:"object-contain object-center w-full h-48"})})]},t))})]})}),f===e.order_detail_id&&(0,s.jsx)("div",{id:"qnaModal",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm overflow-hidden",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"relative w-full max-w-screen-xl bg-white rounded-lg shadow-lg overflow-hidden min-h-fit",children:[(0,s.jsx)("span",{className:"absolute top-4 right-4 z-20 cursor-pointer rounded px-1 text-red-500 hover:bg-[#AAAAAA60] transition duration-200",onClick:()=>g(!1),children:(0,s.jsx)("i",{className:"bi bi-x-lg text-2xl"})}),(0,s.jsx)("div",{className:"p-6 overflow-y-auto 2xl:overflow-y-clip max-h-[80vh]",children:e.qna&&e.qna.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:e.qna.map((e,t)=>(0,s.jsxs)("div",{className:"border rounded p-4 shadow-sm bg-gray-50",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Question:"}),(0,s.jsx)("p",{children:e.question}),(0,s.jsx)("div",{className:"font-semibold mt-2",children:"Answer:"}),(0,s.jsx)("p",{children:e.answer})]},t))}):(0,s.jsx)("p",{children:"No questions available."})})]})}),(0,s.jsx)("button",{className:"inline me-2 fas fa-image p-1.5 rounded transition-all bg-blue-100 text-blue-500 hover:bg-blue-500 hover:text-white cursor-pointer ring-custom ring-blue-400",onClick:()=>B(e.order_detail_id),disabled:!(e.images&&e.images.length>0)}),(0,s.jsx)("button",{className:"inline me-2 far fa-circle-question p-1.5 rounded transition-all bg-accent-dimmed accent hover:bg-[var(--accent-color)] hover:text-white cursor-pointer ring-accent",onClick:()=>H(e.order_detail_id),disabled:!(e.qna&&e.qna.length>0)}),(0,s.jsx)("button",{className:"inline me-2 fas fa-print p-1.5 rounded transition-all bg-purple-100 text-purple-500 hover:bg-purple-500 hover:text-white cursor-pointer ring-custom ring-purple-400",onClick:()=>V(e.order_id)})]})]},t))})]}),q&&(0,s.jsx)("div",{className:"text-red-500 text-center pt-2 min-h-96",children:q}),S&&(0,s.jsx)("div",{className:"text-red-500 text-center pt-2 min-h-96",children:"Something went wrong"})]})]}),(0,s.jsx)(l.Z,{itemsPerPage:j,setItemsPerPage:N,currentPage:w,setCurrentPage:_,totalEntries:P,totalPages:v})]})})})}},843:function(e,t,a){"use strict";a.d(t,{X:function(){return u}});var s=a(5607),r=(0,a(9488).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),n=a(9037),l=a(9869),i=a(262),c=a(7294),d=a(6733),o=a(5893),m=(0,s.Gp)((e,t)=>{let{Component:a,children:m,getSkeletonProps:u,getContentProps:x}=function(e){var t,a;let o=(0,d.w)(),[m,u]=(0,s.oe)(e,r.variantKeys),{as:x,children:h,isLoaded:p=!1,className:b,classNames:f,...g}=m,j=null!=(a=null!=(t=e.disableAnimation)?t:null==o?void 0:o.disableAnimation)&&a,N=(0,c.useMemo)(()=>r({...u,disableAnimation:j}),[(0,n.Xx)(u),j,h]),v=(0,l.W)(null==f?void 0:f.base,b);return{Component:x||"div",children:h,slots:N,classNames:f,getSkeletonProps:(e={})=>({"data-loaded":(0,i.PB)(p),className:N.base({class:(0,l.W)(v,null==e?void 0:e.className)}),...g}),getContentProps:(e={})=>({className:N.content({class:(0,l.W)(null==f?void 0:f.content,null==e?void 0:e.className)})})}}({...e});return(0,o.jsx)(a,{ref:t,...u(),children:(0,o.jsx)("div",{...x(),children:m})})});m.displayName="NextUI.Skeleton";var u=m}},function(e){e.O(0,[260,896,427,110,888,774,179],function(){return e(e.s=4201)}),_N_E=e.O()}]);