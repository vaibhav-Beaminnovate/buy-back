(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[121],{5126:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/liquidator/profile/wallet",function(){return a(1491)}])},4133:function(e,t,a){"use strict";var r=a(5893);a(7294);var s=a(4039);t.Z=e=>{let{header:t,...a}=e;return(0,r.jsx)(s.Q,{...a,header:e=>{let{state:{isEnter:a}}=e;return(0,r.jsxs)(r.Fragment,{children:[t,(0,r.jsx)("i",{className:"bi bi-chevron-down ml-auto transition-transform duration-200 ease-out flex items-center ".concat(a&&"rotate-180")})]})},className:"border-b",buttonProps:{className:e=>{let{isEnter:t}=e;return"flex items-center w-full p-4 text-left transition-all duration-200 hover:bg-accent-dimmed ".concat(t&&"bg-[#42c8b725]")}},contentProps:{className:"transition-height duration-200 ease-out"},panelProps:{className:"p-4"}})}},9722:function(e,t,a){"use strict";var r=a(5893),s=a(4863),l=a(7294),n=a(3942),o=a.n(n);t.Z=e=>{let{maxNumber:t=69,buttonStyles:a={},imageStyles:n={},containerStyles:i={},onImagesChange:c=()=>{},folderName:d,s3imageUrlArray:m,setS3imageUrlArray:h,tag:u,imageName:x,setImageName:f,setAadharCount:g,aadharCount:b,setPhoneCount:p,phoneCount:j,clearImages:y}=e,[N,w]=(0,l.useState)([]),[v,_]=(0,l.useState)(!1),k="https://buybackservice.unicornstore.in",A=e=>e.reduce((e,t)=>({...e,...t}),{});(0,l.useEffect)(()=>{m&&A(m)[u]&&w([{data_url:A(m)[u]}])},[m,u]),(0,l.useEffect)(()=>{y&&y(()=>w([]))},[y]),(0,l.useEffect)(()=>{("GST_certificate"===u||"cheque"===u||"company_logo"===u)&&w(m.filter(e=>e[u]).map(e=>({original_url:e[u],data_url:"".concat(e[u],"?t=").concat(new Date().getTime())})))},[m,u]);let E=e=>({front_aadhar:"front_aadhar",back_aadhar:"back_aadhar",Top:"Top",Bottom:"Bottom",Front:"Front",Back:"Back",Left:"Left",Right:"Right",front_invoice:"front_invoice",back_invoice:"back_invoice"})[e]||e,S=e=>{h(t=>t.filter(t=>!Object.values(t).includes(e)))},P=e=>{let[t,a]=e.split(","),r=t.split(":")[1].split(";")[0],s=atob(a),l=new ArrayBuffer(s.length),n=new Uint8Array(l);for(let e=0;e<s.length;e++)n[e]=s.charCodeAt(e);return new Blob([l],{type:r})},B=(e,t)=>new File([e],t,{type:e.type}),C=async e=>{let t=new FormData;e.forEach(e=>t.append("file",e));try{_(!0);let e=await fetch("".concat(k,"/upload-for-order-detail/?folder_name=").concat(d),{method:"POST",body:t});if(!e.ok)throw Error("Failed to upload images");let a=await e.json();h(e=>[...e,{[E(u)]:a.s3_image_url}]),["Top","Bottom","Front","Back","Left","Right"].includes(u)&&p(e=>e+1),["front_aadhar","back_aadhar"].includes(u)&&g(e=>e+1)}catch(e){console.error("Error uploading images:",e)}finally{_(!1)}},q=(0,l.useCallback)((e,t)=>{f(u+(x+1)),w(e),c(e,t),C(e.map(e=>B(P(e.data_url),"image_".concat(x,".jpg"))))},[c,u,x,C]),D=async e=>{try{if(!(await fetch("".concat(k,"/remove-image?s3_image=").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete image");["Top","Bottom","Front","Back","Left","Right"].includes(u)&&p(e=>e-1),["front_aadhar","back_aadhar"].includes(u)&&g(e=>e-1)}catch(e){console.error("Error deleting image:",e)}},T=async e=>{let t=N[e];console.log({imageToRemove:t});let a=t&&t.data_url;await D(a),S(a),w(t=>t.filter((t,a)=>a!==e)),h(e=>e.filter(e=>!Object.values(e).includes(a)))};return v?(0,r.jsx)("div",{className:"w-full max-h-full h-full relative grid place-content-center",children:(0,r.jsx)(s.c,{})}):(0,r.jsx)("div",{className:"w-full h-full max-h-full relative ".concat(i),children:(0,r.jsx)(o(),{multiple:!0,value:N,onChange:q,maxNumber:t,dataURLKey:"data_url",children:e=>{let{imageList:t,onImageUpload:s,isDragging:l,dragProps:o}=e;return(0,r.jsxs)("div",{className:"flex flex-col w-full h-full items-center justify-center max-h-full",children:[(0,r.jsx)("button",{style:{...a,color:l?"red":void 0},onClick:s,...o,className:"text-gray-400 w-full h-full content-center absolute top-0 left-0 ",children:(0,r.jsx)("span",{className:"".concat(N.length>0?"hidden":""),children:"Click here to upload or Drop here"})}),(0,r.jsx)("div",{className:"overflow-y-scroll scrollbar-hidden z-10 w-full",children:(0,r.jsx)("div",{className:"flex items-center justify-center w-full space-y-5",children:t.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-start md:justify-center ",children:[(0,r.jsx)("div",{className:"flex flex-row absolute right-1 space-x-1 top-1 h-full",children:(0,r.jsx)("button",{className:"text-red-500 bg-gray-200 rounded px-1 text-xl h-fit sticky top-1",onClick:e=>{e.stopPropagation(),T(t)},children:(0,r.jsx)("i",{className:"bi bi-x-square"})})}),(0,r.jsx)("img",{className:"h-full",src:e.data_url,alt:"",style:n})]},t))})})]})}})})}},1491:function(e,t,a){"use strict";a.r(t);var r=a(5893),s=a(9722),l=a(6656),n=a(7294),o=a(9134),i=a(373),c=a(5612),d=a(4133),m=a(1163),h=a(9008),u=a.n(h),x=a(5066);t.default=()=>{let e="https://buybackservice.unicornstore.in",t=(0,m.useRouter)(),[a,h]=(0,n.useState)([]),[f,g]=(0,n.useState)(""),[b,p]=(0,n.useState)(),[j,y]=(0,n.useState)([]),[N,w]=(0,n.useState)([]),{balance:v}=(0,l.K)(),[_,k]=(0,n.useState)(!1),[A,E]=(0,n.useState)(""),[S,P]=(0,n.useState)(""),[B,C]=(0,n.useState)({}),q=(0,n.useRef)(null),D=(0,x.dQ)(),T=async()=>{k(!0);let t=localStorage.getItem("liquidator_id");try{let a=await fetch("".concat(e,"/get-liquidator-by-id/?liquidator_id=").concat(t),{headers:{Authorization:D}});if(!a.ok)throw Error("Could not get user data");let r=await a.json();E(r.other_info.wallet_balance)}catch(e){console.log("something went wrong"),o.Am.error("Something went wrong",{toastId:"error"})}k(!1)};(0,n.useEffect)(()=>{T()},[]);let F=async()=>{k(!0);try{let t=await fetch("".concat(e,"/get-all-transactions?page=1&per_page=10&liquidator_id=").concat(b,"&sort_desc=false"),{headers:{Authorization:D}});if(!t.ok)throw Error("Could not get transactions");let a=await t.json();y(a.data)}catch(e){o.Am.error(e.message),console.log(e.message)}k(!1)},L=async()=>{try{let t=await fetch("".concat(e,"/current-liquidators-wages?liquidator_id=").concat(b),{headers:{Authorization:D}});if(!t.ok)throw Error("Could not get liquidator wages");let a=await t.json();w(a.data)}catch(e){o.Am.error(e.message,{toastId:"wageError"})}},I=e=>{t.push("/liquidator/auction/".concat(e))};(0,n.useEffect)(()=>{p(localStorage.getItem("liquidator_id")),b&&(F(),L())},[b]);let O=()=>{let e={};return S.trim()||(e.paymentProof="Amount is required"),f.trim()&&""!==f||(e.image="Proof is required"),console.log(f),C(e),0===Object.keys(e).length},z=async()=>{if(O())try{var t;let r=await fetch("".concat(e,"/create-transaction-request"),{method:"POST",headers:{"Content-type":"application/json",Authorization:D},body:JSON.stringify({liquidator_id:b,transaction_type:"deposit",amount:S,payment_proof:null===(t=a[0])||void 0===t?void 0:t.paymentProof})});if(!r.ok)throw Error("Could not create transaction request");let s=await r.json();"success"!==s.status?o.Am.info(s.message):(o.Am.success(s.message),P(""),h([]),q.current())}catch(e){o.Am.error(e.message,"proofError")}};return _?(0,r.jsx)("div",{className:"h-screen flex justify-center mt-40",children:(0,r.jsx)(i.Z,{color:"#42c8b7",loading:_,size:40,"aria-label":"Loading Spinner","data-testid":"loader"})}):(0,r.jsxs)("div",{className:"p-6 bg-gray-100 min-h-screen",children:[(0,r.jsx)(u(),{children:(0,r.jsx)("title",{children:"BuyBack - Wallet"})}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"My Wallet"}),(0,r.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-6 mb-6",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 text-center",children:"Wallet Balance"})}),(0,r.jsx)("th",{children:(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 text-center",children:"Remaining Balance"})})]})}),(0,r.jsx)("tbody",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"text-3xl font-bold text-center",children:(0,x.fK)(A)})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"text-3xl font-bold text-center",children:(0,x.fK)(v)})})]})})]})}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(c.U,{className:"bg-white border border-gray-300 rounded-lg",transition:!0,transitionTimeout:250,children:(0,r.jsx)(d.Z,{header:(0,r.jsx)("h2",{className:"text-xl font-semibold text-center",children:"Active Wagers"}),children:(0,r.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:N.length>0?(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-300",children:[(0,r.jsx)("th",{className:"py-2 text-left text-sm font-semibold",children:"Date"}),(0,r.jsx)("th",{className:"py-2 text-left text-sm font-semibold",children:"Auction Name"}),(0,r.jsx)("th",{className:"py-2 text-right text-sm font-semibold",children:"Amount"})]})}),(0,r.jsxs)("tbody",{children:[N.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100 cursor-pointer",onClick:()=>I(e.auction_id),children:[(0,r.jsx)("td",{className:"py-2 text-sm",children:new Date(null==e?void 0:e.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})}),(0,r.jsx)("td",{className:"py-2 text-sm capitalize",children:e.auction_name}),(0,r.jsxs)("td",{className:"py-2 text-sm text-right text-red-500",children:["-",(0,x.fK)(e.wager)]})]},t)),0===j.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:"No transactions to show!"})})]})]}):(0,r.jsx)("span",{className:"text-lg",children:"You do not have any active wagers right now"})})})})}),(0,r.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-6 mb-6",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add Money to Wallet"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-4",children:"Please transfer the funds to the following bank account details:"}),(0,r.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg border border-gray-300 mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Bank Details"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-2 text-sm text-gray-700",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Bank Name:"})," Example Bank"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Account Name:"})," Company Name"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Account Number:"})," 1234567890"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Sort Code:"})," 12-34-56"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"IBAN:"})," GB12EXAM12345678901234"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"SWIFT/BIC:"})," EXAMPGB2L"]})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-4",children:"Once you have made the transfer, please upload a screenshot of the payment as proof."})]}),(0,r.jsxs)("form",{className:"space-y-6",onSubmit:e=>{e.preventDefault()},children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("label",{htmlFor:"paymentProof",className:"block text-sm font-semibold mb-2 text-gray-700",children:["Payment Proof ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-600 text-lg",children:"₹"}),(0,r.jsx)("input",{type:"number",id:"paymentProof",value:S,onChange:e=>P(e.target.value),className:"w-full pl-8 pr-2 py-2 border rounded outline-none text-base font-medium ring-accent ".concat(B.paymentProof?"border-red-300":""),onKeyDown:e=>{("ArrowUp"===e.key||"ArrowDown"===e.key)&&e.preventDefault()},placeholder:"Enter transferred amount"})]}),(null==B?void 0:B.paymentProof)&&(0,r.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:null==B?void 0:B.paymentProof})]}),(0,r.jsxs)("div",{className:"border-2 border-dashed h-40 ring-accent relative ".concat(B.image?"border-red-300":""),children:[(0,r.jsx)(s.Z,{maxNumber:1,folderName:b||"test",s3imageUrlArray:a,setS3imageUrlArray:h,tag:"paymentProof",imageName:"paymentProof",setImageName:g,clearImages:e=>q.current=e}),B.image&&(0,r.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:B.image})]}),(0,r.jsx)("button",{className:"bg-accent text-white py-2 px-4 rounded-lg hover:bg-accent-dark focus:outline-none focus:ring-2 ring-accent",onClick:()=>z(),children:"Submit Proof"})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Transaction History"}),(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-300",children:[(0,r.jsx)("th",{className:"py-2 text-left text-sm font-semibold",children:"Date"}),(0,r.jsx)("th",{className:"py-2 text-left text-sm font-semibold",children:"Description"}),(0,r.jsx)("th",{className:"py-2 text-right text-sm font-semibold",children:"Amount"})]})}),(0,r.jsxs)("tbody",{children:[j.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[(0,r.jsx)("td",{className:"py-2 text-sm",children:new Date(null==e?void 0:e.created_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})}),(0,r.jsx)("td",{className:"py-2 text-sm capitalize",children:e.transaction_type}),(0,r.jsxs)("td",{className:"py-2 text-sm text-right ".concat("wager"===e.transaction_type||"withdrawal"===e.transaction_type?"text-red-500":"text-green-500"),children:["wager"===e.transaction_type||"withdrawal"===e.transaction_type?"-":"+"," ",(0,x.fK)(e.amount)]})]},t)),0===j.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:"No transactions to show!"})})]})]})]})]})]})}}},function(e){e.O(0,[23,678,555,888,774,179],function(){return e(e.s=5126)}),_N_E=e.O()}]);