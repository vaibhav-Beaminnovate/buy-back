(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{3095:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/coupons",function(){return s(8730)}])},2115:function(e,t,s){"use strict";var a=s(5893);s(7294),t.Z=e=>{let{itemsPerPage:t,setItemsPerPage:s,currentPage:r,setCurrentPage:l,totalEntries:n,totalPages:c}=e;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("label",{htmlFor:"items",className:"text-sm",children:"Items per page:"}),(0,a.jsx)("select",{id:"items",className:"border border-gray-300 rounded-md py-1 px-2 outline-none",value:t,onChange:e=>{s(parseInt(e.target.value,10)),l(1)},children:[15,20,25,30,35].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-3 md:mt-0",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:[t*r-t+1," to"," ",t*r<n?t*r:n," ","of ",n]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>l(1),disabled:1===r,className:"p-2 rounded-full ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>l(e=>e>1?e-1:e),disabled:1===r,className:"p-2 rounded-full ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>l(e=>e<c?e+1:e),disabled:r===c,className:"p-2 rounded-full ".concat(r<c?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-right text-lg"})}),(0,a.jsx)("button",{onClick:()=>l(c),disabled:r===c,className:"p-2 rounded-full ".concat(r<c?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-right text-lg"})})]})]})]})}},8730:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(5893),r=s(2115),l=s(5066),n=s(7957),c=s(8670),o=s(5607),d=(0,s(9488).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),i=s(9037),u=s(9869),m=s(262),x=s(7294),p=s(6733),h=(0,o.Gp)((e,t)=>{let{Component:s,children:r,getSkeletonProps:l,getContentProps:n}=function(e){var t,s;let a=(0,p.w)(),[r,l]=(0,o.oe)(e,d.variantKeys),{as:n,children:c,isLoaded:h=!1,className:N,classNames:b,...f}=r,j=null!=(s=null!=(t=e.disableAnimation)?t:null==a?void 0:a.disableAnimation)&&s,y=(0,x.useMemo)(()=>d({...l,disableAnimation:j}),[(0,i.Xx)(l),j,c]),g=(0,u.W)(null==b?void 0:b.base,N);return{Component:n||"div",children:c,slots:y,classNames:b,getSkeletonProps:(e={})=>({"data-loaded":(0,m.PB)(h),className:y.base({class:(0,u.W)(g,null==e?void 0:e.className)}),...f}),getContentProps:(e={})=>({className:y.content({class:(0,u.W)(null==b?void 0:b.content,null==e?void 0:e.className)})})}}({...e});return(0,a.jsx)(s,{ref:t,...l(),children:(0,a.jsx)("div",{...n(),children:r})})});h.displayName="NextUI.Skeleton";var N=s(3610),b=s(6134),f=s(7740),j=s(6597),y=s(8237),g=s(3295),v=(0,o.Gp)((e,t)=>{let{as:s,children:r,className:l,...n}=e,{slots:c,classNames:o}=(0,y.v)(),d=(0,g.gy)(t);return(0,a.jsx)(s||"footer",{ref:d,className:c.footer({class:(0,u.W)(null==o?void 0:o.footer,l)}),...n,children:r})});v.displayName="NextUI.ModalFooter",s(1664);var w=s(9134),C=()=>{let e="https://buybackservice.unicornstore.in",[t,s]=(0,x.useState)([]),[o,d]=(0,x.useState)(1),[i,u]=(0,x.useState)(15),[m,p]=(0,x.useState)(null),[y,g]=(0,x.useState)(!0),[C,_]=(0,x.useState)(null),{isOpen:k,onOpen:S,onOpenChange:P}=(0,n.q)(),[A,E]=(0,x.useState)({sellerName:"",couponNumber:""}),[I,D]=(0,x.useState)({sellerName:"",couponNumber:""}),O=async()=>{try{g(!0);let t=await fetch("".concat(e,"/get-all-coupons/?page=").concat(o,"&per_page=").concat(i,"&sort_desc=false"));if(!t.ok)throw Error("Could not get coupon  data");let a=await t.json();console.log({couponData:a}),s(a.data),p(a.total_count),_(Math.ceil(a.total_count/i))}catch(e){w.Am.error(e.message)}finally{setTimeout(()=>{g(!1)},800)}};(0,x.useEffect)(()=>{O()},[o,i]);let F=e=>{let{name:t,value:s}=e.target;E(e=>({...e,[t]:s})),D(e=>{let a={...e};return"sellerName"===t&&(s.trim()?a.sellerName="":a.sellerName="Seller name is required"),"couponNumber"===t&&(s.trim()?a.couponNumber="":a.couponNumber="Coupon number is required"),a})},U=()=>{let e={};return A.sellerName.trim()||(e.sellerName="Seller name is required"),""===A.couponNumber&&(e.couponNumber="Coupon number is required"),D(e),0===Object.keys(e).length},q=async t=>{if(U())try{let s=await fetch("".concat(e,"/coupon-checkout?coupon_code=").concat(A.couponNumber,"&executive_name=").concat(A.sellerName),{method:"PUT"});if(!s.ok)throw Error("Could not redeem code");let a=await s.json();if("success"!==a.status)throw Error(a.message);w.Am.success(a.message),t(),console.log({redeemData:a})}catch(e){w.Am.error(e.message)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex justify-center bg-gray-100 min-h-screen h-full relative -top-28",children:(0,a.jsx)("div",{className:"container max-w-screen-xl",children:(0,a.jsxs)("div",{className:"flex flex-col bg-white p-4 my-4 rounded-lg shadow justify-center space-y-2",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)(c.A,{onPress:S,className:"bg-accent text-white px-4 py-2 rounded",children:[(0,a.jsx)("i",{className:"bi bi-cash-stack"})," Redeem Coupon"]})}),y?(0,a.jsxs)("table",{className:"min-w-full table-auto",children:[(0,a.jsx)("thead",{className:"bg-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-sm font-semibold uppercase text-center",children:"Order ID"}),(0,a.jsx)("th",{className:"px-4 py-2 text-sm font-semibold uppercase text-center",children:"Product Name"}),(0,a.jsx)("th",{className:"px-4 py-2 text-sm font-semibold uppercase text-center",children:"Store Name"}),(0,a.jsx)("th",{className:"px-4 py-2 text-sm font-semibold uppercase text-center",children:"Customer Name"}),(0,a.jsx)("th",{className:"px-4 py-2 text-sm font-semibold uppercase text-center",children:"Amount"}),(0,a.jsx)("th",{className:"px-4 py-2 text-sm font-semibold uppercase text-center",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-2 text-sm font-semibold uppercase text-center",children:"Coupon Created Date"}),(0,a.jsx)("th",{className:"px-4 py-2 text-sm font-semibold uppercase text-center",children:"Coupon Valid Upto"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array(i).fill(0).map((e,t)=>(0,a.jsxs)("tr",{className:"divide-x hover:bg-gray-100",children:[(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(h,{className:"w-full rounded",children:(0,a.jsx)("div",{className:"h-5 w-full rounded bg-default-300"})})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(h,{className:"w-full rounded",children:(0,a.jsx)("div",{className:"h-5 w-full rounded bg-default-300"})})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(h,{className:"w-full rounded",children:(0,a.jsx)("div",{className:"h-5 w-full rounded bg-default-300"})})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(h,{className:"w-full rounded",children:(0,a.jsx)("div",{className:"h-5 w-full rounded bg-default-300"})})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(h,{className:"w-full rounded",children:(0,a.jsx)("div",{className:"h-5 w-full rounded bg-default-300"})})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(h,{className:"w-full rounded",children:(0,a.jsx)("div",{className:"h-5 w-full rounded bg-default-300"})})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(h,{className:"w-full rounded",children:(0,a.jsx)("div",{className:"h-5 w-full rounded bg-default-300"})})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(h,{className:"w-full rounded",children:(0,a.jsx)("div",{className:"h-5 w-full rounded bg-default-300"})})})]},t))})]}):t&&t.length>0?(0,a.jsxs)("table",{className:"min-w-full table-auto bg-white rounded overflow-hidden shadow",children:[(0,a.jsx)("thead",{className:"bg-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-center cursor-pointer py-2.5",children:"Order ID"}),(0,a.jsx)("th",{className:"text-center cursor-pointer py-2.5",children:"Product Name"}),(0,a.jsx)("th",{className:"text-center cursor-pointer py-2.5",children:"Store Name"}),(0,a.jsx)("th",{className:"text-center cursor-pointer py-2.5",children:"Customer Name"}),(0,a.jsx)("th",{className:"text-center cursor-pointer py-2.5",children:"Amount"}),(0,a.jsx)("th",{className:"text-center cursor-pointer py-2.5",children:"Status"}),(0,a.jsx)("th",{className:"text-center cursor-pointer py-2.5",children:"Coupon Created Date"}),(0,a.jsx)("th",{className:"text-center cursor-pointer py-2.5",children:"Coupon Valid Upto"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:t.map((e,t)=>(0,a.jsxs)("tr",{className:"divide-x",children:[(0,a.jsx)("td",{className:"py-1.5 text-center",children:e.order_id||""}),(0,a.jsx)("td",{className:"py-1.5 text-center",children:e.product||""}),(0,a.jsx)("td",{className:"py-1.5 text-center",children:e.location_name||""}),(0,a.jsx)("td",{className:"py-1.5 text-center",children:e.name||""}),(0,a.jsx)("td",{className:"py-1.5 text-center",children:e.price||""}),(0,a.jsx)("td",{className:"py-1.5 text-center",children:e.status||""}),(0,a.jsx)("td",{className:"py-1.5 text-center",children:(0,l.a)(e.created_at)}),(0,a.jsx)("td",{className:"py-1.5 text-center",children:new Date(e.invalid_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]},t))})]}):(0,a.jsx)("div",{className:"w-full border py-4 text-center text-red-500 font-semibold",children:"No entries to show!"}),(0,a.jsx)(r.Z,{itemsPerPage:i,setItemsPerPage:u,currentPage:o,setCurrentPage:d,totalEntries:m,totalPages:C})]})})}),(0,a.jsx)(N.R,{isOpen:k,onOpenChange:P,isDismissable:!1,children:(0,a.jsx)(b.A,{children:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.k,{className:"flex flex-col gap-1",children:"Redeem Coupon"}),(0,a.jsxs)(j.I,{children:[(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsxs)("label",{htmlFor:"sellerName",children:["Seller Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"sellerName",id:"sellerName",className:"w-full rounded border border-gray-300 px-3 py-1 outline-none ".concat(I.sellerName?"border-red-300":""),placeholder:"Enter Seller Name",value:A.name,onChange:e=>F(e)}),I.sellerName&&(0,a.jsx)("span",{className:"text-red-500 text-xs absolute -bottom-4 inset-x-0",children:I.sellerName})]}),(0,a.jsxs)("div",{className:"relative w-full mt-2",children:[(0,a.jsxs)("label",{htmlFor:"couponNumber",children:["Coupon Number ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"couponNumber",id:"couponNumber",className:"w-full rounded border border-gray-300 px-3 py-1 outline-none ".concat(I.couponNumber?"border-red-300":""),placeholder:"Enter Coupon Number",value:A.code,onChange:e=>F(e)}),I.couponNumber&&(0,a.jsx)("span",{className:"text-red-500 text-xs absolute -bottom-4 inset-x-0",children:I.couponNumber})]})]}),(0,a.jsxs)(v,{children:[(0,a.jsx)(c.A,{color:"danger",variant:"light",className:"rounded",onPress:e,children:"Close"}),(0,a.jsx)(c.A,{color:"success",className:"text-white rounded",onPress:()=>q(e),children:"Redeem"})]})]})})})]})}}},function(e){e.O(0,[863,670,317,888,774,179],function(){return e(e.s=3095)}),_N_E=e.O()}]);