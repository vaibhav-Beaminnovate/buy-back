(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[868],{1603:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/warehouse/login",function(){return r(2383)}])},2383:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return u}});var a=r(5893),t=r(3053),o=r(1163),n=r(7294),l=r(9134),d=()=>{let e=(0,o.useRouter)(),[s,r]=(0,n.useState)({username:"",password:""}),[d,u]=(0,n.useState)({username:"",password:""}),[i,c]=(0,n.useState)(!1),[m,p]=(0,n.useState)(""),[h,w]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let s=localStorage.getItem("warehouse_token"),r=localStorage.getItem("warehouse_name");s&&r&&e.replace("/warehouse")},[e]);let g=e=>{let{name:a,value:t}=e.target;r({...s,[a]:t}),u(e=>{let s={...e};return"username"===a&&(t.trim()?s.username="":s.username="Username is required"),"password"===a&&(t.trim()?s.password="":s.password="Password is required"),s})},b=()=>{let e={};return s.username.trim()||(e.username="Username is required"),s.password.trim()||(e.password="Password is required"),u(e),0===Object.keys(e).length},x=async r=>{if(r.preventDefault(),b())try{w(!0);let r=new FormData;r.append("username",s.username),r.append("password",s.password);let a=await fetch("".concat("https://buybackservice.unicornstore.in","/warehouse/token"),{method:"POST",body:r});if(!a.ok){p("Invalid username or password");return}let t=await a.json();localStorage.setItem("warehouse_token",t.access_token),localStorage.setItem("warehouse_name",t.name),localStorage.setItem("warehouse_id",t.warehouse_id),e.push("/warehouse")}catch(e){l.Am.error(e.message,{toastId:"warhouseLoginError"})}finally{w(!1)}};return(0,a.jsx)("div",{className:"flex items-center justify-center py-20 bg-gray-100",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Warehouse Login"}),(0,a.jsxs)("form",{onSubmit:e=>x(e),children:[(0,a.jsxs)("div",{className:"mb-6 relative",children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-gray-700 mb-1",children:"Username or Email Address"}),(0,a.jsx)("input",{type:"text",id:"username",name:"username",value:s.username,onChange:e=>g(e),className:"w-full p-3 border border-gray-300 rounded-lg ring-accent ".concat(d.username?"border-red-300":""),placeholder:"Enter username or email",autoComplete:"email"}),d.username&&(0,a.jsx)("span",{className:"text-red-500 text-xs absolute -bottom-5 left-0",children:d.username})]}),(0,a.jsxs)("div",{className:"mb-6 relative",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-gray-700 mb-1",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:i?"text":"password",id:"password",name:"password",value:s.password,onChange:e=>g(e),className:"w-full p-3 border border-gray-300 rounded-lg ring-accent ".concat(d.password?"border-red-300":""),placeholder:"Enter password",autoComplete:"current-password"}),(0,a.jsx)("span",{className:"absolute inset-y-0 text-gray-500 cursor-pointer content-center right-0 pe-3 ps-3 rounded-e-lg hover:bg-gray-100 hover:bg-opacity-50 focus:bg-gray-200 focus:bg-opacity-50 outline-none",onClick:()=>{c(!i)},children:(0,a.jsx)("i",{className:"bi ".concat(i?"bi-eye-slash":"bi-eye")})})]}),d.password&&(0,a.jsx)("span",{className:"text-red-500 text-xs absolute -bottom-5 left-0",children:d.password})]}),m&&(0,a.jsx)("p",{className:"text-red-500 text-sm mb-2 mt-6",children:m}),(0,a.jsx)(t.A,{isLoading:h,type:"submit",className:"w-full bg-accent text-white p-3 rounded-lg transition duration-300",children:"Login"})]})]})})},u=()=>(0,a.jsx)("div",{children:(0,a.jsx)(d,{})})}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1603)}),_N_E=e.O()}]);