(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5406],{33095:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/coupons",function(){return a(62657)}])},12115:function(e,t,a){"use strict";var s=a(85893);a(67294),t.Z=e=>{let{itemsPerPage:t,setItemsPerPage:a,currentPage:r,setCurrentPage:n,totalEntries:l,totalPages:o}=e;return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("label",{htmlFor:"items",className:"text-sm",children:"Items per page:"}),(0,s.jsx)("select",{id:"items",className:"border border-gray-300 rounded-md py-1 px-2 ring-accent",value:t,onChange:e=>{a(parseInt(e.target.value,10)),n(1)},children:[15,20,25,30,35].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-3 md:mt-0",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-700",children:[t*r-t+1," to"," ",t*r<l?t*r:l," ","of ",l]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("button",{onClick:()=>n(1),disabled:1===r,className:"p-2 rounded-full ring-accent ".concat(r>1?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-bar-left text-lg"})}),(0,s.jsx)("button",{onClick:()=>n(e=>e>1?e-1:e),disabled:1===r,className:"p-2 rounded-full ring-accent ".concat(r>1?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-left text-lg"})}),(0,s.jsx)("button",{onClick:()=>n(e=>e<o?e+1:e),disabled:r===o,className:"p-2 rounded-full ring-accent ".concat(r<o?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-right text-lg"})}),(0,s.jsx)("button",{onClick:()=>n(o),disabled:r===o,className:"p-2 rounded-full ring-accent ".concat(r<o?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-bar-right text-lg"})})]})]})]})}},62657:function(e,t,a){"use strict";a.r(t);var s=a(85893),r=a(12115),n=a(32553),l=a(67957),o=a(14930),c=a(4483),i=a(10405),d=a(44265),m=a(87740),u=a(86597),x=a(96476),p=a(9008),h=a.n(p),b=a(67294),N=a(9134),f=a(86455),g=a.n(f);t.default=()=>{let e="https://buybackservice.unicornstore.in",[t,a]=(0,b.useState)([]),[p,f]=(0,b.useState)(1),[j,y]=(0,b.useState)(15),[v,w]=(0,b.useState)(null),[C,S]=(0,b.useState)(!0),[_,k]=(0,b.useState)(null),{isOpen:A,onOpen:P,onOpenChange:E,onClose:I}=(0,l.q)(),[D,O]=(0,b.useState)({sellerName:"",couponNumber:""}),[R,q]=(0,b.useState)({sellerName:"",couponNumber:""}),[z,F]=(0,b.useState)([]),[U,X]=(0,b.useState)(""),T=(0,n.dQ)(),B=async()=>{try{S(!0);let t=await fetch("".concat(e,"/get-all-coupons/?page=").concat(p,"&per_page=").concat(j,"&sort_desc=false"),{headers:{Authorization:T}});if(!t.ok)throw Error("Could not get coupon  data");let s=await t.json();a(s.data),w(s.total_count),k(Math.ceil(s.total_count/j))}catch(e){N.Am.error(e.message)}finally{setTimeout(()=>{S(!1)},800)}};(0,b.useEffect)(()=>{B()},[p,j]);let K=e=>{let{name:t,value:a}=e.target;"true"===U&&(O(e=>({...e,[t]:a})),q(e=>{let s={...e};return"sellerName"===t&&(a.trim()?s.sellerName="":s.sellerName="Seller name is required"),"couponNumber"===t&&(a.trim()?s.couponNumber="":s.couponNumber="Coupon number is required"),s}))},V=()=>{let e={};return D.sellerName.trim()||(e.sellerName="Seller name is required"),""===D.couponNumber&&(e.couponNumber="Coupon number is required"),q(e),0===Object.keys(e).length},W=async t=>{try{let a=await fetch("".concat(e,"/get-executive-by-staff?staff_id=").concat(t),{headers:{Authorization:T}});if(!a.ok)throw Error("Could not get executive list");let s=await a.json();if("success"!==s.status)throw Error(s.message);F(s.data)}catch(e){N.Am.error(e.message)}};(0,b.useEffect)(()=>{let e=localStorage.getItem("staff_id");X(localStorage.getItem("staff_login")),e&&"true"===localStorage.getItem("staff_login")&&W(e),"true"!==localStorage.getItem("staff_login")&&O(e=>({...e,sellerName:localStorage.getItem("name")}))},[]);let M=async()=>{if(V())try{let t=await fetch("".concat(e,"/coupon-checkout?coupon_code=").concat(D.couponNumber,"&executive_name=").concat(D.sellerName),{method:"PUT",headers:{Authorization:T}});if(!t.ok)throw Error("Could not redeem code");let a=await t.json();if("success"!==a.status)throw Error(a.message);N.Am.success(a.message),g().fire({title:"Coupon Redeemed!",text:a.message+" worth "+(0,n.fK)(a.price),icon:"success"}),I(),B()}catch(e){N.Am.error(e.message)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h(),{children:(0,s.jsx)("title",{children:"BuyBack - Dashboard | Store Dashboard | Coupons"})}),(0,s.jsx)("div",{className:"flex justify-center bg-gray-100 min-h-screen h-full relative -top-28",children:(0,s.jsx)("div",{className:"container max-w-screen-xl",children:(0,s.jsxs)("div",{className:"flex flex-col bg-white p-4 my-4 rounded-lg shadow justify-center gap-y-2",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Store Dashboard | Coupons"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)(o.A,{onPress:P,className:"bg-accent text-white px-4 py-2 rounded ring-accent",children:[(0,s.jsx)("i",{className:"bi bi-cash-stack"})," Redeem Coupon"]})}),(0,s.jsx)("div",{className:"overflow-auto p-4",children:C?(0,s.jsxs)("table",{className:"min-w-full table-auto shadow",children:[(0,s.jsx)("thead",{className:"bg-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Order ID"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Product Name"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Store Name"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Customer Name"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Amount"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Coupon Created Date"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Coupon Valid Upto"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array(j).fill(0).map((e,t)=>(0,s.jsx)("tr",{className:"divide-x hover:bg-gray-100",children:Array(8).fill(0).map((e,t)=>(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,s.jsx)(c.X,{className:"h-6 rounded-full"})},t))},t))})]}):t?(0,s.jsxs)("table",{className:"min-w-full table-auto bg-white rounded shadow whitespace-nowrap",children:[(0,s.jsx)("thead",{className:"bg-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-center py-2.5 px-2",children:"Order ID"}),(0,s.jsx)("th",{className:"text-center py-2.5 px-2",children:"Product Name"}),(0,s.jsx)("th",{className:"text-center py-2.5 px-2",children:"Store Name"}),(0,s.jsx)("th",{className:"text-center py-2.5 px-2",children:"Customer Name"}),(0,s.jsx)("th",{className:"text-center py-2.5 px-2",children:"Amount"}),(0,s.jsx)("th",{className:"text-center py-2.5 px-2",children:"Status"}),(0,s.jsx)("th",{className:"text-center py-2.5 px-2",children:"Coupon Created Date"}),(0,s.jsx)("th",{className:"text-center py-2.5 px-2",children:"Coupon Valid Upto"})]})}),(0,s.jsx)("tbody",{className:"divide-y",children:t.length>0?t.map((e,t)=>(0,s.jsxs)("tr",{className:"divide-x",children:[(0,s.jsx)("td",{className:"py-2 px-3 text-center",children:e.order_id||""}),(0,s.jsx)("td",{className:"py-2 px-3 text-center",children:e.product||""}),(0,s.jsx)("td",{className:"py-2 px-3 text-center",children:e.location_name||""}),(0,s.jsx)("td",{className:"py-2 px-3 text-center",children:e.name||""}),(0,s.jsx)("td",{className:"py-2 px-3 text-center",children:(0,n.fK)(e.price)||""}),(0,s.jsx)("td",{className:"py-2 px-3 text-center",children:e.status||""}),(0,s.jsx)("td",{className:"py-2 px-3 text-center",children:(0,n.a)(e.created_at)}),(0,s.jsx)("td",{className:"py-2 px-3 text-center",children:new Date(e.invalid_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]},t)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"text-red-500 text-center py-2 font-semibold",children:"No entries to show!"})})})]}):(0,s.jsx)("div",{className:"w-full border py-4 text-center text-red-500 font-semibold",children:"Something went wrong"})}),(0,s.jsx)(r.Z,{itemsPerPage:j,setItemsPerPage:y,currentPage:p,setCurrentPage:f,totalEntries:v,totalPages:_})]})})}),(0,s.jsx)(i.R,{isOpen:A,onOpenChange:E,isDismissable:!1,children:(0,s.jsx)(d.A,{children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.k,{className:"flex flex-col gap-1",children:"Redeem Coupon"}),(0,s.jsx)(u.I,{children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),M()},children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsxs)("label",{htmlFor:"sellerName",children:["Seller Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),"true"===U?(0,s.jsxs)("select",{name:"sellerName",id:"sellerName",className:"w-full rounded border border-gray-300 px-3 py-1.5 outline-none ".concat(R.sellerName?"border-red-300":""),value:D.sellerName,onChange:K,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select an executive"}),z.map((e,t)=>(0,s.jsx)("option",{value:e.executive_id,children:e.name},t))]}):(0,s.jsx)("input",{type:"text",name:"sellerName",id:"sellerName",className:"w-full rounded border border-gray-300 px-3 py-1 outline-none ".concat(R.sellerName?"border-red-300":""),placeholder:"Enter Seller Name",value:D.sellerName,onChange:K,disabled:!0}),R.sellerName&&(0,s.jsx)("span",{className:"text-red-500 text-xs absolute -bottom-4 inset-x-0",children:R.sellerName})]}),(0,s.jsxs)("div",{className:"relative w-full mt-2",children:[(0,s.jsxs)("label",{htmlFor:"couponNumber",children:["Coupon Number ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"couponNumber",id:"couponNumber",className:"w-full rounded border border-gray-300 px-3 py-1 outline-none ".concat(R.couponNumber?"border-red-300":""),placeholder:"Enter Coupon Number",value:D.code,onChange:e=>K(e)}),R.couponNumber&&(0,s.jsx)("span",{className:"text-red-500 text-xs absolute -bottom-4 inset-x-0",children:R.couponNumber})]})]})}),(0,s.jsxs)(x.R,{children:[(0,s.jsx)(o.A,{color:"danger",variant:"light",className:"rounded",onPress:e,children:"Close"}),(0,s.jsx)(o.A,{color:"success",className:"text-white rounded ring-accent",type:"submit",onPress:M,children:"Redeem"})]})]})})})]})}},4483:function(e,t,a){"use strict";a.d(t,{X:function(){return u}});var s=a(15607),r=(0,a(44831).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),n=a(60798),l=a(49869),o=a(50262),c=a(67294),i=a(76733),d=a(85893),m=(0,s.Gp)((e,t)=>{let{Component:a,children:m,getSkeletonProps:u,getContentProps:x}=function(e){var t,a;let d=(0,i.w)(),[m,u]=(0,s.oe)(e,r.variantKeys),{as:x,children:p,isLoaded:h=!1,className:b,classNames:N,...f}=m,g=null!=(a=null!=(t=e.disableAnimation)?t:null==d?void 0:d.disableAnimation)&&a,j=(0,c.useMemo)(()=>r({...u,disableAnimation:g}),[(0,n.Xx)(u),g,p]),y=(0,l.W)(null==N?void 0:N.base,b);return{Component:x||"div",children:p,slots:j,classNames:N,getSkeletonProps:(e={})=>({"data-loaded":(0,o.PB)(h),className:j.base({class:(0,l.W)(y,null==e?void 0:e.className)}),...f}),getContentProps:(e={})=>({className:j.content({class:(0,l.W)(null==N?void 0:N.content,null==e?void 0:e.className)})})}}({...e});return(0,d.jsx)(a,{ref:t,...u(),children:(0,d.jsx)("div",{...x(),children:m})})});m.displayName="NextUI.Skeleton";var u=m}},function(e){e.O(0,[8166,7242,2888,9774,179],function(){return e(e.s=33095)}),_N_E=e.O()}]);