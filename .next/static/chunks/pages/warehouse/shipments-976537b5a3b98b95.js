(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5412],{83454:function(e,t,a){"use strict";var n,s;e.exports=(null==(n=a.g.process)?void 0:n.env)&&"object"==typeof(null==(s=a.g.process)?void 0:s.env)?a.g.process:a(77663)},42539:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/warehouse/shipments",function(){return a(60133)}])},12115:function(e,t,a){"use strict";var n=a(85893);a(67294),t.Z=e=>{let{itemsPerPage:t,setItemsPerPage:a,currentPage:s,setCurrentPage:r,totalEntries:c,totalPages:i}=e;return(0,n.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center pt-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("label",{htmlFor:"items",className:"text-sm",children:"Items per page:"}),(0,n.jsx)("select",{id:"items",className:"border border-gray-300 rounded-md py-1 px-2 ring-accent",value:t,onChange:e=>{a(parseInt(e.target.value,10)),r(1)},children:[15,20,25,30,35].map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 mt-3 md:mt-0",children:[(0,n.jsxs)("span",{className:"text-sm text-gray-700",children:[t*s-t+1," to"," ",t*s<c?t*s:c," ","of ",c]}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)("button",{onClick:()=>r(1),disabled:1===s,className:"p-2 rounded-full ring-accent ".concat(s>1?"text-accent":"text-gray-400"),children:(0,n.jsx)("i",{className:"bi bi-chevron-bar-left text-lg"})}),(0,n.jsx)("button",{onClick:()=>r(e=>e>1?e-1:e),disabled:1===s,className:"p-2 rounded-full ring-accent ".concat(s>1?"text-accent":"text-gray-400"),children:(0,n.jsx)("i",{className:"bi bi-chevron-left text-lg"})}),(0,n.jsx)("button",{onClick:()=>r(e=>e<i?e+1:e),disabled:s===i,className:"p-2 rounded-full ring-accent ".concat(s<i?"text-accent":"text-gray-400"),children:(0,n.jsx)("i",{className:"bi bi-chevron-right text-lg"})}),(0,n.jsx)("button",{onClick:()=>r(i),disabled:s===i,className:"p-2 rounded-full ring-accent ".concat(s<i?"text-accent":"text-gray-400"),children:(0,n.jsx)("i",{className:"bi bi-chevron-bar-right text-lg"})})]})]})]})}},4625:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var n=a(67294);function s(e,t){let[a,s]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e]),a}},60133:function(e,t,a){"use strict";a.r(t);var n=a(85893),s=a(67294),r=a(4625),c=a(12115),i=a(11163),o=a(9134),l=a(32553),d=a(41664),u=a.n(d),h=a(9008),p=a.n(h),m=a(4483),x=a(39840);t.default=()=>{let e=(0,i.useRouter)(),[t,a]=(0,s.useState)(null),[d,h]=(0,s.useState)(10),[f,b]=(0,s.useState)(1),[g,v]=(0,s.useState)(null),[y,j]=(0,s.useState)(null),[N,w]=(0,s.useState)("");(0,r.Z)(N,500);let[_,S]=(0,s.useState)(!0),[k,T]=(0,s.useState)(""),C=(0,l.dQ)(),E=async()=>{let e=localStorage.getItem("warehouse_id");try{S(!0);let t=await fetch("".concat("https://buybackservice.unicornstore.in","/get-all-shipments?page=").concat(f,"&per_page=").concat(d,"&sort_desc=false&search=").concat(N,"&warehouse_id=").concat(e,"&delivered=true&is_confirmed=true"),{headers:{Authorization:C}});if(!t.ok)throw Error("Could not get shipment Res");let n=await t.json();a(n.data),j(n.total_count),v(Math.ceil(n.total_count/d)),n.data.forEach(e=>{T(t=>({...t,[e.shipment_id]:e.status}))})}catch(e){o.Am.error(e.message,{toastId:"getshipmentres"})}finally{setTimeout(()=>{S(!1)},300)}};(0,s.useEffect)(()=>{E()},[f,d]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{b(1),E()},300);return()=>clearTimeout(e)},[N]);let P=async e=>{(0,x.u)("get-shipment-export/".concat(e),{},"Shipment ".concat(e," Devices Data"))};return(0,n.jsxs)("div",{className:"flex justify-center bg-gray-100 min-h-screen",children:[(0,n.jsx)(p(),{children:(0,n.jsx)("title",{children:"BuyBack - Warehouse"})}),(0,n.jsx)("div",{className:"container max-w-screen-xl",children:(0,n.jsxs)("div",{className:"flex flex-col bg-white p-4 mb-8 rounded shadow justify-center space-y-2",children:[(0,n.jsxs)("h2",{className:"text-2xl font-semibold",children:["Warehouse Dashboard | Shipments"," "]}),(0,n.jsxs)("div",{className:"relative p-2 space-y-2 rounded",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("label",{className:"text-sm text-gray-700 mb-1",htmlFor:"search-bar",children:"Search by Shipment ID, Store, Shipping Class, Status or weight"}),(0,n.jsx)("input",{type:"text",className:"w-full border border-gray-400 py-2 px-4 rounded-md ring-accent",name:"search-bar",id:"search-bar",value:N,onChange:e=>w(e.target.value),spellCheck:!1,autoComplete:"off",placeholder:"Search by Shipment ID, Store, Shipping Class, Status or weight"})]}),(0,n.jsxs)("table",{className:"min-w-full table-auto bg-white rounded overflow-hidden shadow",children:[(0,n.jsx)("thead",{className:"bg-gray-200",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-center py-2.5",children:"Shipment ID"}),(0,n.jsx)("th",{className:"text-center py-2.5",children:"Store"}),(0,n.jsx)("th",{className:"text-center py-2.5",children:"Shipping Class"}),(0,n.jsx)("th",{className:"text-center py-2.5",children:"Created On"}),(0,n.jsx)("th",{className:"text-center py-2.5",children:"Confirmed On"}),(0,n.jsx)("th",{className:"text-center py-2.5",children:"Status"}),(0,n.jsx)("th",{className:"text-center py-2.5",children:"Weight"}),(0,n.jsx)("th",{className:"text-center py-2.5",children:"Dimensions"}),(0,n.jsx)("th",{className:"text-center py-2.5",children:"Actions"})]})}),(0,n.jsx)("tbody",{className:"divide-y",children:_?Array(d).fill(0).map((e,t)=>(0,n.jsxs)("tr",{className:"divide-x hover:bg-gray-100",children:[(0,n.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,n.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,n.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,n.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,n.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,n.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,n.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,n.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,n.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,n.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,n.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,n.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,n.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,n.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,n.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,n.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,n.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,n.jsx)(m.X,{className:"h-5 rounded-full"})})]},t)):t&&t.length>0?t.map((t,a)=>(0,n.jsxs)("tr",{className:"divide-x hover:bg-gray-100 cursor-pointer",onClick:()=>e.push("/warehouse/shipment/".concat(t.shipment_id)),children:[(0,n.jsx)("td",{className:"py-1.5 text-center capitalize",children:t.shipment_id}),(0,n.jsx)("td",{className:"py-1.5 text-center capitalize",children:t.store}),(0,n.jsx)("td",{className:"py-1.5 text-center capitalize",children:t.shipping_class}),(0,n.jsx)("td",{className:"py-1.5 text-center capitalize",children:(0,l.a)(t.created_at)}),(0,n.jsx)("td",{className:"py-1.5 text-center capitalize",children:(0,l.a)(t.confirmed_at)}),(0,n.jsx)("td",{className:"py-1.5 text-center capitalize",children:t.status}),(0,n.jsx)("td",{className:"py-1.5 text-center capitalize",children:t.weight_in_kg}),(0,n.jsx)("td",{className:"py-1.5 text-center",children:Object.values(t.box_dimensions).join(" x ")}),(0,n.jsxs)("td",{className:"py-1.5 text-center",children:[(0,n.jsx)(u(),{href:"/warehouse/shipment/".concat(t.shipment_id),className:"bg-blue-100 text-blue-500 hover:text-white hover:bg-blue-500 rounded p-1 transition-all fas fa-eye ring-custom ring-blue-400 me-2"}),(0,n.jsx)("button",{className:"fas fa-download py-1 px-1.5 bg-accent-dimmed accent hover:bg-accent hover:text-white rounded ring-accent",onClick:e=>{e.stopPropagation(),P(t.shipment_id)}})]})]},a)):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:8,className:"w-full border py-4 text-center text-red-500 font-semibold",children:"No entries to show!"})})})]}),(0,n.jsx)(c.Z,{itemsPerPage:d,setItemsPerPage:h,currentPage:f,setCurrentPage:b,totalEntries:y,totalPages:g})]})]})})]})}},39840:function(e,t,a){"use strict";a.d(t,{u:function(){return r}});var n=a(9134),s=a(83454);async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var r,c;let n=localStorage.getItem("token");String(s.env.NEXT_PUBLIC_CUSTOMER_ID);let i=await fetch("".concat("https://buybackservice.unicornstore.in","/").concat(e),{...t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n),...null!==(r=null==t?void 0:t.headers)&&void 0!==r?r:void 0}});if(!i.ok)throw Error("Something went wrong ".concat(i.status));if(""===a){let e=await i.json();if("success"!==e.status)throw Error(null!==(c=null==e?void 0:e.message)&&void 0!==c?c:"Something went wrong (status !=='success' and no message)");return e}{let e=await i.blob(),t=window.URL.createObjectURL(e),n=document.createElement("a");return n.href=t,n.setAttribute("download",a),document.body.appendChild(n),n.click(),n.remove(),null}}catch(e){n.Am.error(e.message)}}},77663:function(e){!function(){var t={229:function(e){var t,a,n,s=e.exports={};function r(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{a="function"==typeof clearTimeout?clearTimeout:c}catch(e){a=c}}();var o=[],l=!1,d=-1;function u(){l&&n&&(l=!1,n.length?o=n.concat(o):d=-1,o.length&&h())}function h(){if(!l){var e=i(u);l=!0;for(var t=o.length;t;){for(n=o,o=[];++d<t;)n&&n[d].run();d=-1,t=o.length}n=null,l=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===c||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];o.push(new p(e,t)),1!==o.length||l||i(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var r=a[e]={exports:{}},c=!0;try{t[e](r,r.exports,n),c=!1}finally{c&&delete a[e]}return r.exports}n.ab="//";var s=n(229);e.exports=s}()},9008:function(e,t,a){e.exports=a(7828)},4483:function(e,t,a){"use strict";a.d(t,{X:function(){return h}});var n=a(15607),s=(0,a(44831).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),r=a(60798),c=a(49869),i=a(50262),o=a(67294),l=a(76733),d=a(85893),u=(0,n.Gp)((e,t)=>{let{Component:a,children:u,getSkeletonProps:h,getContentProps:p}=function(e){var t,a;let d=(0,l.w)(),[u,h]=(0,n.oe)(e,s.variantKeys),{as:p,children:m,isLoaded:x=!1,className:f,classNames:b,...g}=u,v=null!=(a=null!=(t=e.disableAnimation)?t:null==d?void 0:d.disableAnimation)&&a,y=(0,o.useMemo)(()=>s({...h,disableAnimation:v}),[(0,r.Xx)(h),v,m]),j=(0,c.W)(null==b?void 0:b.base,f);return{Component:p||"div",children:m,slots:y,classNames:b,getSkeletonProps:(e={})=>({"data-loaded":(0,i.PB)(x),className:y.base({class:(0,c.W)(j,null==e?void 0:e.className)}),...g}),getContentProps:(e={})=>({className:y.content({class:(0,c.W)(null==b?void 0:b.content,null==e?void 0:e.className)})})}}({...e});return(0,d.jsx)(a,{ref:t,...h(),children:(0,d.jsx)("div",{...p(),children:u})})});u.displayName="NextUI.Skeleton";var h=u}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=42539)}),_N_E=e.O()}]);