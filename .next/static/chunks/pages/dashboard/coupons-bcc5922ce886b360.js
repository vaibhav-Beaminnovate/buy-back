(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{3095:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/coupons",function(){return s(2657)}])},2115:function(e,t,s){"use strict";var a=s(5893);s(7294),t.Z=e=>{let{itemsPerPage:t,setItemsPerPage:s,currentPage:r,setCurrentPage:n,totalEntries:l,totalPages:c}=e;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("label",{htmlFor:"items",className:"text-sm",children:"Items per page:"}),(0,a.jsx)("select",{id:"items",className:"border border-gray-300 rounded-md py-1 px-2 outline-none",value:t,onChange:e=>{s(parseInt(e.target.value,10)),n(1)},children:[15,20,25,30,35].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-3 md:mt-0",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:[t*r-t+1," to"," ",t*r<l?t*r:l," ","of ",l]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>n(1),disabled:1===r,className:"p-2 rounded-full ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>n(e=>e>1?e-1:e),disabled:1===r,className:"p-2 rounded-full ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>n(e=>e<c?e+1:e),disabled:r===c,className:"p-2 rounded-full ".concat(r<c?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-right text-lg"})}),(0,a.jsx)("button",{onClick:()=>n(c),disabled:r===c,className:"p-2 rounded-full ".concat(r<c?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-right text-lg"})})]})]})]})}},2657:function(e,t,s){"use strict";s.r(t);var a=s(5893),r=s(2115),n=s(5066),l=s(7957),c=s(9412),o=s(843),i=s(1680),d=s(199),u=s(7740),m=s(6597),x=s(6476),p=s(9008),h=s.n(p);s(1664);var N=s(7294),b=s(9134);t.default=()=>{let e="https://buybackservice.unicornstore.in",[t,s]=(0,N.useState)([]),[p,f]=(0,N.useState)(1),[j,y]=(0,N.useState)(15),[g,v]=(0,N.useState)(null),[w,C]=(0,N.useState)(!0),[_,k]=(0,N.useState)(null),{isOpen:S,onOpen:P,onOpenChange:A}=(0,l.q)(),[E,X]=(0,N.useState)({sellerName:"",couponNumber:""}),[D,I]=(0,N.useState)({sellerName:"",couponNumber:""}),O=(0,n.dQ)(),F=async()=>{try{C(!0);let t=await fetch("".concat(e,"/get-all-coupons/?page=").concat(p,"&per_page=").concat(j,"&sort_desc=false"),{headers:{Authorization:O}});if(!t.ok)throw Error("Could not get coupon  data");let a=await t.json();s(a.data),v(a.total_count),k(Math.ceil(a.total_count/j))}catch(e){b.Am.error(e.message)}finally{setTimeout(()=>{C(!1)},800)}};(0,N.useEffect)(()=>{F()},[p,j]);let R=e=>{let{name:t,value:s}=e.target;X(e=>({...e,[t]:s})),I(e=>{let a={...e};return"sellerName"===t&&(s.trim()?a.sellerName="":a.sellerName="Seller name is required"),"couponNumber"===t&&(s.trim()?a.couponNumber="":a.couponNumber="Coupon number is required"),a})},U=()=>{let e={};return E.sellerName.trim()||(e.sellerName="Seller name is required"),""===E.couponNumber&&(e.couponNumber="Coupon number is required"),I(e),0===Object.keys(e).length},q=async t=>{if(U())try{let s=await fetch("".concat(e,"/coupon-checkout?coupon_code=").concat(E.couponNumber,"&executive_name=").concat(E.sellerName),{method:"PUT",headers:{Authorization:O}});if(!s.ok)throw Error("Could not redeem code");let a=await s.json();if("success"!==a.status)throw Error(a.message);b.Am.success(a.message),t(),console.log({redeemData:a})}catch(e){b.Am.error(e.message)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h(),{children:(0,a.jsx)("title",{children:"BuyBack - Dashboard | Coupons"})}),(0,a.jsx)("div",{className:"flex justify-center bg-gray-100 min-h-screen h-full relative -top-28",children:(0,a.jsx)("div",{className:"container max-w-screen-xl px-4",children:(0,a.jsxs)("div",{className:"flex flex-col bg-white p-4 my-4 rounded-lg shadow justify-center space-y-2",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)(c.A,{onPress:P,className:"bg-accent text-white px-4 py-2 rounded",children:[(0,a.jsx)("i",{className:"bi bi-cash-stack"})," Redeem Coupon"]})}),w?(0,a.jsxs)("table",{className:"min-w-full table-auto shadow",children:[(0,a.jsx)("thead",{className:"bg-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Order ID"}),(0,a.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Product Name"}),(0,a.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Store Name"}),(0,a.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Customer Name"}),(0,a.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Amount"}),(0,a.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Coupon Created Date"}),(0,a.jsx)("th",{className:"px-4 py-2.5 text-sm font-semibold uppercase text-center",children:"Coupon Valid Upto"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array(j).fill(0).map((e,t)=>(0,a.jsxs)("tr",{className:"divide-x hover:bg-gray-100",children:[(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})})]},t))})]}):t&&t.length>0?(0,a.jsxs)("table",{className:"min-w-full table-auto bg-white rounded overflow-hidden shadow",children:[(0,a.jsx)("thead",{className:"bg-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-center py-2.5",children:"Order ID"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Product Name"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Store Name"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Customer Name"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Amount"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Status"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Coupon Created Date"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Coupon Valid Upto"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:t.map((e,t)=>(0,a.jsxs)("tr",{className:"divide-x",children:[(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:e.order_id||""}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:e.product||""}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:e.location_name||""}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:e.name||""}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:(0,n.fK)(e.price)||""}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:e.status||""}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:(0,n.a)(e.created_at)}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:new Date(e.invalid_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]},t))})]}):(0,a.jsx)("div",{className:"w-full border py-4 text-center text-red-500 font-semibold",children:"No entries to show!"}),(0,a.jsx)(r.Z,{itemsPerPage:j,setItemsPerPage:y,currentPage:p,setCurrentPage:f,totalEntries:g,totalPages:_})]})})}),(0,a.jsx)(i.R,{isOpen:S,onOpenChange:A,isDismissable:!1,children:(0,a.jsx)(d.A,{children:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.k,{className:"flex flex-col gap-1",children:"Redeem Coupon"}),(0,a.jsxs)(m.I,{children:[(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsxs)("label",{htmlFor:"sellerName",children:["Seller Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"sellerName",id:"sellerName",className:"w-full rounded border border-gray-300 px-3 py-1 outline-none ".concat(D.sellerName?"border-red-300":""),placeholder:"Enter Seller Name",value:E.name,onChange:e=>R(e)}),D.sellerName&&(0,a.jsx)("span",{className:"text-red-500 text-xs absolute -bottom-4 inset-x-0",children:D.sellerName})]}),(0,a.jsxs)("div",{className:"relative w-full mt-2",children:[(0,a.jsxs)("label",{htmlFor:"couponNumber",children:["Coupon Number ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"couponNumber",id:"couponNumber",className:"w-full rounded border border-gray-300 px-3 py-1 outline-none ".concat(D.couponNumber?"border-red-300":""),placeholder:"Enter Coupon Number",value:E.code,onChange:e=>R(e)}),D.couponNumber&&(0,a.jsx)("span",{className:"text-red-500 text-xs absolute -bottom-4 inset-x-0",children:D.couponNumber})]})]}),(0,a.jsxs)(x.R,{children:[(0,a.jsx)(c.A,{color:"danger",variant:"light",className:"rounded",onPress:e,children:"Close"}),(0,a.jsx)(c.A,{color:"success",className:"text-white rounded",onPress:()=>q(e),children:"Redeem"})]})]})})})]})}},9008:function(e,t,s){e.exports=s(7828)},6476:function(e,t,s){"use strict";s.d(t,{R:function(){return i}});var a=s(8237),r=s(5607),n=s(3295),l=s(9869),c=s(5893),o=(0,r.Gp)((e,t)=>{let{as:s,children:r,className:o,...i}=e,{slots:d,classNames:u}=(0,a.v)(),m=(0,n.gy)(t);return(0,c.jsx)(s||"footer",{ref:m,className:d.footer({class:(0,l.W)(null==u?void 0:u.footer,o)}),...i,children:r})});o.displayName="NextUI.ModalFooter";var i=o},843:function(e,t,s){"use strict";s.d(t,{X:function(){return m}});var a=s(5607),r=(0,s(9488).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),n=s(9037),l=s(9869),c=s(262),o=s(7294),i=s(6733),d=s(5893),u=(0,a.Gp)((e,t)=>{let{Component:s,children:u,getSkeletonProps:m,getContentProps:x}=function(e){var t,s;let d=(0,i.w)(),[u,m]=(0,a.oe)(e,r.variantKeys),{as:x,children:p,isLoaded:h=!1,className:N,classNames:b,...f}=u,j=null!=(s=null!=(t=e.disableAnimation)?t:null==d?void 0:d.disableAnimation)&&s,y=(0,o.useMemo)(()=>r({...m,disableAnimation:j}),[(0,n.Xx)(m),j,p]),g=(0,l.W)(null==b?void 0:b.base,N);return{Component:x||"div",children:p,slots:y,classNames:b,getSkeletonProps:(e={})=>({"data-loaded":(0,c.PB)(h),className:y.base({class:(0,l.W)(g,null==e?void 0:e.className)}),...f}),getContentProps:(e={})=>({className:y.content({class:(0,l.W)(null==b?void 0:b.content,null==e?void 0:e.className)})})}}({...e});return(0,d.jsx)(s,{ref:t,...m(),children:(0,d.jsx)("div",{...x(),children:u})})});u.displayName="NextUI.Skeleton";var m=u}},function(e){e.O(0,[23,136,835,562,260,242,888,774,179],function(){return e(e.s=3095)}),_N_E=e.O()}]);