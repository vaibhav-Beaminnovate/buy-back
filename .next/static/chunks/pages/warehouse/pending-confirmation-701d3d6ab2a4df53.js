(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2654],{83454:function(e,t,n){"use strict";var a,r;e.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(77663)},50204:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/warehouse/pending-confirmation",function(){return n(44843)}])},12115:function(e,t,n){"use strict";var a=n(85893);n(67294),t.Z=e=>{let{itemsPerPage:t,setItemsPerPage:n,currentPage:r,setCurrentPage:s,totalEntries:o,totalPages:c}=e;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("label",{htmlFor:"items",className:"text-sm",children:"Items per page:"}),(0,a.jsx)("select",{id:"items",className:"border border-gray-300 rounded-md py-1 px-2 ring-accent",value:t,onChange:e=>{n(parseInt(e.target.value,10)),s(1)},children:[15,20,25,30,35].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-3 md:mt-0",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:[t*r-t+1," to"," ",t*r<o?t*r:o," ","of ",o]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>s(1),disabled:1===r,className:"p-2 rounded-full ring-accent ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>s(e=>e>1?e-1:e),disabled:1===r,className:"p-2 rounded-full ring-accent ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>s(e=>e<c?e+1:e),disabled:r===c,className:"p-2 rounded-full ring-accent ".concat(r<c?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-right text-lg"})}),(0,a.jsx)("button",{onClick:()=>s(c),disabled:r===c,className:"p-2 rounded-full ring-accent ".concat(r<c?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-right text-lg"})})]})]})]})}},4625:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(67294);function r(e,t){let[n,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let n=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(n)}},[e]),n}},44843:function(e,t,n){"use strict";n.r(t);var a=n(85893),r=n(67294);n(4625);var s=n(12115),o=n(11163),c=n(9134),i=n(32553),l=n(41664),d=n.n(l),u=n(9008),h=n.n(u),m=n(4483),p=n(86455),f=n.n(p),x=n(39840);t.default=()=>{let e="https://buybackservice.unicornstore.in";(0,o.useRouter)();let[t,n]=(0,r.useState)(null),[l,u]=(0,r.useState)(10),[p,b]=(0,r.useState)(1),[g,v]=(0,r.useState)(null),[y,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(""),[S,_]=(0,r.useState)(!0),C=(0,i.dQ)(),k=async()=>{let t=localStorage.getItem("warehouse_id");try{_(!0);let a=await fetch("".concat(e,"/get-all-shipments?page=").concat(p,"&per_page=").concat(l,"&sort_desc=false&search=").concat(w,"&warehouse_id=").concat(t,"&delivered=true&is_confirmed=false"),{headers:{Authorization:C}});if(!a.ok)throw Error("Could not get shipment Res");let r=await a.json();n(r.data),j(r.total_count),v(Math.ceil(r.total_count/l))}catch(e){c.Am.error(e.message,{toastId:"getshipmentres"})}finally{setTimeout(()=>{_(!1)},300)}};(0,r.useEffect)(()=>{k()},[]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{b(1),k()},300);return()=>clearTimeout(e)},[w]);let T=async(t,n)=>{let a=localStorage.getItem("warehouse_id");f().fire({title:"Approve Shipment?",text:"Are you sure you want to approve this shipment?",icon:"question",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"YES",confirmButtonColor:"#42c8b7",reverseButtons:!0}).then(async n=>{if(n.isConfirmed)try{console.log("Approved");let n=await fetch("".concat(e,"/confirm-shipment/?shipment_id=").concat(t,"&warehouse_id=").concat(a),{method:"PUT"});if(!n.ok)throw Error("Could not approve shipment");let r=await n.json();r.status,c.Am.success(r.message),k()}catch(e){c.Am.error(e.message)}})},E=async e=>{(0,x.u)("get-shipment-export/".concat(e),{},"Shipment ".concat(e," Devices Data"))};return(0,a.jsxs)("div",{className:"flex justify-center bg-gray-100 min-h-screen",children:[(0,a.jsx)(h(),{children:(0,a.jsx)("title",{children:"BuyBack - Warehouse"})}),(0,a.jsx)("div",{className:"container max-w-screen-xl",children:(0,a.jsxs)("div",{className:"flex flex-col bg-white p-4 mb-8 rounded shadow justify-center space-y-2",children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold",children:["Warehouse Dashboard | Shipments Pending Confirmation"," "]}),(0,a.jsxs)("div",{className:"relative p-2 space-y-2 rounded",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"text-sm text-gray-700 mb-1",htmlFor:"search-bar",children:"Search by Shipment ID, Store, Shipping Class, Status or weight"}),(0,a.jsx)("input",{type:"text",className:"w-full border border-gray-400 py-2 px-4 rounded-md ring-accent",name:"search-bar",id:"search-bar",value:w,onChange:e=>N(e.target.value),spellCheck:!1,autoComplete:"off",placeholder:"Search by Shipment ID, Store, Shipping Class, Status or weight"})]}),(0,a.jsxs)("table",{className:"min-w-full table-auto bg-white rounded overflow-hidden shadow",children:[(0,a.jsx)("thead",{className:"bg-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-center py-2.5",children:"Shipment ID"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Store"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Shipping Class"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Created On"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Status"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Weight"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Dimensions"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:S?Array(l).fill(0).map((e,t)=>(0,a.jsxs)("tr",{className:"divide-x",children:[(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(m.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(m.X,{className:"h-5 rounded-full"})})]},t)):t&&t.length>0?t.map((e,t)=>(0,a.jsxs)("tr",{className:"divide-x",children:[(0,a.jsx)("td",{className:"py-1.5 text-center capitalize",children:e.shipment_id}),(0,a.jsx)("td",{className:"py-1.5 text-center capitalize",children:e.store}),(0,a.jsx)("td",{className:"py-1.5 text-center capitalize",children:e.shipping_class}),(0,a.jsx)("td",{className:"py-1.5 text-center capitalize",children:(0,i.a)(e.created_at)}),(0,a.jsx)("td",{className:"py-1.5 text-center capitalize",children:e.status}),(0,a.jsx)("td",{className:"py-1.5 text-center capitalize",children:e.weight_in_kg}),(0,a.jsx)("td",{className:"py-1.5 text-center",children:Object.values(e.box_dimensions).join(" x ")}),(0,a.jsxs)("td",{className:"py-1.5 text-center",children:[(0,a.jsx)(d(),{href:"/warehouse/shipment/".concat(e.shipment_id),className:"bg-blue-100 text-blue-500 hover:text-white hover:bg-blue-500 rounded p-1.5 transition-all fas fa-eye ring-custom ring-blue-400 me-2"}),(0,a.jsx)("button",{className:"fas fa-download py-1 px-1.5 bg-accent-dimmed accent hover:bg-accent hover:text-white rounded ring-accent me-2",onClick:t=>{t.stopPropagation(),E(e.shipment_id)}}),(0,a.jsx)("button",{className:"bg-accent-dimmed accent hover:bg-accent hover:text-white rounded px-2 py-1.5 fas fa-check ring-accent me-2",onClick:()=>T(e.shipment_id)})]})]},t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"w-full border py-4 text-center text-red-500 font-semibold",children:"No entries to show!"})})})]}),(0,a.jsx)(s.Z,{itemsPerPage:l,setItemsPerPage:u,currentPage:p,setCurrentPage:b,totalEntries:y,totalPages:g})]})]})})]})}},39840:function(e,t,n){"use strict";n.d(t,{u:function(){return s}});var a=n(9134),r=n(83454);async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var s,o;let a=localStorage.getItem("token");String(r.env.NEXT_PUBLIC_CUSTOMER_ID);let c=await fetch("".concat("https://buybackservice.unicornstore.in","/").concat(e),{...t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a),...null!==(s=null==t?void 0:t.headers)&&void 0!==s?s:void 0}});if(!c.ok)throw Error("Something went wrong ".concat(c.status));if(""===n){let e=await c.json();if("success"!==e.status)throw Error(null!==(o=null==e?void 0:e.message)&&void 0!==o?o:"Something went wrong (status !=='success' and no message)");return e}{let e=await c.blob(),t=window.URL.createObjectURL(e),a=document.createElement("a");return a.href=t,a.setAttribute("download",n),document.body.appendChild(a),a.click(),a.remove(),null}}catch(e){a.Am.error(e.message)}}},77663:function(e){!function(){var t={229:function(e){var t,n,a,r=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var i=[],l=!1,d=-1;function u(){l&&a&&(l=!1,a.length?i=a.concat(i):d=-1,i.length&&h())}function h(){if(!l){var e=c(u);l=!0;for(var t=i.length;t;){for(a=i,i=[];++d<t;)a&&a[d].run();d=-1,t=i.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new m(e,t)),1!==i.length||l||c(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},o=!0;try{t[e](s,s.exports,a),o=!1}finally{o&&delete n[e]}return s.exports}a.ab="//";var r=a(229);e.exports=r}()},9008:function(e,t,n){e.exports=n(7828)},4483:function(e,t,n){"use strict";n.d(t,{X:function(){return h}});var a=n(15607),r=(0,n(44831).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),s=n(60798),o=n(49869),c=n(50262),i=n(67294),l=n(76733),d=n(85893),u=(0,a.Gp)((e,t)=>{let{Component:n,children:u,getSkeletonProps:h,getContentProps:m}=function(e){var t,n;let d=(0,l.w)(),[u,h]=(0,a.oe)(e,r.variantKeys),{as:m,children:p,isLoaded:f=!1,className:x,classNames:b,...g}=u,v=null!=(n=null!=(t=e.disableAnimation)?t:null==d?void 0:d.disableAnimation)&&n,y=(0,i.useMemo)(()=>r({...h,disableAnimation:v}),[(0,s.Xx)(h),v,p]),j=(0,o.W)(null==b?void 0:b.base,x);return{Component:m||"div",children:p,slots:y,classNames:b,getSkeletonProps:(e={})=>({"data-loaded":(0,c.PB)(f),className:y.base({class:(0,o.W)(j,null==e?void 0:e.className)}),...g}),getContentProps:(e={})=>({className:y.content({class:(0,o.W)(null==b?void 0:b.content,null==e?void 0:e.className)})})}}({...e});return(0,d.jsx)(n,{ref:t,...h(),children:(0,d.jsx)("div",{...m(),children:u})})});u.displayName="NextUI.Skeleton";var h=u}},function(e){e.O(0,[8166,2888,9774,179],function(){return e(e.s=50204)}),_N_E=e.O()}]);