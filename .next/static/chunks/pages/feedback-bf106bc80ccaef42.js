(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8862],{84695:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/feedback",function(){return t(53722)}])},53722:function(e,s,t){"use strict";t.r(s);var a=t(85893),l=t(10843),r=t(1773),i=t(39412),n=t(9008),o=t.n(n),d=t(25675),c=t.n(d),u=t(11163),f=t(67294);t(58877);var m=t(9134);s.default=()=>{let e="https://buybackservice.unicornstore.in",s=(0,u.useRouter)(),[t,n]=(0,f.useState)(""),[d,p]=(0,f.useState)({}),[h,b]=(0,f.useState)([]),[x,g]=(0,f.useState)(!0),[j,v]=(0,f.useState)({feedback:""}),[N,w]=(0,f.useState)(!1),_=async()=>{try{g(!0);let s=await fetch("".concat(e,"/get-reviews-questions-options/?page=1&per_page=100&sort_desc=false"));if(!s.ok)throw Error("Could not get questions");let t=await s.json();if("success"!==t.status)throw Error(t.message);b(t.data)}catch(e){m.Am.error(e.message)}finally{setTimeout(()=>{g(!1)},300)}};function y(e,s){p(t=>{let a={...t};return a[e]===s?delete a[e]:a[e]=s,a})}(0,f.useEffect)(()=>{_()},[]);let k=()=>h.filter(e=>1===e.is_required).map(e=>e.question_id).every(e=>d[e]),q=async()=>{if(N&&s.replace("/"),!k()){n("Please fill all required fields.");return}let t=parseInt(localStorage.getItem("customer_id")),a=parseInt(localStorage.getItem("order_id"));try{let l=await fetch("".concat(e,"/customer-review/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:t,order_id:a,reviews:Object.entries(d).map(e=>{let[s,t]=e;return{question_id:parseInt(s),answer_id:t}}),feedback:j.feedback})});if(!l.ok)throw Error("Could not submit feedback res");let r=await l.json();if("success"!==r.status)throw Error(r.message);w(!0),m.Am.success(r.message),s.replace("/")}catch(e){m.Am.error(e.message)}};return(0,a.jsxs)("div",{className:"w-full flex flex-col items-center bg-white",children:[(0,a.jsx)(o(),{children:(0,a.jsx)("title",{children:"BuyBack | Customer Feedback"})}),(0,a.jsxs)("div",{className:"max-w-screen-xl w-full px-1 md:px-5 lg:px-5 xl:px-0",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold",children:"Customer Feedback Form"}),(0,a.jsxs)("div",{className:"w-full border border-gray-300 rounded py-4 px-2 sm:px-4 mt-4",children:[x?(0,a.jsxs)("div",{className:"space-y-10 bg-white",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.X,{className:"h-10 w-3/4 mb-4 rounded-full"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 ",children:[(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"}),(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"}),(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"}),(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.X,{className:"h-10 w-3/4 mb-4 rounded-full"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"}),(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.X,{className:"h-10 w-3/4 mb-4 rounded-full"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"}),(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"}),(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"}),(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"}),(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"}),(0,a.jsx)(l.X,{className:"h-10 w-full rounded-full"})]})]})]}):(0,a.jsx)("ol",{className:"space-y-8",children:h.map((e,s)=>(0,a.jsxs)("li",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold",children:[(0,a.jsxs)("span",{className:"me-2",children:[s+1,"."]}),t&&1===e.is_required&&(0,a.jsx)("span",{className:"border-l-4 border-red-500 rounded-l ps-2"}),e.description,1===e.is_required&&(0,a.jsx)("span",{className:"text-red-500 text-sm align-super",children:"*"}),t&&1===e.is_required&&(0,a.jsx)("span",{className:"text-red-500 text-sm",children:"This is a required question"})]}),"binary"===e.question_type&&(0,a.jsx)("fieldset",{className:"mt-2 gap-x-2 grid grid-cols-2 md:grid-cols-2",children:e.options.map((s,t)=>(0,a.jsxs)("label",{id:"label-".concat(s.id),className:"bg-gray-100 ps-4 mb-3 py-1 rounded custom-radio border cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",name:"question-".concat(e.question_id),checked:d[e.question_id]===s.id,onChange:()=>y(e.question_id,s.id),value:s.id,className:"hidden"}),(0,a.jsx)("span",{className:"radio-custom"}),(0,a.jsx)("span",{className:"ms-3 flex items-start justify-center flex-col w-full",children:s.option_value})]},t))}),"select"===e.question_type&&(0,a.jsx)("fieldset",{className:"mt-2 gap-x-2 grid grid-cols-1 md:grid-cols-2",children:e.options.map((s,t)=>(0,a.jsxs)("label",{id:"label-".concat(s.id),className:"bg-gray-100 ps-4 mb-3  py-1 rounded custom-checkbox border cursor-pointer",children:[(0,a.jsx)(r.K,{color:"success",radius:"sm",isSelected:d[e.question_id]===s.id,onValueChange:()=>y(e.question_id,s.id),className:"text-white"}),(0,a.jsxs)("span",{className:" flex items-start justify-center flex-col w-full",children:[s.s3_image_url&&(0,a.jsx)(c(),{src:s.s3_image_url,width:100,height:100,alt:"Option image"}),s.option_value]})]},s.id))}),"multiselect"===e.question_type&&(0,a.jsx)("fieldset",{className:"mt-2 gap-x-2 grid grid-cols-1 md:grid-cols-2",children:e.options.map(s=>{var t;return(0,a.jsxs)("label",{id:"label-".concat(s.id),className:"bg-gray-100 ps-4 mb-3  py-1 rounded custom-checkbox border cursor-pointer",children:[(0,a.jsx)(r.K,{color:"success",radius:"sm",isSelected:null===(t=d[e.question_id])||void 0===t?void 0:t.includes(s.id),onValueChange:()=>{let t=d[e.question_id]||[],a=t.includes(s.id)?t.filter(e=>e!==s.id):[...t,s.id];p(s=>({...s,[e.question_id]:a}))},className:"text-white"}),(0,a.jsxs)("span",{className:"ms-3 flex items-start justify-center flex-col w-full",children:[s.s3_image_url&&(0,a.jsx)(c(),{src:s.s3_image_url,width:100,height:100,alt:"Option image"}),s.option_value]})]},s.id)})})]},s))}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{htmlFor:"feedback",children:"Feedback (if any)"}),(0,a.jsx)("textarea",{name:"feedback",id:"feedback",onChange:e=>{let{name:s,value:t}=e.target;v({...j,[s]:t})},value:j.feedback,cols:4,className:"px-3 py-1 border rounded ring-accent w-full",placeholder:"Please enter any feedback the customer has"})]}),(0,a.jsx)(i.A,{className:"bg-accent rounded text-white ml-auto block ring-accent",onPress:q,children:"Submit"})]})]})]})}},9008:function(e,s,t){e.exports=t(7828)},10843:function(e,s,t){"use strict";t.d(s,{X:function(){return f}});var a=t(15607),l=(0,t(59488).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),r=t(49037),i=t(49869),n=t(50262),o=t(67294),d=t(76733),c=t(85893),u=(0,a.Gp)((e,s)=>{let{Component:t,children:u,getSkeletonProps:f,getContentProps:m}=function(e){var s,t;let c=(0,d.w)(),[u,f]=(0,a.oe)(e,l.variantKeys),{as:m,children:p,isLoaded:h=!1,className:b,classNames:x,...g}=u,j=null!=(t=null!=(s=e.disableAnimation)?s:null==c?void 0:c.disableAnimation)&&t,v=(0,o.useMemo)(()=>l({...f,disableAnimation:j}),[(0,r.Xx)(f),j,p]),N=(0,i.W)(null==x?void 0:x.base,b);return{Component:m||"div",children:p,slots:v,classNames:x,getSkeletonProps:(e={})=>({"data-loaded":(0,n.PB)(h),className:v.base({class:(0,i.W)(N,null==e?void 0:e.className)}),...g}),getContentProps:(e={})=>({className:v.content({class:(0,i.W)(null==x?void 0:x.content,null==e?void 0:e.className)})})}}({...e});return(0,c.jsx)(t,{ref:s,...f(),children:(0,c.jsx)("div",{...m(),children:u})})});u.displayName="NextUI.Skeleton";var f=u},27794:function(e,s,t){"use strict";t.d(s,{W:function(){return r}});var a=t(67294),l=t(93387);function r(e,s=[]){let t=(0,a.useRef)(e);return(0,l.G)(()=>{t.current=e}),(0,a.useCallback)((...e)=>{var s;return null==(s=t.current)?void 0:s.call(t,...e)},s)}},93387:function(e,s,t){"use strict";t.d(s,{G:function(){return l}});var a=t(67294),l=(null==globalThis?void 0:globalThis.document)?a.useLayoutEffect:a.useEffect},73699:function(e,s,t){"use strict";t.d(s,{T:function(){return n}});var a=t(37127),l=t(67294),r=t(44971);let i={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function n(e){let{children:s,elementType:t="div",isFocusable:n,style:o,...d}=e,{visuallyHiddenProps:c}=function(e={}){let{style:s,isFocusable:t}=e,[a,n]=(0,l.useState)(!1),{focusWithinProps:o}=(0,r.L)({isDisabled:!t,onFocusWithinChange:e=>n(e)}),d=(0,l.useMemo)(()=>a?s:s?{...i,...s}:i,[a]);return{visuallyHiddenProps:{...o,style:d}}}(e);return l.createElement(t,(0,a.d)(d,c),s)}}},function(e){e.O(0,[1773,8877,2888,9774,179],function(){return e(e.s=84695)}),_N_E=e.O()}]);