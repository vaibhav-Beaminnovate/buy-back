(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4892],{10597:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Brands/product/questions/[...variant_order]",function(){return s(9199)}])},69722:function(e,t,s){"use strict";var a=s(85893),r=s(32553),n=s(96180),l=s(67294),i=s(3942),c=s.n(i),o=s(40221),d=s(9134);t.Z=e=>{let{buttonStyles:t={},imageStyles:i={},containerStyles:m={},onImagesChange:u=()=>{},folderName:h,s3imageUrlArray:x,setS3imageUrlArray:p,tag:g,imageName:f,setImageName:b,setAadharCount:y,setPhoneCount:j,clearImages:w}=e,[N,v]=(0,l.useState)([]),[A,I]=(0,l.useState)(!1),S="https://buybackservice.unicornstore.in",E=(0,r.dQ)(),[_,k]=(0,l.useState)(""),C=e=>e.reduce((e,t)=>({...e,...t}),{});(0,l.useEffect)(()=>{x&&C(x)[g]&&v([{data_url:C(x)[g]}]),console.log(C(x)[g]),k(C(x)[g])},[x,g]),(0,l.useEffect)(()=>{w&&w(()=>v([]))},[w]),(0,l.useEffect)(()=>{("GST_certificate"===g||"cheque"===g||"company_logo"===g)&&v(x.filter(e=>e[g]).map(e=>({original_url:e[g],data_url:"".concat(e[g],"?t=").concat(new Date().getTime())})))},[x,g]);let T=e=>({front_aadhar:"front_aadhar",back_aadhar:"back_aadhar",Top:"Top",Bottom:"Bottom",Front:"Front",Back:"Back",Left:"Left",Right:"Right",front_invoice:"front_invoice",back_invoice:"back_invoice"})[e]||e,M=e=>{p(t=>t.filter(t=>!Object.values(t).includes(e)))},P=e=>{let[t,s]=e.split(","),a=t.split(":")[1].split(";")[0],r=atob(s),n=new ArrayBuffer(r.length),l=new Uint8Array(n);for(let e=0;e<r.length;e++)l[e]=r.charCodeAt(e);return new Blob([n],{type:a})},D=(e,t)=>new File([e],t,{type:e.type}),R=async e=>{try{let t=s(1616);if(!("image/heic"===e.type||"image/heif"===e.type||/\.(heic|heif)$/i.test(e.name)))return e;{let s=await t({blob:e,toType:"image/png"}),a=e.name.split(".").slice(0,-1).join(".");return new File([s],"".concat(a,".png"),{type:"image/png"})}}catch(t){return console.error("Error converting HEIC to PNG: ",t),e}},q=async e=>{let t=await R(e[0]),s=await (0,o.Z)(t,{maxSizeMB:4,maxWidthOrHeight:1920,useWebWorker:!0}),a=new FormData;a.append("file",s,s.name);try{I(!0);let e=await fetch("".concat(S,"/upload-for-order-detail/?folder_name=").concat(h),{method:"POST",headers:{Authorization:E},body:a});if(!e.ok)throw Error("Failed to upload images");let t=await e.json();if("success"!==t.status)throw Error(t.message);p(e=>[...e,{[T(g)]:t.s3_image_url}]),["Top","Bottom","Front","Back","Left","Right"].includes(g)&&j(e=>e+1),["front_aadhar","back_aadhar"].includes(g)&&y(e=>e+1),k(t.s3_image_url)}catch(e){console.error("Error uploading images:",e),d.Am.error(e.message)}finally{I(!1)}},O=(0,l.useCallback)((e,t)=>{I(!0),b(g+(f+1)),v(e),u(e,t),q(e.map(e=>D(P(e.data_url),"image_".concat(g,"_").concat(e.file.name))))},[u,g,q]),B=async e=>{try{if(!(await fetch("".concat(S,"/remove-image?s3_image=").concat(e),{method:"DELETE",headers:{Authorization:E}})).ok)throw Error("Failed to delete image");["Top","Bottom","Front","Back","Left","Right"].includes(g)&&j(e=>e-1),["front_aadhar","back_aadhar"].includes(g)&&y(e=>e-1)}catch(e){console.error("Error deleting image:",e)}},F=async e=>{let t=N[e],s=t&&t.data_url;await B(s),M(s),v(t=>t.filter((t,s)=>s!==e)),p(e=>e.filter(e=>!Object.values(e).includes(s)))};return A?(0,a.jsx)("div",{className:"w-full max-h-full h-full relative grid place-content-center",children:(0,a.jsx)(n.c,{color:"success"})}):(0,a.jsx)("div",{className:"w-full h-full max-h-full relative ".concat(m),children:(0,a.jsx)(c(),{value:N,onChange:O,dataURLKey:"data_url",allowNonImageType:!0,children:e=>{let{imageList:s,onImageUpload:r,isDragging:n,dragProps:l}=e;return(0,a.jsxs)("div",{className:"flex flex-col w-full h-full items-center justify-center max-h-full",children:[(0,a.jsx)("button",{style:{...t,color:n?"red":void 0},onClick:r,...l,className:"text-gray-400 w-full h-full content-center absolute top-0 left-0 ",children:(0,a.jsx)("span",{className:"".concat(N.length>0?"hidden":""),children:"Click here to upload or Drop here"})}),(0,a.jsx)("div",{className:"overflow-y-scroll scrollbar-hidden z-10 w-full",children:(0,a.jsx)("div",{className:"flex items-center justify-center w-full space-y-5",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-start md:justify-center ",children:[(0,a.jsx)("div",{className:"flex flex-row absolute right-1 space-x-1 top-1 h-full",children:(0,a.jsx)("button",{className:"text-red-500 bg-gray-200 rounded px-1 text-xl h-fit sticky top-1",onClick:e=>{e.stopPropagation(),F(t)},children:(0,a.jsx)("i",{className:"bi bi-x-square"})})}),(0,a.jsx)("img",{className:"h-full",src:_,alt:"",style:i})]},t))})})]})}})})}},9199:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return q}});var a=s(85893),r=s(67294),n=e=>{let{journeyData:t}=e;return t&&"success"===t.status&&Array.isArray(t.data)&&0!==t.data.length?(0,a.jsx)("div",{className:"w-full h-full flex flex-col",children:t.data.map((e,t)=>Object.keys(e).map(s=>{let r=e[s];return Array.isArray(r)?(0,a.jsxs)("div",{className:"journey-element",children:[(0,a.jsxs)("p",{className:" text-lg font-semibold accent",children:[s,":"]}),r.map((e,t)=>(0,a.jsx)("p",{className:"ms-2",children:e&&e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()||"No detail available"},t))]},"".concat(t,"-").concat(s)):(0,a.jsx)("div",{className:"journey-element",children:(0,a.jsxs)("p",{children:["Error: Details are not available for ",s,"."]})},"".concat(t,"-").concat(s))}))}):(0,a.jsx)("p",{})},l=s(69722),i=s(9008),c=s.n(i),o=s(25675),d=s.n(o),m=s(11163),u=s(58386),h=s(5152),x=s.n(h),p=s(67957),g=s(96180),f=s(28278),b=s(14930),y=s(10405),j=s(44265),w=s(87740),N=s(86597),v=s(4483),A=s(32553),I=s(9134),S=e=>{let{buyerData:t,sign:r}=e,n=()=>'\n          <div style="font-size: 13px; line-height: 1.2; width: 100%; box-sizing: border-box; padding: 30px;">\n            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; align-items: start; width: 100%;">\n              <div>\n                <p style="font-size:18px; font-weight: bold;">Customer Purchase Receipt</p>\n                <p style="margin-top:10px">Date: '.concat((0,A.a)(new Date),'</p>\n                <p>Service Number: </p>\n                <p>Buyer: Unicorn </p>\n              </div>\n              <div style="text-align: right;">\n                <p style="font-size: 18px; font-weight: bold;">BuyBack</p>\n                <p style="font-size: 12px;">www.buyback.in</p>\n              </div>\n              <div class="seller-details" style="grid-column: span 2 / span 2; margin: 10px 0px 0px 0px; border: 1px solid #ddd; border-radius: 5px;">\n                <table style="width: 100%; border-collapse: collapse; margin: 16px">\n                  <tr>\n                    <td style="font-weight: bold; width: 100px;">Seller Details:</td>\n                    <td></td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Name:</td>\n                    <td style="padding: 5px 0;">').concat(t.username+" "+t.userLastName,'</td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Contact No.:</td>\n                    <td style="padding: 5px 0;">').concat(t.userPhone,'</td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Email Id:</td>\n                    <td style="padding: 5px 0;">').concat(t.userEmail,'</td>\n                  </tr>\n                </table>\n              </div>\n              <div style="grid-column: span 2 / span 2; margin: 10px 0px 0px 0px;">\n                <p style="font-weight: bold; font-size:16px;">INDEMNITY BOND</p>\n                <p style="margin: 8px 0px">This Bond of Indemnity is made and executed by: <strong>').concat(t.username+" "+t.userLastName,'</strong> Herein after referred to as "Seller" who has come in Retail store of <strong>UNICORN @ CITY</strong> to sell his/her old Gadget, to the Unicorn Network herein after referred to as "Purchaser" which expression shall mean and include its representative, executors, nominee, partness, affiliates and assigns on day of <strong>').concat((0,A.a)(new Date),'</strong></p>\n                <div style="display: flex; align-items: flex-end; flex-direction: column;margin: 10px 0px 0px 0px">\n                ').concat(r.trimmedDataURL&&"<img\n                src=".concat(r.trimmedDataURL,'\n                style="width: auto; height:40px;"\n                />'),"\n                <p><strong>").concat(t.username+" "+t.userLastName,"</strong> <br /> Seller Name</p>\n                </div>\n              </div>\n              \n            </div>\n          </div>\n        ");return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"border",dangerouslySetInnerHTML:{__html:n()}}),(0,a.jsx)("div",{className:"text-center mt-8",children:(0,a.jsx)(b.A,{color:"primary",onPress:()=>{console.log({sign:r});try{if("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC"===r.trimmedDataURL||""===r.trimmedDataURL)throw Error("Empty Signature");s.e(8607).then(s.t.bind(s,68607,23)).then(e=>{let t=e.default,s=n();t({printable:s,type:"raw-html",honorMarginPadding:!0,style:"\n            @page {\n              size: A4;\n              margin: 0;\n              }\n              body {\n                    margin: 0px;\n                    }\n                    div {\n                    width: 100%;\n                  } \n                  .seller-details {\n                    margin-right: 40px;\n                    }\n                    "})}).catch(e=>{console.error("Failed to load printJS:",e)})}catch(e){I.Am.error(e.message)}},className:"text-white rounded block ms-auto ring-custom !ring-blue-400",children:"Print Bond"})})]})},E=s(25422),_=s(55961),k=s.n(_),C=s(41664),T=s.n(C),M=s(58877),P=s.n(M),D=s(96476),R=e=>{let{setImeiFormData:t,setErrors:n,errors:l}=e,[i,c]=(0,r.useState)(null),o=(0,r.useRef)(null),{isOpen:d,onOpen:m,onOpenChange:u,onClose:h}=(0,p.q)(),x=["aztec","code_128","code_39","code_93","codabar","data_matrix","ean_13","ean_8","itf","pdf417","qr_code","upc_a","upc_e"];class g{static async polyfill(){if(!("BarcodeDetector"in window))try{await s.e(3087).then(s.bind(s,3087))}catch(e){throw console.log(e),Error("BarcodeDetector API is not supported by your browser.",{cause:e})}}static async getSupportedFormats(){let e=await window.BarcodeDetector.getSupportedFormats()||[];return x.filter(t=>e.includes(t))}static async create(e){let t=Array.isArray(e)&&e.length>0?e:await g.getSupportedFormats();return new g(t)}static async setup(){try{return await g.polyfill(),{barcodeReaderError:null}}catch(e){return{barcodeReaderError:e}}}async detect(e){if(!this.barcodeReader)throw Error("BarcodeReader is not initialized.");let t=await this.barcodeReader.detect(e);if(Array.isArray(t)&&t.length>0)return t[0]}constructor(e){this.barcodeReader=new window.BarcodeDetector({formats:e})}}return(0,r.useEffect)(()=>{if(d)return(async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),s=e.getVideoTracks()[0];s.getCapabilities().zoom&&await s.applyConstraints({advanced:[{zoom:2}]}),o.current&&(o.current.srcObject=e,o.current.autoplay=!0,o.current.playsInline=!0,o.current.muted=!0,o.current.play());let{barcodeReaderError:a}=await g.setup();if(a){c(a.message);return}let r=await g.getSupportedFormats(),l=await g.create(r),i=async()=>{if(o.current&&o.current.readyState>=2)try{let e=await l.detect(o.current);if(e){let s=o.current.srcObject;s&&s.getTracks().forEach(e=>e.stop()),t(t=>({...t,newIMEI:e.rawValue})),15===e.rawValue.length?n(e=>({...e,newIMEI:""})):n(e=>({...e,newIMEI:"New IMEI must be 15 digits"})),h()}}catch(e){console.log("No barcode detected:",e.message)}requestAnimationFrame(i)};i()}catch(e){c(e.message)}})(),()=>{o.current&&o.current.srcObject&&(o.current.srcObject.getTracks().forEach(e=>e.stop()),o.current.srcObject=null)}},[d]),(0,a.jsxs)("div",{className:"flex flex-col justify-end",children:[(0,a.jsx)("button",{onClick:m,className:"p-2.5 fas fa-camera bg-blue-100 text-blue-500 hover:bg-blue-500 hover:text-white transition-all rounded"}),l.newIMEI&&(0,a.jsx)("span",{className:"text-xs",children:" \xa0"}),!l.neIMEI&&l.oldIMEI&&(0,a.jsx)("span",{className:"text-xs hidden lg:inline",children:" \xa0"}),(0,a.jsx)(y.R,{isOpen:d,onOpenChange:u,children:(0,a.jsx)(j.A,{children:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.k,{className:"flex flex-col gap-1",children:"Barcode Scanner"}),(0,a.jsx)(N.I,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg mb-1",children:"Align Barcode in the frame below"}),i&&(0,a.jsxs)("p",{children:["Error: ",i]}),(0,a.jsx)("video",{ref:o,className:"w-full"})]})}),(0,a.jsx)(D.R,{children:(0,a.jsx)(b.A,{color:"danger",variant:"light",onPress:e,children:"Close"})})]})})})]})};s(91819),s(61120),x()(()=>s.e(8607).then(s.t.bind(s,68607,23)),{loadableGenerated:{webpack:()=>[68607]},ssr:!1}),x()(()=>s.e(3842).then(s.t.bind(s,80599,23)),{loadableGenerated:{webpack:()=>[80599]},ssr:!1});var q=()=>{let e=(0,m.useRouter)(),{variant_order:t}=e.query,i="https://buybackservice.unicornstore.in",[o,h]=(0,r.useState)(null),[x,_]=(0,r.useState)(!0),[C,M]=(0,r.useState)(null),[D,q]=(0,r.useState)([]),[O,B]=(0,r.useState)({}),[F,U]=(0,r.useState)(!0),[z,L]=(0,r.useState)(null),[G,K]=(0,r.useState)(0),[J,V]=(0,r.useState)(""),[Y,Q]=(0,r.useState)(""),[Z,X]=(0,r.useState)(""),[H,W]=(0,r.useState)(""),[$,ee]=(0,r.useState)(""),[et,es]=(0,r.useState)(""),[ea,er]=(0,r.useState)(!1),[en,el]=(0,r.useState)(!0),[ei,ec]=(0,r.useState)(null),[eo,ed]=(0,r.useState)(!1),[em,eu]=(0,r.useState)(0),[eh,ex]=(0,r.useState)(!1),[ep,eg]=(0,r.useState)(!0),[ef,eb]=(0,r.useState)(""),[ey,ej]=(0,r.useState)([]),[ew,eN]=(0,r.useState)(""),[ev,eA]=(0,r.useState)(!1),[eI,eS]=(0,r.useState)(null),[eE,e_]=(0,r.useState)(!1),[ek,eC]=(0,r.useState)(""),[eT,eM]=(0,r.useState)(""),[eP,eD]=(0,r.useState)(""),[eR,eq]=(0,r.useState)(new Set),[eO,eB]=(0,r.useState)(0),eF=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,[eU,ez]=(0,r.useState)(0),[eL,eG]=(0,r.useState)(0),[eK,eJ]=(0,r.useState)(!1),[eV,eY]=(0,r.useState)(""),[eQ,eZ]=(0,r.useState)(!1),[eX,eH]=(0,r.useState)(!1),[eW,e$]=(0,r.useState)(!0),[e0,e1]=(0,r.useState)({userEmail:Z,userPhone:H,userLastName:Y,username:J}),[e2,e5]=(0,r.useState)({}),{isOpen:e4,onOpen:e3,onOpenChange:e8}=(0,p.q)(),[e6,e7]=(0,r.useState)(0),[e9,te]=(0,r.useState)({price:!0,verification:!1,phoneDetails:!1,indemnity:!1}),[tt,ts]=(0,r.useState)({price:!1,verification:!1,phoneDetails:!1,indemnity:!1}),[ta,tr]=(0,r.useState)({oldIMEI:"",newIMEI:""}),[tn,tl]=(0,r.useState)({oldIMEI:"",newIMEI:""}),[ti,tc]=(0,r.useState)(!1),[to,td]=(0,r.useState)([]),[tm,tu]=(0,r.useState)(null),[th,tx]=(0,r.useState)(""),[tp,tg]=(0,r.useState)(!0),[tf,tb]=(0,r.useState)(!1),ty=(0,r.useRef)(null),[tj,tw]=(0,r.useState)({trimmedDataURL:""}),[tN,tv]=(0,r.useState)(!1),tA=(0,r.useRef)(null),tI=(0,A.dQ)();(0,r.useEffect)(()=>{e1({userEmail:Z,userPhone:H,userLastName:Y,username:J})},[Z,H,Y,J]),(0,r.useEffect)(()=>{let e;return em>0?e=setInterval(()=>{eu(e=>e-1)},1e3):ex(!1),()=>clearInterval(e)},[em]);let tS=()=>{X(""),V(""),Q(""),W(""),es(""),er(!1),eg(!0),ex(!1),eu(0),tr({oldIMEI:"",newIMEI:""}),e$(!0),ej([]),eN(""),ez(0),eG(0),eH(!1),eJ(!1)};function tE(e,t){B(s=>{let a={...s};return a[e]===t?delete a[e]:a[e]=t,a})}let t_=async()=>{try{if(!(await fetch("".concat(i,"/delete-all-by-order-id?order_id=").concat(t[1]),{method:"DELETE",headers:{Authorization:tI}})).ok)throw Error("Delete failed")}catch(e){console.log(e),M(e.message)}},tk=async()=>{_(!0);try{let e=await fetch("".concat(i,"/get-variant-by-id/?variant_id=").concat(t[0]),{headers:{Authorization:tI}});if(!e.ok)throw Error("Failed to fetch variant");let s=await e.json();if(L(s),!s.product_id)throw Error("Product ID is missing in variant");let a=await fetch("".concat(i,"/get-product-by-id/?product_id=").concat(s.product_id),{headers:{Authorization:tI}});if(!a.ok)throw Error("Failed to fetch product");let r=await a.json();h(r);let n=await fetch("".concat(i,"/get-questions-by-product?product_id=").concat(s.product_id),{headers:{Authorization:tI}});if(!n.ok)throw Error("Failed to fetch questions");let l=await n.json();q(l.result);let c=new Set(l.result.filter(e=>1===e.is_required).map(e=>e.question_id));eq(c)}catch(e){M(e.message)}finally{_(!1)}};(0,r.useEffect)(()=>{ej([]),t&&(eM(localStorage.getItem("staff_id")),tu(localStorage.getItem("staff_login")),"false"===localStorage.getItem("staff_login")?(ee(localStorage.getItem("name")),tx(localStorage.getItem("executive_id"))):tZ(localStorage.getItem("staff_id")),t_(),tk(),tX(),localStorage.removeItem("order_id"),localStorage.removeItem("customer_id"))},[t,i]),(0,r.useEffect)(()=>{let e=Object.keys(O).length>0;e?e&&e_(!0):e_(!1),tM()&&eD("")},[O]),(0,r.useEffect)(()=>{"yes"===O.satisfied&&el(!0)},[O.satisfied]);let tC=async(e,s)=>{if(F)try{if(U(!1),!(await fetch("".concat(i,"/create-product-question-answer"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:tI},body:JSON.stringify({variant_id:t[0],order_id:t[1],question_id:e,answer:s})})).ok)throw Error("Failed to submit answer")}catch(e){console.error("Error submitting answer:",e.message)}finally{U(!0)}},tT=(e,t)=>{tC(e,t),setTimeout(()=>{tL()},250)},tM=()=>D.filter(e=>1===e.is_required).map(e=>e.question_id).every(e=>O[e]),tP=async()=>{if(eE){if(!tM()){eD("Please fill all required fields.");return}e3(),K("Loading...");try{let e=await fetch("".concat(i,"/create-order-detail/?order_id=").concat(t[1],"&staff_id=").concat(eT),{method:"POST",headers:{Authorization:tI}});if(!e.ok)throw Error("Could not create order detail");let s=await e.json();"error"===s.status||"info"===s.status?K("Something went wrong"):(K(s.exact_value),eC(s.order_detail_id),e5(s))}catch(e){console.log(e)}finally{setTimeout(()=>{tg(!1)},300)}}},tD=async()=>{if(eF.test(Z))try{eN(""),er(!0);let e=await fetch("".concat(i,"/customer/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:tI},body:JSON.stringify({first_name:J,last_name:Y,email:Z,phone_number:H})});if(!e.ok)throw Error("could not create customer");let t=await e.json();ec(t.customer_id),eu(60),ex(!0),eg(!1)}catch(e){console.log(e)}else eN("Please enter a valid email address.")},tR=async()=>{if(eF.test(Z))try{eN(""),er(!0);let e=await fetch("".concat(i,"/customer/create?otp_for=terms"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:tI},body:JSON.stringify({first_name:J,last_name:Y,email:Z,phone_number:H})});if(!e.ok)throw Error("could not create customer");let t=await e.json();ec(t.customer_id),eu(60),ex(!0),eg(!1)}catch(e){console.log(e)}else eN("Please enter a valid email address.")},tq=async()=>{try{let e=await fetch("".concat(i,"/confirm-otp?customer_id=").concat(ei,"&otp=").concat(et,"&order_id=").concat(t[1]),{headers:{Authorization:tI}});if(!e.ok)throw Error("Could not confirm otp");let s=await e.json();"success"===s.status?(tf&&e7(e=>e+1),tf&&ts(e=>({...e,verification:!0})),eJ(!0),ed(!1)):ed(!0)}catch(e){console.log(e)}},tO=async()=>{try{let e=await fetch("".concat(i,"/confirm-otp?customer_id=").concat(ei,"&otp=").concat(eV,"&order_id=").concat(t[1],"&otp_for=terms"),{headers:{Authorization:tI}});if(!e.ok)throw Error("Could not confirm otp");let s=await e.json();"success"===s.status?(tB(),e7(e=>e+1),tf||ts(e=>({...e,verification:!0})),tf&&ts(e=>({...e,price:!0})),te(e=>({...e,phoneDetails:!0})),eZ(!1)):eZ(!0)}catch(e){console.log(e)}},tB=async()=>{try{let e=await fetch("".concat(i,"/create-order-folder/?order_id=").concat(t[1]),{method:"POST",headers:{Authorization:tI}});if(!e.ok)throw Error("Could not create order folder");let s=await e.json();eb(s.folder)}catch(e){console.log(e)}},tF=e=>{let{name:t,value:s}=e.target;tr({...ta,[t]:s}),tl(e=>{let a={...e};return"oldIMEI"===t&&(s.trim()?15!==s.trim().length?a.oldIMEI="Old IMEI must be 15 digits":a.oldIMEI="":a.oldIMEI="Old IMEI is required"),"newIMEI"===t&&(!s.trim()&&eW?a.newIMEI="New IMEI is required":15!==s.trim().length&&eW?a.newIMEI="New IMEI must be 15 digits":a.newIMEI=""),a})},tU=()=>{let e={};return ta.oldIMEI.trim()?ta.oldIMEI.length<15&&(e.oldIMEI="Old IMEI must be 15 digits"):e.oldIMEI="Old IMEI is required",eW&&!ta.newIMEI.trim()?e.newIMEI="New IMEI is required":eW&&ta.newIMEI.length<15&&(e.newIMEI="New IMEI must be 15 digits"),tl(e),0===Object.keys(e).length},tz=async()=>{if(!tU()){tA.current&&tA.current.scrollTo({top:0,behavior:"smooth"});return}if(eU<2||eL<6){I.Am.error("Please upload all the required photos");return}try{let e=await fetch("".concat(i,"/insert-images-in-order-detail?order_id=").concat(t[1],"&old_imei=").concat(ta.oldIMEI).concat(ta.newIMEI.length>0?"&new_imei=".concat(ta.newIMEI):"","&staff_id=").concat(eT),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:tI},body:JSON.stringify(ey)});if(!e.ok)throw Error("Could not insert images in order detil");await e.json(),e7(3),ts(e=>({...e,phoneDetails:!0})),te(e=>({...e,indemnity:!0}))}catch(e){console.log(e.message),I.Am.error(e.message)}},tL=async()=>{try{let e=await fetch("".concat(i,"/get-all-journey?order_id=").concat(t[1]),{headers:{Authorization:tI}});if(!e.ok)throw Error("Failed to submit answer");if(e.ok){let t=await e.json();eS(t)}}catch(e){console.log(e)}},tG=e=>{let s=document.createElement("svg");k()(s,t[1],{format:"CODE128",width:1,height:20});let a=s.querySelector("text");a&&a.remove();let r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("style","font: 14px monospace"),r.setAttribute("text-anchor","middle"),r.setAttribute("x","44"),r.setAttribute("y",45),r.textContent="OID: ".concat(t[1]),s.appendChild(r);let n=s.outerHTML;return'\n      <div style="font-size: 10px; width: 25mm; height: 11mm; padding: 0; display: flex; align-items: center; justify-content: center; padding: 8px 0px 0px 0px; border:0.1px solid black; box-sizing:border-box">\n        '.concat(n,"\n      </div>\n    ")},tK=async e=>{if(to&&to.length>0&&""===th){tc("Executive Name is required"),I.Am.error("Executive name is required"),tA.current&&tA.current.scrollTo({top:0,behavior:"smooth"});return}if(tc(!1),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC"===tj.trimmedDataURL||""===tj.trimmedDataURL){I.Am.error("Empty Signature");return}try{tv(!0);let t=tV(),s={order_detail_id:ek,coupon_exchange:!eW,customer_id:ei,html_content:t};""!==th&&(s.executive_id=th);let a=await fetch("".concat(i,"/set-exchange-type"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:tI},body:JSON.stringify(s)});if(!a.ok)throw Error("Could not set exchange type");let r=await a.json();if("success"!==r.status)throw Error(r.message);e(),tJ(),setTimeout(()=>{eA(!0)},500)}catch(e){I.Am.error(e.message),console.log(e)}finally{tv(!1)}},tJ=()=>{s.e(8607).then(s.t.bind(s,68607,23)).then(e=>{(0,e.default)({printable:tG(eI.data),type:"raw-html",style:"\n            @page { \n              size: 25mm 14mm; \n              margin: 0; \n            } \n            body { \n              display: flex; \n              align-items: center; \n              justify-content: center; \n              height: 100%; \n            } \n          "})}).catch(e=>{console.error("Failed to load printJS:",e)})},tV=()=>'\n          <div style="font-size: 13px; line-height: 1.2; width: 100%; box-sizing: border-box; padding: 30px;">\n            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; align-items: start; width: 100%;">\n              <div>\n                <p style="font-size:18px; font-weight: bold;">Customer Purchase Receipt</p>\n                <p style="margin-top:10px">Date: '.concat((0,A.a)(new Date),'</p>\n                <p>Service Number: </p>\n                <p>Buyer: Unicorn </p>\n              </div>\n              <div style="text-align: right;">\n                <p style="font-size: 18px; font-weight: bold;">BuyBack</p>\n                <p style="font-size: 12px;">www.buyback.in</p>\n              </div>\n              <div class="seller-details" style="grid-column: span 2 / span 2; margin: 10px 0px 0px 0px; border: 1px solid #ddd; border-radius: 5px;">\n                <table style="width: 100%; border-collapse: collapse; margin: 16px">\n                  <tr>\n                    <td style="font-weight: bold; width: 100px;">Seller Details:</td>\n                    <td></td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Name:</td>\n                    <td style="padding: 5px 0;">').concat(e0.username+" "+e0.userLastName,'</td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Contact No.:</td>\n                    <td style="padding: 5px 0;">').concat(e0.userPhone,'</td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Email Id:</td>\n                    <td style="padding: 5px 0;">').concat(e0.userEmail,'</td>\n                  </tr>\n                </table>\n              </div>\n              <div style="grid-column: span 2 / span 2; margin: 10px 0px 0px 0px;">\n                <p style="font-weight: bold; font-size:16px;">INDEMNITY BOND</p>\n                <p style="margin: 8px 0px">This Bond of Indemnity is made and executed by: <strong>').concat(e0.username+" "+e0.userLastName,'</strong> Herein after referred to as "Seller" who has come in Retail store of <strong>UNICORN @ CITY</strong> to sell his/her old Gadget, to the Unicorn Network herein after referred to as "Purchaser" which expression shall mean and include its representative, executors, nominee, partness, affiliates and assigns on day of <strong>').concat((0,A.a)(new Date),'</strong></p>\n                <div style="display: flex; align-items: flex-end; flex-direction: column;margin: 10px 0px 0px 0px">\n                ').concat(tj.trimmedDataURL&&"<img\n                src=".concat(tj.trimmedDataURL,'\n                style="width: auto; height:40px;"\n                />'),"\n                <p><strong>").concat(e0.username+" "+e0.userLastName,"</strong> <br /> Seller Name</p>\n                </div>\n              </div>\n              \n            </div>\n          </div>\n        ").replace(/\n/g,""),tY=()=>{try{if("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC"===tj.trimmedDataURL||""===tj.trimmedDataURL)throw Error("Empty Signature");s.e(8607).then(s.t.bind(s,68607,23)).then(e=>{let t=e.default,s=tV();t({printable:s,type:"raw-html",honorMarginPadding:!0,style:"\n            @page {\n              size: A4;\n              margin: 0;\n              }\n              body {\n                    margin: 0px;\n                    }\n                    div {\n                    width: 100%;\n                  } \n                  .seller-details {\n                    margin-right: 40px;\n                    }\n                    "})}).catch(e=>{console.error("Failed to load printJS:",e)})}catch(e){I.Am.error(e.message)}},tQ=e=>{2===e&&e7(e),0===e?(V(""),Q(""),X(""),W(""),es(""),eJ(!1),eY(""),B(e=>({...e,tnc:0})),eu(0),tr({oldIMEI:"",newIMEI:""}),ee(""),ej([]),ez(0),eG(0),e$(!0)):1===e?(tr({oldIMEI:"",newIMEI:""}),ee(""),ej([]),ez(0),eG(0),e$(!0)):2===e&&e$(!0)},tZ=async e=>{try{let t=await fetch("".concat(i,"/get-executive-by-staff?staff_id=").concat(e),{headers:{Authorization:tI}});if(!t.ok)throw Error("Could not get executive list");let s=await t.json();if("success"!==s.status)throw Error(s.message);td(s.data)}catch(e){I.Am.error(e.message)}},tX=async()=>{try{let e=await fetch("".concat(i,"/get-customer-detail-order"));if(!e.ok)throw Error("Could not get sequence");let t=await e.json();if("success"!==t.status)throw Error(t.message);tb(t.before_order)}catch(e){I.Am.error(e.message)}},tH=()=>{localStorage.setItem("customer_id",ei),localStorage.setItem("order_id",t[1])},tW=()=>{ty.current&&(ty.current.clear(),tw({trimmedDataURL:""}))},t$=()=>{try{if(ty.current){if("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC"===ty.current.getTrimmedCanvas().toDataURL("image/png"))throw Error("Empty Signature");tw({trimmedDataURL:ty.current.getTrimmedCanvas().toDataURL("image/png")})}}catch(e){I.Am.error(e.message)}};return x?(0,a.jsxs)("div",{className:"text-center mt-40 bg-white",children:[(0,a.jsx)(c(),{children:(0,a.jsx)("title",{children:"BuyBack- Loading"})}),(0,a.jsx)(g.c,{color:"success"})]}):C?(0,a.jsxs)("div",{className:"w-screen h-screen flex justify-center  bg-white mt-40",children:[(0,a.jsx)(c(),{children:(0,a.jsx)("title",{children:"BuyBack - Error"})}),(0,a.jsxs)("p",{className:"text-red-500",children:["Error: ",C]})]}):o?(0,a.jsxs)("div",{className:"bg-white",children:[(0,a.jsx)(c(),{children:(0,a.jsxs)("title",{children:["BuyBack - Sell your old ",z.name]})}),(0,a.jsx)("div",{className:"min-h-screen mb-8 flex",children:(0,a.jsx)("div",{className:"w-screen justify-center px-4 flex",children:(0,a.jsxs)("div",{className:"max-w-screen-xl w-full grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col shadow-lg min-h-[300px] col-span-2 rounded-lg p-4 bg-white",children:[(0,a.jsxs)("div",{className:"w-full flex flex-col items-start mb-4",children:[(0,a.jsx)("p",{className:"text-xl font-semibold",children:"Tell us more about your device"}),(0,a.jsx)("p",{className:"text-gray-500 text-md font-semibold",children:"Please answer a few questions about your device."})]}),(0,a.jsx)("ol",{className:"space-y-8",children:D.map((e,t)=>(0,a.jsxs)("li",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold",children:[(0,a.jsxs)("span",{className:"me-2",children:[t+1,"."]}),eP&&eR.has(e.question_id)&&(0,a.jsx)("span",{className:"border-l-4 border-red-500 rounded-l ps-2"}),e.description,1===e.is_required&&(0,a.jsx)("span",{className:"text-red-500 align-super",children:"*"}),eP&&eR.has(e.question_id)&&(0,a.jsx)("span",{className:"text-red-500 text-sm align-super",children:"This is a required question"})]}),"binary"===e.question_type&&(0,a.jsx)("fieldset",{className:"mt-2 gap-x-1 grid grid-cols-2 md:grid-cols-2",children:e.options.map((t,s)=>(0,a.jsxs)("label",{id:"label-".concat(t.id),className:"bg-gray-100 ms-2 ps-4 mb-3 py-1 rounded custom-radio border cursor-pointer",onClick:()=>tT(e.question_id,t.id),children:[(0,a.jsx)("input",{type:"checkbox",name:"question-".concat(e.question_id),checked:O[e.question_id]===t.id,onChange:()=>tE(e.question_id,t.id),value:t.id,className:"hidden"}),(0,a.jsx)("span",{className:"radio-custom"}),(0,a.jsx)("span",{className:"ms-3 flex items-start justify-center flex-col w-full",children:t.option_value})]},t.id))}),"select"===e.question_type&&(0,a.jsx)("fieldset",{className:"mt-2 gap-x-1 grid grid-cols-1 md:grid-cols-2",children:e.options.map((t,s)=>(0,a.jsxs)("label",{id:"label-".concat(t.id),className:"bg-gray-100 ms-2 ps-4 mb-3  py-1 rounded custom-checkbox border cursor-pointer",onClick:()=>tT(e.question_id,t.id),children:[(0,a.jsx)(f.K,{color:"success",radius:"sm",isSelected:O[e.question_id]===t.id,onValueChange:()=>tE(e.question_id,t.id),onClick:()=>tT(e.question_id,t.id),className:"text-white"}),(0,a.jsxs)("span",{className:"ms-3 flex items-start justify-center flex-col w-full",children:[t.s3_image_url&&(0,a.jsx)(d(),{src:t.s3_image_url,width:100,height:100,alt:"Option image"}),t.option_value]})]},t.id))}),"multiselect"===e.question_type&&(0,a.jsx)("fieldset",{className:"mt-2 gap-x-1 grid grid-cols-1 md:grid-cols-2",children:e.options.map(t=>{var s;return(0,a.jsxs)("label",{id:"label-".concat(t.id),className:"bg-gray-100 ms-2 ps-4 mb-3  py-1 rounded custom-checkbox border cursor-pointer",onClick:()=>tT(e.question_id,t.id),children:[(0,a.jsx)(f.K,{color:"success",radius:"sm",isSelected:null===(s=O[e.question_id])||void 0===s?void 0:s.includes(t.id),onValueChange:()=>{let s=O[e.question_id]||[],a=s.includes(t.id)?s.filter(e=>e!==t.id):[...s,t.id];B(t=>({...t,[e.question_id]:a}))},onClick:()=>tT(e.question_id,t.id),className:"text-white"}),(0,a.jsxs)("span",{className:"ms-3 flex items-start justify-center flex-col w-full",children:[t.s3_image_url&&(0,a.jsx)(d(),{src:t.s3_image_url,width:100,height:100,alt:"Option image"}),t.option_value]})]},t.id)})})]},e.question_id))}),eP&&(0,a.jsx)("p",{className:"text-red-500 font-semibold mb-4",children:eP}),(0,a.jsx)(b.A,{className:"rounded px-4 py-1 mt-2 bg-accent text-white disabled:!bg-gray-300 disabled:hover:!bg-gray-300 disabled:text-black",onPress:tP,disabled:!eE,children:"Get exact value"})]}),(0,a.jsxs)("div",{className:"flex flex-col shadow-lg min-h-[300px] col-span-1 rounded-lg p-4 bg-white sticky top-20 max-h-[800px] overflow-y-scroll scrollbar-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d(),{src:(null==o?void 0:o.image_url)||"/refurbished.webp",height:75,width:75,alt:(null==o?void 0:o.name)||"Product Image"}),(0,a.jsx)("span",{className:" lg:ms-4 text-xl",children:z.name})]}),(0,a.jsx)("hr",{className:"my-4"}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-xl font-semibold",children:"Device Appraisal:"})}),(0,a.jsx)("div",{children:(0,a.jsx)(n,{journeyData:eI})})]})]})})}),(0,a.jsx)(y.R,{isOpen:e4,onOpenChange:e8,isDismissable:!1,isKeyboardDismissDisabled:!0,size:"3xl",radius:"sm",classNames:{base:"h-[99%] sm:h-[95%] md:h-auto max-h-none md:max-h-[calc(100%-8rem)]",body:"px-2 sm:px-4 md:px-6 pb-0 sm:pb-8"},scrollBehavior:"inside",onClose:tS,children:(0,a.jsx)(j.A,{children:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.k,{className:"flex flex-col gap-1",children:"Generate Order"}),(0,a.jsxs)(N.I,{ref:tA,children:[(0,a.jsx)(E.v,{activeStep:e6,className:"w-full py-4 mt-0 xl:sticky xl:-top-2 border shadow z-30 bg-white",connectorStyleConfig:{size:2,style:"dashed"},styleConfig:{activeBgColor:"#42c8b7",completedBgColor:"#319488"},children:tf?[{label:"Customer Verification",key:"verification",index:0},{label:"Confirm Price",key:"price",index:1},{label:"Phone Details",key:"phoneDetails",index:2},{label:"Indemnity Bond",key:"indemnity",index:3}].map((e,t)=>(0,a.jsx)(E.h,{onClick:()=>tQ(e.index),label:e.label,completed:tt[e.key],active:e9[e.key],disabled:e6<e.index,className:"ring-accent"},e.index)):[{label:"Confirm Price",key:"price",index:0},{label:"Customer Verification",key:"verification",index:1},{label:"Phone Details",key:"phoneDetails",index:2},{label:"Indemnity Bond",key:"indemnity",index:3}].map((e,t)=>(0,a.jsx)(E.h,{onClick:()=>tQ(e.index),label:e.label,completed:tt[e.key]&&!(e6<e.index),active:e9[e.key],disabled:e6<e.index},e.index))}),tp?(0,a.jsxs)("div",{className:"grid gap-y-4 border border-gray-300 p-4 mb-4",children:[(0,a.jsx)(v.X,{className:"h-7 w-72 sm:w-80 max-w-full mx-auto"}),(0,a.jsx)(v.X,{className:"h-7 w-32 mx-auto"}),(0,a.jsx)(v.X,{className:"h-5 w-48"})]}):(0,a.jsxs)(a.Fragment,{children:[(tf?1===e6:0===e6)&&(0,a.jsx)("div",{className:"w-full h-full md:h-fit bg-white pt-1 relative flex flex-col justify-between",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border border-gray-300 p-2 pb-4",children:[(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsxs)("span",{className:"text-xl font-bold accent",children:["Exact Value of ",z.name]})}),(0,a.jsx)("div",{className:"w-full flex flex-col justify-between ".concat(e2.has_cashback&&"yes"===O.exchange?" py-8":"py-3"),children:(0,a.jsx)("div",{className:"text-lg ",children:e2.has_cashback&&"yes"===O.exchange?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"flex justify-between w-full gap-x-4  text-base",children:[(0,a.jsx)("span",{children:"Actual Value:"}),(0,a.jsx)("span",{children:(0,A.fK)(G)})]}),(0,a.jsxs)("p",{className:"flex justify-between w-full gap-x-4 text-base",children:[(0,a.jsx)("span",{children:"Cashback: "}),(0,a.jsxs)("span",{children:["+"," ","yes"===O.exchange?(0,A.fK)(e2.cashback):(0,A.fK)(0)]})]}),(0,a.jsxs)("p",{className:"flex justify-between w-full gap-x-8 border-t border-gray-300 text-2xl mt-2",children:[(0,a.jsx)("span",{children:"Total Price: "}),(0,a.jsx)("span",{className:"font-bold accent",children:"yes"===O.exchange?(0,A.fK)(G+e2.cashback):(0,A.fK)(G)})]})]}):(0,a.jsx)("p",{className:"flex justify-center w-full gap-x-8 border-gray-300 text-2xl mt-2",children:(0,a.jsx)("span",{className:"font-bold",children:(0,A.fK)(G)})})})}),(0,a.jsx)("div",{className:"w-full flex flex-col items-center justify-end",children:(0,a.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"w-full grid gap-y-0.5 relative",children:[e2.has_cashback&&(0,a.jsxs)(f.K,{radius:"none",color:"success",classNames:{icon:"text-white",wrapper:"rounded"},isSelected:"yes"===O.exchange,onChange:()=>tE("exchange","yes"),isRequired:!0,children:["Apply for cashback",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(!e2.has_cashback||"yes"===O.exchange)&&(0,a.jsxs)(f.K,{radius:"none",color:"success",classNames:{icon:"text-white",wrapper:"rounded",base:"relative"},isSelected:"yes"===O.satisfied,onChange:()=>tE("satisfied","yes"),isRequired:!0,children:["The customer is satisfied with the price displayed",(0,a.jsx)("span",{className:"text-red-400",children:"*"}),!en&&(0,a.jsx)("span",{className:"block absolute text-red-500 -bottom-4 text-sm",children:"Please check above checkbox"})]}),"yes"!==O.satisfied&&(0,a.jsx)(T(),{onClick:tH,href:"/feedback",className:"underline text-blue-500 ms-8",children:"Customer Not Satisfied?"}),tf&&"yes"===O.satisfied&&(0,a.jsxs)("div",{className:"lg:col-span-2 grid grid-cols-1 lg:grid-cols-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(f.K,{radius:"none",color:"success",classNames:{icon:"text-white",wrapper:"rounded",base:"my-0.5"},isSelected:1===O.tnc,onChange:()=>{tE("tnc",1),1!==O.tnc?(tR(),eH(!0)):eH(!1)},isRequired:!0,children:(0,a.jsxs)("div",{children:["Accept"," ",(0,a.jsx)("a",{href:"http://",target:"_blank",rel:"noopener noreferrer",className:"inline accent",children:"Terms and Conditions"})]})})}),eX&&(0,a.jsxs)("span",{className:"} lg:col-span-2 grid grid-cols-1 lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"w-full lg:col-span-2 flex flex-col ",children:["OTP Again",(0,a.jsx)(u.Z,{value:eV,onChange:eY,numInputs:6,renderSeparator:(0,a.jsx)("span",{children:"\xa0"}),inputStyle:"border rounded px-1 !w-8 outline-none",inputType:"number",renderInput:e=>(0,a.jsx)("input",{...e})}),(0,a.jsx)("span",{className:"".concat(eQ?"visible":"invisible"," text-red-500 text-sm"),children:"Wrong OTP"})]}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(b.A,{className:"block ml-auto px-3 py-1 rounded bg-accent text-white lg:col-span-2 disabled:bg-gray-300 ",onPress:()=>{tO()},disabled:6!==eV.length,children:"Confirm OTP Again"})})]})]})]})})]}),!tf&&(0,a.jsx)("div",{className:"w-full mt-5 flex justify-end gap-x-2 mb-4",children:(0,a.jsxs)("div",{className:"flex gap-x-2",children:[(0,a.jsx)(b.A,{radius:"sm",color:"danger",variant:"light",onPress:()=>{e(),tS()},className:"rounded",children:"Cancel"}),(!e2.has_cashback||"yes"===O.exchange)&&(0,a.jsx)(b.A,{radius:"sm",color:"success",onPress:()=>{"yes"===O.satisfied?(e7(e=>e+1),ts(e=>({...e,price:!0})),te(e=>({...e,verification:!0}))):el(!1)},className:"text-white rounded",disabled:"yes"!==O.exchange,children:"Continue with verification"})]})})]})}),(tf?0===e6:1===e6)&&(0,a.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"w-full bg-white px-2 md:px-4 pb-4 pt-1 border border-gray-300 mb-4 relative grid grid-cols-1 md:grid-cols-2 z-20 lg:grid-rows-none md:gap-x-2 gap-y-2",children:[(0,a.jsx)("div",{className:"text-2xl accent mb-3 md:col-span-2 flex justify center",children:(0,a.jsx)("span",{className:"text-center w-full",children:"Customer Verification"})}),(0,a.jsxs)("div",{className:"w-full flex flex-col lg:px-2",children:[(0,a.jsxs)("span",{children:["First Name",(0,a.jsx)("span",{className:"text-red-500 ",children:"*"})]}),(0,a.jsx)("input",{type:"text",required:!0,className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded mt-0.5 lg:mt-0",spellCheck:!1,value:J,onChange:e=>V(e.target.value)})]}),(0,a.jsxs)("div",{className:"w-full flex flex-col lg:px-2",children:[(0,a.jsxs)("span",{children:["Last Name",(0,a.jsx)("span",{className:"text-red-500 ",children:"*"})]}),(0,a.jsx)("input",{type:"text",required:!0,className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded mt-0.5 lg:mt-0",spellCheck:!1,value:Y,onChange:e=>Q(e.target.value)})]}),(0,a.jsxs)("div",{className:" w-full flex flex-col lg:px-2",children:[(0,a.jsxs)("span",{children:["Email",(0,a.jsx)("span",{className:"text-red-500 ",children:"*"})]}),(0,a.jsx)("input",{type:"email",required:!0,className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded mt-0.5 lg:mt-0",spellCheck:!1,value:Z,onChange:e=>X(e.target.value)}),(0,a.jsx)("p",{className:"".concat(ew.length>0?"visible":"invisible"," block text-red-500 text-sm lg:text-md"),children:ew})]}),(0,a.jsxs)("div",{className:"w-full flex flex-col lg:px-2 ",children:[(0,a.jsxs)("span",{children:["Phone",(0,a.jsx)("span",{className:"text-red-500 ",children:"*"})]}),(0,a.jsx)("input",{required:!0,type:"tel",maxLength:10,className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded mt-0.5 lg:mt-0",spellCheck:!1,value:H,onChange:e=>W(e.target.value),onKeyDown:e=>{("ArrowUp"===e.key||"ArrowDown"===e.key)&&e.preventDefault()}})]}),!eK&&(0,a.jsxs)("div",{className:"md:col-span-2 grid grid-cols-1 lg:grid-cols-2",children:[(0,a.jsx)("span",{className:"w-full md:col-span-2",children:(0,a.jsxs)("div",{className:"block w-fit ml-auto",children:[(0,a.jsx)(b.A,{variant:"light",className:"text-xs accent  disabled:text-gray-400 rounded",disabled:eh||ep||10!==H.length||J.length<3||Z.length<5,onPress:()=>{(!eh||ep)&&(tD(),eu(60),ex(!0))},children:eh?"Resend OTP (".concat(Math.floor(em/60),":").concat(em%60,")"):"Resend OTP"}),(0,a.jsx)(b.A,{className:"px-3 ms-4 rounded bg-accent text-white disabled:!bg-gray-400 disabled:!hover:bg-gray-300 ring-accent",disabled:10!==H.length||J.length<3||Z.length<5||!ep,onPress:()=>{tD()},children:"Send OTP"})]})}),ea&&(0,a.jsxs)("div",{className:"w-full md:col-span-2 mt-2",children:["OTP",(0,a.jsx)(u.Z,{value:et,onChange:es,numInputs:6,renderSeparator:(0,a.jsx)("span",{children:"\xa0"}),inputStyle:"border rounded px-1 !w-8 outline-none",inputType:"number",renderInput:e=>(0,a.jsx)("input",{...e})}),(0,a.jsx)("span",{className:"".concat(eo?"visible":"invisible"," text-red-500 text-sm"),children:"Incorrect OTP"})]}),(0,a.jsx)("span",{className:" md:col-span-2 ",children:ea&&(0,a.jsx)(b.A,{className:"px-3 py-1 rounded bg-accent  text-white md:col-span-2 disabled:bg-gray-300 block ml-auto",onPress:()=>{tq()},disabled:6!==et.length,children:"Confirm OTP"})})]}),!tf&&eK&&(0,a.jsxs)("div",{className:"md:col-span-2 grid grid-cols-1 lg:grid-cols-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(f.K,{radius:"none",color:"success",classNames:{icon:"text-white",wrapper:"rounded",base:"my-0.5"},isSelected:1===O.tnc,onChange:()=>{tE("tnc",1),1!==O.tnc?(tR(),eH(!0)):eH(!1)},isRequired:!0,children:(0,a.jsxs)("div",{children:["Accept"," ",(0,a.jsx)("a",{href:"http://",target:"_blank",rel:"noopener noreferrer",className:"inline accent",children:"Terms and Conditions"})]})})}),eX&&(0,a.jsxs)("span",{className:"} md:col-span-2 grid grid-cols-1 lg:grid-cols-2",children:[(0,a.jsxs)("span",{className:"w-full md:col-span-2 flex flex-col ",children:["OTP Again",(0,a.jsx)(u.Z,{value:eV,onChange:eY,numInputs:6,renderSeparator:(0,a.jsx)("span",{children:"\xa0"}),inputStyle:"border rounded px-1 !w-8 outline-none",inputType:"number",renderInput:e=>(0,a.jsx)("input",{...e})}),(0,a.jsx)("span",{className:"".concat(eQ?"visible":"invisible"," text-red-500 text-sm"),children:"Wrong OTP"})]}),(0,a.jsx)("span",{className:"md:col-span-2",children:(0,a.jsx)(b.A,{className:"block ml-auto px-3 py-1 rounded bg-accent text-white md:col-span-2 disabled:bg-gray-300 ",onPress:()=>{tO()},disabled:6!==eV.length,children:"Confirm OTP Again"})})]})]})]}),2===e6&&(0,a.jsxs)("div",{className:"w-full bg-white px-2 md:px-4 pb-4 pt-1 relative flex flex-col items-start justify-start border",children:[(0,a.jsx)("span",{className:"text-2xl accent mb-3",children:"Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-2 gap-y-2 w-full",children:[(0,a.jsx)("div",{className:"relative flex gap-x-3 items-center lg:col-span-2 mb-2",children:(0,a.jsx)(f.K,{radius:"none",color:"success",classNames:{icon:"text-white",wrapper:"rounded"},isSelected:eW,onValueChange:e$,children:"Do you wish to exchange your device for another device?"})}),(0,a.jsxs)("div",{className:"w-full flex flex-col relative ",children:[(0,a.jsxs)("span",{children:["Old IMEI",(0,a.jsx)("span",{className:"text-red-500 text-sm",children:"*"})]}),(0,a.jsx)("input",{type:"number",name:"oldIMEI",value:ta.oldIMEI,onChange:e=>tF(e),className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded ".concat(tn.oldIMEI?"border-red-300":""),maxLength:15}),tn.oldIMEI&&(0,a.jsx)("span",{className:"text-red-500 relative top-0.5 text-xs",children:tn.oldIMEI})]}),(0,a.jsxs)("div",{className:"w-full flex relative gap-x-1",children:[(0,a.jsxs)("div",{className:"w-full flex flex-col",children:[(0,a.jsxs)("span",{children:["New IMEI",eW&&(0,a.jsx)("span",{className:"text-red-500 text-sm",children:"*"})]}),(0,a.jsx)("input",{type:"number",name:"newIMEI",value:ta.newIMEI,onChange:e=>tF(e),className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded ".concat(tn.newIMEI?"border-red-300":""),maxLength:15}),tn.newIMEI&&(0,a.jsx)("span",{className:"text-red-500 relative top-0.5 text-xs",children:tn.newIMEI})]}),(0,a.jsx)(R,{setImeiFormData:tr,setErrors:tl,errors:tn})]})]}),(0,a.jsxs)("div",{className:"w-full flex flex-col h-fit items-center sm:border border-gray-300 py-2 mt-2",children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:"User Documents"}),(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 w-full sm:px-2 items-center sm:mt-2 h-full gap-x-1",children:[(0,a.jsxs)("div",{className:"h-full w-full flex flex-col ",children:[(0,a.jsxs)("div",{className:"text-center",children:["Front Aadhar",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("span",{className:"h-40 w-full border-2 border-dashed border-gray-400 overflow-hidden",children:(0,a.jsx)(l.Z,{maxNumber:1,folderName:ef,s3imageUrlArray:ey,setS3imageUrlArray:ej,tag:"front_aadhar",imageName:eO,setImageName:eB,setAadharCount:ez,aadharCount:eU})})]}),(0,a.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,a.jsxs)("span",{className:"text-center",children:["Back Aadhar",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("span",{className:"h-40 w-full border-2 border-dashed border-gray-400 overflow-hidden",children:(0,a.jsx)(l.Z,{maxNumber:1,folderName:ef,s3imageUrlArray:ey,setS3imageUrlArray:ej,tag:"back_aadhar",imageName:eO,setImageName:eB,setAadharCount:ez,aadharCount:eU})})]})]})})]}),(0,a.jsxs)("div",{className:"w-full flex flex-col items-center sm:border border-gray-300 py-2 mt-2",children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Invoice"}),(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 w-full sm:px-2 items-center sm:mt-2 h-full space-x-1",children:[(0,a.jsxs)("div",{className:"h-full w-full flex flex-col ",children:[(0,a.jsx)("div",{className:"text-center",children:"Invoice Front"}),(0,a.jsx)("span",{className:"h-40 max-h-[150px] w-full border-2 border-dashed border-gray-400 overflow-hidden",children:(0,a.jsx)(l.Z,{maxNumber:1,folderName:ef,s3imageUrlArray:ey,setS3imageUrlArray:ej,tag:"front_invoice",imageName:eO,setImageName:eB})})]}),(0,a.jsxs)("span",{className:"h-full w-full flex flex-col",children:[(0,a.jsx)("span",{className:"text-center",children:"Invoice Back"}),(0,a.jsx)("span",{className:"h-40 max-h-[150px] w-full border-2 border-dashed border-gray-400 overflow-hidden",children:(0,a.jsx)(l.Z,{maxNumber:1,folderName:ef,s3imageUrlArray:ey,setS3imageUrlArray:ej,tag:"back_invoice",imageName:eO,setImageName:eB})})]})]})})]}),(0,a.jsxs)("div",{className:"w-full flex flex-col items-center sm:border border-gray-300 pt-2 pb-5 sm:px-2 mt-2",children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Photos of Mobile"}),(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsx)("span",{className:"grid grid-cols-2 md:grid-cols-3 w-full sm:mt-2 h-full gap-x-1 gap-y-1",children:["Top","Bottom","Left","Right","Front","Back"].map(e=>(0,a.jsxs)("span",{className:"flex flex-col ",children:[(0,a.jsxs)("span",{className:"text-center",children:[e,(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("span",{className:"h-40 w-full border-2 border-dashed border-gray-400 overflow-hidden",children:(0,a.jsx)(l.Z,{maxNumber:1,folderName:ef,s3imageUrlArray:ey,setS3imageUrlArray:ej,tag:e,imageName:eO,setImageName:eB,phoneCount:eL,setPhoneCount:eG})})]},e))})})]}),(0,a.jsx)("div",{className:"w-full flex justify-end items-center",children:(0,a.jsx)(b.A,{className:"bg-accent py-1 px-3 rounded text-white mt-3 disabled:bg-gray-400 disabled:hover:bg-gray-400",onPress:tz,children:"Submit"})})]}),3===e6&&(0,a.jsxs)("div",{className:"w-full bg-white px-4 pb-4 pt-1 border border-gray-300 relative flex flex-col items-start justify-start",children:[(0,a.jsx)("span",{className:"text-2xl accent mb-3",children:"Indemnity Bond"}),(0,a.jsxs)("div",{className:"grid gap-x-4 gap-y-2 w-full",children:[(0,a.jsxs)("div",{className:"w-full flex flex-col relative",children:[(0,a.jsxs)("span",{children:["Executive:"," ","true"===tm&&to&&to.length>0&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),"false"===tm&&(0,a.jsx)("input",{value:$,className:"py-1 ps-3 pe-8 outline-none border rounded bg-gray-100 capitalize",onChange:()=>null}),"true"===tm&&to&&to.length>0?(0,a.jsxs)("select",{name:"execName",id:"execName",className:"py-1 ps-3 pe-8 ring-accent border rounded ".concat(ti?"border-red-300":""),value:th,onChange:e=>{tx(e.target.value),tc("")},children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select an executive"}),to.map((e,t)=>(0,a.jsx)("option",{value:null==e?void 0:e.executive_id,className:"capitalize",children:null==e?void 0:e.name},t))]}):(0,a.jsx)("input",{value:localStorage.getItem("name"),className:"py-1 ps-3 pe-8 outline-none border rounded bg-gray-100 capitalize",onChange:()=>null,disabled:!0}),ti&&(0,a.jsx)("span",{className:"text-red-500 relative top-0.5 text-xs",children:ti})]}),(0,a.jsx)(S,{buyerData:e0,sign:tj,generateContent:tV,printReceipt:tY}),(0,a.jsx)("p",{className:"text-lg mt-2",children:"Please Add Your Signature"}),(0,a.jsx)(P(),{ref:ty,canvasProps:{className:"sigCanvas border border-2 border-gray-300 border-dashed w-full h-40"}}),(0,a.jsxs)("div",{className:"relative space-x-2 mt-2",children:[(0,a.jsx)(b.A,{color:"danger",variant:"light",className:"px-6 py-2 rounded ring-custom !ring-red-400",onPress:tW,children:"Reset"}),(0,a.jsx)(b.A,{color:"primary",className:"px-6 py-2 text-white rounded ring-custom !ring-blue-400",onPress:t$,children:"Crop Signature"})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(b.A,{isLoading:tN,className:"ms-auto rounded bg-accent text-white ring-accent flex items-center",onPress:()=>tK(e),children:"Submit"})})]})]})]})]})]})})}),ev&&(0,a.jsx)("div",{className:"flex w-screen h-screen fixed top-0 right-0 z-50 overflow-hidden backdrop-blur-sm justify-center items-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"w-full md:w-[500px] h-auto bg-white px-6 md:px-10 py-10 rounded-lg relative shadow-xl flex flex-col items-center justify-center animate-fade-in",children:[(0,a.jsx)("span",{className:"absolute top-4 right-4 text-red-500 cursor-pointer ",onClick:()=>{e.push("/")},children:(0,a.jsx)("i",{className:"bi bi-x-lg text-2xl"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("i",{className:"bi bi-check-circle text-green-500 text-5xl mb-4"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-800",children:"Order Created Successfully"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2 text-center",children:"Your order has been created successfully."})]})]})})]}):(0,a.jsxs)("div",{className:"w-screen min-h-screen flex justify-center items-center",children:[(0,a.jsx)(c(),{children:(0,a.jsx)("title",{children:"BuyBack - Error"})}),(0,a.jsx)("p",{children:"No product data available"})]})}}},function(e){e.O(0,[4838,7847,5443,7242,8278,9975,5798,5422,8877,7414,2888,9774,179],function(){return e(e.s=10597)}),_N_E=e.O()}]);