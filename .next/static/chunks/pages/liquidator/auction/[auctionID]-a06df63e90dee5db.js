(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{3511:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/liquidator/auction/[auctionID]",function(){return t(6795)}])},4133:function(e,s,t){"use strict";var a=t(5893);t(7294);var r=t(4039);s.Z=e=>{let{header:s,...t}=e;return(0,a.jsx)(r.Q,{...t,header:e=>{let{state:{isEnter:t}}=e;return(0,a.jsxs)(a.Fragment,{children:[s,(0,a.jsx)("i",{className:"bi bi-chevron-down ml-auto transition-transform duration-200 ease-out flex items-center ".concat(t&&"rotate-180")})]})},className:"border-b",buttonProps:{className:e=>{let{isEnter:s}=e;return"flex items-center w-full p-4 text-left hover:bg-[#42c8b725] ".concat(s&&"bg-[#42c8b725]")}},contentProps:{className:"transition-height duration-200 ease-out"},panelProps:{className:"p-4"}})}},91:function(e,s,t){"use strict";var a=t(5893),r=t(7294);s.Z=e=>{let{closingTime:s,withColon:t}=e,[n,i]=(0,r.useState)(l(s));function l(e){let s=new Date,t=new Date(e)-s;if(t<=0)return{days:0,hours:0,minutes:0,seconds:0};let a=Math.floor(t/1e3%60).toString().padStart(2,"0"),r=Math.floor(t/6e4%60).toString().padStart(2,"0"),n=Math.floor(t/36e5%24).toString().padStart(2,"0");return{days:Math.floor(t/864e5).toString().padStart(2,"0"),hours:n,minutes:r,seconds:a}}return((0,r.useEffect)(()=>{let e=setInterval(()=>{i(l(s))},1e3);return()=>clearInterval(e)},[s]),0===n.hours&&0===n.minutes&&0===n.minutes&&0===n.seconds)?(0,a.jsx)("span",{children:"Auction Ended"}):!0===t?(0,a.jsxs)("span",{className:"grid grid-cols-4 justify-center gap-y-2 w-96",children:[(0,a.jsxs)("span",{className:"text-center",children:[n.days+":"," "]}),(0,a.jsxs)("span",{className:"text-center",children:[n.hours+":"," "]}),(0,a.jsxs)("span",{className:"text-center",children:[n.minutes+":"," "]}),(0,a.jsx)("span",{className:"text-center",children:n.seconds}),(0,a.jsx)("span",{className:"text-sm text-center text-gray-400",children:"Days"}),(0,a.jsx)("span",{className:"text-sm text-center text-gray-400",children:"Hours"}),(0,a.jsx)("span",{className:"text-sm text-center text-gray-400",children:"Minutes"}),(0,a.jsx)("span",{className:"text-sm text-center text-gray-400",children:"Seconds"})]}):(0,a.jsxs)("span",{children:[n.days>0?n.days+"d":""," ",n.days>0||n.hours>0?n.hours+"h":""," ",n.hours>0||n.minutes>0?n.minutes+"m":""," ",n.minutes>0||n.seconds>0?n.seconds+"s":""]})}},6795:function(e,s,t){"use strict";t.r(s);var a=t(5893),r=t(91),n=t(5612),i=t(5675),l=t.n(i),c=t(1163),o=t(7294),d=t(373),m=t(9134),x=t(2261),u=t(8918);t(889),t(1306);var h=t(6656),g=t(1664),p=t.n(g),f=t(5066),j=t(9008),b=t.n(j),y=t(4133);s.default=()=>{let e="https://buybackservice.unicornstore.in",{auctionID:s}=(0,c.useRouter)().query,[t,i]=(0,o.useState)(""),[g,j]=(0,o.useState)(""),[N,w]=(0,o.useState)({}),[v,_]=(0,o.useState)(!1),[S,k]=(0,o.useState)(!1),[A,I]=(0,o.useState)("None"),[C,B]=(0,o.useState)(),{balance:E,setBalance:P}=(0,h.K)(),[T,q]=(0,o.useState)([]),[D,M]=(0,o.useState)(!1),L=async()=>{try{k(!0);let t=new EventSource("".concat(e,"/stream-auction/").concat(s));t.onmessage=e=>{let s=e.data.trim();console.log("Raw event data:",s);try{let e=JSON.parse(s);console.log(e),e&&"success"===e.auction_data.status&&(i(e.auction_data.data),B(e.auction_data.wager_found),q(e.wagers_data.data))}catch(e){console.error("Error parsing event data: ",e),m.Am.error(e.message,{toastId:"errorParsingEventData"})}},t.onerror=e=>{console.error("EventSource failed: ",e),m.Am.warn("Failed to get auction updates.",{toastId:"errorMessage"})}}catch(e){console.log(e),m.Am.warn(e.message,{toastId:"errorMessage"})}finally{k(!1)}},F=async()=>{let t=localStorage.getItem("liquidator_id");try{var a;let r=await fetch("".concat(e,"/get-liquidators-highest-bid?liquidator_id=").concat(t,"&auction_id=").concat(s));if(!r.ok)throw Error("Could not get users bids");let n=await r.json();"info"===n.status?I("None"):I(null==n?void 0:null===(a=n.data)||void 0===a?void 0:a.wager_amount)}catch(e){}},Z=async()=>{};if((0,o.useEffect)(()=>{s&&(L(),F(),Z())},[s]),!t)return(0,a.jsx)("div",{className:"h-screen flex justify-center mt-40",children:(0,a.jsx)(d.Z,{color:"#42c8b7",loading:S,size:40,"aria-label":"Loading Spinner","data-testid":"loader"})});let K=async()=>{if(1!==N[1]){_(!0),m.Am.warn("Please select the checkbox",{toastId:"warnAboutCheckbox"});return}_(!1),"false"===localStorage.getItem("completed_registration")&&(m.Am.error("Complete your registration before placing bids",{toastId:"error1"}),console.log("completed_registration = false")),M(!0);try{let t=localStorage.getItem("liquidator_id"),a=await fetch("".concat(e,"/create-wager"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({auction_id:s,liquidator_id:t,wager_amount:g})});if(!a.ok)throw Error("Could not create wager");let r=await a.json();"success"===r.status?(m.Am.success("Bid placed successfully",{toastId:"successBid"}),L(),F(),Z(),P(r.remaining_balance)):"info"===r.status?m.Am.info(r.message,{toastId:"lessAmountInfo"}):"error"===r.status&&m.Am.error(r.message,{toastId:"error"})}catch(e){console.log(e.message)}M(!1)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(b(),{children:(0,a.jsxs)("title",{children:["BuyBack- Auction - ",s]})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-6 p-6",children:[(0,a.jsxs)("div",{className:"col-span-2 p-6 bg-white shadow-lg rounded-lg",children:[(0,a.jsx)(n.U,{className:"bg-white shadow-lg rounded-lg",transition:!0,transitionTimeout:250,children:(0,a.jsx)(y.Z,{header:(0,a.jsx)("div",{className:"flex justify-between items-center text-xl font-semibold text-gray-800 cursor-pointer",children:(0,a.jsx)("span",{children:t.auction_name+" Images"})}),children:(0,a.jsx)("div",{className:"w-full flex justify-center p-6",children:(0,a.jsx)(x.tq,{modules:[u.W_],spaceBetween:50,slidesPerView:1,navigation:!0,children:t.images.length>0?t.images.map((e,s)=>(0,a.jsx)(x.o5,{children:(0,a.jsx)("div",{className:"w-full flex justify-center p-6",children:(0,a.jsx)(l(),{className:"rounded-lg max-h-96 object-cover",src:e.s3_image_url,width:420,height:260,alt:"dummy image"})})},s)):(0,a.jsx)(x.o5,{children:(0,a.jsx)("div",{className:"w-full flex justify-center p-6",children:(0,a.jsx)(l(),{className:"rounded-lg max-h-40 object-contain",src:"/default.webp",width:420,height:260,alt:"dummy image"})})})})})})}),(0,a.jsxs)("div",{className:"mt-6 px-6",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-accent",children:t.auction_name}),(0,a.jsxs)("p",{className:"mt-4 text-gray-700",children:[(0,a.jsx)("span",{className:"underline text-lg font-medium",children:"Description:"})," ","Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam, iure. Commodi quas nemo ducimus aut dolor soluta optio iusto ipsum aliquam nesciunt enim, iure officia."]})]}),(0,a.jsxs)("div",{className:"mt-6 px-6 py-4 rounded-lg bg-gray-100",children:[(0,a.jsxs)("div",{className:"border-b-2 border-gray-200 pb-4 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Time Left:"}),(0,a.jsx)("span",{className:"ml-10 text-4xl font-light text-gray-800",children:(0,a.jsx)(r.Z,{closingTime:t.closing_time,withColon:!0})})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-4 ml-24",children:["Ending at"," ",new Date(t.closing_time).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})]})]}),(0,a.jsx)("div",{className:"pt-4 flex flex-col",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Current Bid:"}),(0,a.jsx)("span",{className:"ml-10 text-3xl font-light text-gray-800",children:(0,f.fK)(t.current_price)})]}),(0,a.jsxs)("p",{className:"mt-2 text-gray-600 capitalize",children:["from: ",t.liquidator_name]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Starting Bid:"}),(0,a.jsxs)("span",{className:"ml-10 text-3xl font-light text-gray-800",children:["₹",t.starting_price]})]})})}),(0,a.jsx)("div",{className:"relative py-4 grid grid-cols-3 gap-4 mt-6",children:E>0&&"closed"!==t.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"bg-white rounded-lg px-4 py-3 border border-[#42c8b7] focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-[#42c8b7] col-span-2 relative",children:[(0,a.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:"₹"}),(0,a.jsx)("input",{className:"outline-none px-6 w-full text-xl",type:"number",name:"bidValue",value:g,onChange:e=>{j(e.target.value)},onKeyDown:e=>{("ArrowUp"===e.key||"ArrowDown"===e.key)&&e.preventDefault()},autoComplete:"false"})]}),(0,a.jsx)("button",{className:"bg-accent text-white rounded-lg py-3 hover:bg-accent-dark transition-all",onClick:K,children:D?(0,a.jsx)("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent  rounded-full animate-spin"}):"Place Bid"}),(0,a.jsx)("span",{className:"col-span-3 ".concat(v?"visible":"invisible"," text-sm text-red-500 mt-2"),children:"Please select the checkbox"}),(0,a.jsxs)("span",{className:"col-span-3 text-sm mt-4",children:["Learn more about how bidding works in our"," ",(0,a.jsx)("a",{className:"accent hover:underline",href:"/sample.pdf",target:"_blank",children:"auction bidding guide"}),"."]}),(0,a.jsxs)("label",{id:"label-agreetoTNC",className:"col-span-3 bg-gray-100 p-3 rounded-lg mt-4 flex items-start cursor-pointer custom-checkbox",children:[(0,a.jsx)("input",{type:"checkbox",name:"agreetoTNC",checked:1===N[1],onChange:()=>{w(e=>{let s={...e};return 1===s[1]?delete s[1]:s[1]=1,s})},className:"hidden"}),(0,a.jsx)("span",{className:"checkmark",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"check-icon",children:(0,a.jsx)("path",{d:"M9 19l-7-7 1.41-1.41L9 16.17l14.59-14.59L24 3l-15 15z",fill:"white"})})}),(0,a.jsxs)("span",{className:"ml-4 flex flex-col",children:["I agree to pay if I win this auction",(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Additional condition"})]})]})]}):"closed"===t.status?(0,a.jsxs)("p",{className:"text-red-600 bg-red-100 border border-red-300 rounded-lg px-4 py-3 mt-4 col-span-3",children:[(0,a.jsx)("i",{className:"bi bi-exclamation-circle-fill text-xl me-2"}),"Auction Has ended, please visit home page to view more auctions."]}):(0,a.jsxs)("p",{className:"text-red-600 bg-red-100 border border-red-300 rounded-lg px-4 py-3 mt-4 col-span-3",children:[(0,a.jsx)("i",{className:"bi bi-exclamation-circle-fill text-xl me-2"}),"Your balance is insufficient. Please recharge your"," ",(0,a.jsxs)(p(),{className:"underline",href:"/liquidator/profile/wallet",children:[" ","wallet"]})," ","to place more bids."]})})]})]}),(0,a.jsxs)("div",{className:"sticky top-28 h-fit flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"p-6 bg-white shadow-lg rounded-lg h-fit",children:[(0,a.jsxs)("div",{className:"text-xl font-semibold text-gray-800 flex items-center space-x-2",children:[(0,a.jsx)("i",{className:"bi bi-clock"}),(0,a.jsx)("span",{children:"Timed Auction"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 w-full gap-x-2 mt-4",children:[(0,a.jsx)("span",{className:"col-span-1 text-center font-medium text-gray-600",children:"Auction ends:"}),(0,a.jsx)("span",{className:"col-span-2 text-center font-semibold text-gray-800",children:new Date(t.closing_time).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})})]}),(0,a.jsx)("div",{className:"w-full mt-6",children:(0,a.jsx)(n.U,{className:"bg-white shadow-lg rounded-lg",transition:!0,transitionTimeout:250,children:(0,a.jsxs)(y.Z,{header:(0,a.jsx)("span",{className:"text-gray-800 font-medium",children:"Additional Fees"}),children:[(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Fees apply to the hammer price:"}),(0,a.jsx)("p",{className:"font-semibold my-2 text-gray-800",children:"Free Registration"}),(0,a.jsx)("p",{className:"text-gray-600",children:"27.6% inc VAT*"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-6",children:"*These fees include buyers premiums and internet surcharges."}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Please see the auctioneers & conditions for more information"})]})})})]}),(0,a.jsxs)("div",{className:"p-6 bg-white shadow-lg rounded-lg h-fit grid grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Time Left:"}),(0,a.jsx)("p",{children:"My Max Bid:"}),(0,a.jsx)("p",{children:"Bids:"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:(0,a.jsx)(r.Z,{closingTime:t.closing_time})}),(0,a.jsx)("p",{children:(0,f.fK)(A)}),(0,a.jsx)("p",{children:(null==t?void 0:t.wager_count)?null==t?void 0:t.wager_count:0})]})]}),(0,a.jsxs)("div",{className:"p-6 bg-white shadow-lg rounded-lg grid grid-cols-2 h-fit max-h-[600px] overflow-y-scroll scrollbar-hidden",children:[(0,a.jsxs)("div",{className:"text-xl font-semibold text-gray-800 flex items-center space-x-2 col-span-2 mb-5 ",children:[(0,a.jsx)("i",{className:"bi bi-cash"}),(0,a.jsx)("span",{children:"Bids Placed:"})]}),T.length>0?(0,a.jsxs)("table",{className:"col-span-2 w-full text-center border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-200 border-b border-gray-300",children:[(0,a.jsx)("th",{className:"py-2 px-4 text-gray-700",children:"User"}),(0,a.jsx)("th",{className:"py-2 px-4 text-gray-700",children:"Bid Amount"})]})}),(0,a.jsx)("tbody",{children:T.map((e,s)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-300",children:e.liquidator_name}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-300",children:(0,f.fK)(e.wager_amount)})]},s))})]}):(0,a.jsx)("div",{className:"flex justify-center items-center bg-[#f5f5f5] border border-[#42c8b7] text-[#42c8b7] rounded-lg py-4 px-6 mt-4 col-span-2",children:(0,a.jsx)("p",{className:"font-semibold text-lg",children:"No Bids to Show!"})})]})]})]})]})}}},function(e){e.O(0,[735,888,774,179],function(){return e(e.s=3511)}),_N_E=e.O()}]);