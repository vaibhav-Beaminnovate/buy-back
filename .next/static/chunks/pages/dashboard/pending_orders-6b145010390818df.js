(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2842],{83454:function(e,t,n){"use strict";var a,r;e.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(77663)},20779:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/pending_orders",function(){return n(99133)}])},12115:function(e,t,n){"use strict";var a=n(85893);n(67294),t.Z=e=>{let{itemsPerPage:t,setItemsPerPage:n,currentPage:r,setCurrentPage:s,totalEntries:i,totalPages:o}=e;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("label",{htmlFor:"items",className:"text-sm",children:"Items per page:"}),(0,a.jsx)("select",{id:"items",className:"border border-gray-300 rounded-md py-1 px-2 ring-accent",value:t,onChange:e=>{n(parseInt(e.target.value,10)),s(1)},children:[15,20,25,30,35].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-3 md:mt-0",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:[t*r-t+1," to"," ",t*r<i?t*r:i," ","of ",i]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>s(1),disabled:1===r,className:"p-2 rounded-full ring-accent ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>s(e=>e>1?e-1:e),disabled:1===r,className:"p-2 rounded-full ring-accent ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>s(e=>e<o?e+1:e),disabled:r===o,className:"p-2 rounded-full ring-accent ".concat(r<o?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-right text-lg"})}),(0,a.jsx)("button",{onClick:()=>s(o),disabled:r===o,className:"p-2 rounded-full ring-accent ".concat(r<o?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-right text-lg"})})]})]})]})}},4625:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(67294);function r(e,t){let[n,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let n=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(n)}},[e]),n}},99133:function(e,t,n){"use strict";n.r(t);var a=n(85893),r=n(67294),s=n(4625),i=n(12115),o=n(67957),c=n(8455),l=n(49621),d=n(14930),u=n(4483),m=n(10405),h=n(44265),x=n(87740),p=n(86597),f=n(96476),b=n(32553),g=n(9008),v=n.n(g),j=n(39840);t.default=()=>{var e;let[t,n]=(0,r.useState)(""),[g,N]=(0,r.useState)([]),[y,w]=(0,r.useState)(15),[k,_]=(0,r.useState)(1),[C,S]=(0,r.useState)(1),[P,A]=(0,r.useState)(!0),[T,D]=(0,r.useState)(""),[E,F]=(0,r.useState)(""),[O,q]=(0,r.useState)(""),[I,L]=(0,r.useState)(""),[B,R]=(0,r.useState)({key:"",direction:"descending"}),[z,Q]=(0,r.useState)([]),[X,U]=(0,r.useState)({startDate:"",endDate:""}),[Z,K]=(0,r.useState)([]),[M,W]=(0,r.useState)({qna:"",feedback:[]}),{isOpen:G,onOpen:V,onClose:H}=(0,o.q)(),{isOpen:J,onOpen:Y,onClose:$}=(0,o.q)(),ee=(0,b.dQ)(),et=e=>{let{name:t,value:n}=e.target;"location"===t&&shipmentID||U(e=>({...e,[t]:n}))},en=async()=>{A(!0);try{let e=B.key,n="descending"===B.direction,a=await fetch("".concat("https://buybackservice.unicornstore.in","/get-order-details-by-staff?staff_id=").concat(t,"&per_page=").concat(y,"&page=").concat(C,"&search=").concat(O,"&sort_by=").concat(e,"&sort_desc=").concat(n,"&from_date=").concat(X.startDate,"&to_date=").concat(X.endDate,"&status=Pending"),{headers:{Authorization:ee}});if(!a.ok)throw Error("Could not get order details by staff id");let r=await a.json();0===r.data.length?L("No entries found, please refine your search query"):L(""),N(r.data.length>0?r.data:[]),_(Math.ceil(r.total_count/y)),F(r.total_count),D("")}catch(e){console.log(e),D(e)}finally{setTimeout(()=>{A(!1)},300)}},ea=e=>{let t="ascending";B.key===e&&"ascending"===B.direction&&(t="descending"),R({key:e,direction:t}),S(1)};(0,r.useEffect)(()=>{n(localStorage.getItem("staff_id")),t&&en()},[t,y,C,B]);let er=(0,s.Z)(O,500);(0,r.useEffect)(()=>{""!==er&&(S(1),en())},[er,O]);let es=e=>(0,a.jsx)("i",{className:"fas fa-arrow-down inline-block my-auto text-xs text-gray-600 pt-0.5 ".concat("ascending"===B.direction?"rotate-180":""," transition-all ").concat(B.key!==e?"hidden":"")}),ei=async()=>{(0,j.u)("generate-orders-excel/?staff_id=".concat(t,"&show_pending=true"),{},"Pending Orders")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v(),{children:(0,a.jsx)("title",{children:"BuyBack - Store Dashboard | Pending Orders"})}),(0,a.jsx)("div",{className:"flex justify-center bg-gray-100 min-h-screen relative -top-28",children:(0,a.jsx)("div",{className:"container max-w-screen-xl mx-4",children:(0,a.jsxs)("div",{className:"flex flex-col justify-center space-y-2 bg-white shadow p-4 my-4 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Store Dashboard | Pending Orders"}),(0,a.jsxs)("div",{className:"relative pb-4",children:[(0,a.jsx)(c.d,{variant:"bordered",selectedKeys:z,onSelectionChange:Q,children:(0,a.jsx)(l.G,{"aria-label":"Filters",title:"Filters",startContent:(0,a.jsx)("i",{className:"fas fa-filter"}),children:(0,a.jsxs)("div",{className:"border-t grid grid-cols-2 gap-4 pt-2",children:[(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("label",{htmlFor:"startDate",className:"mb-1",children:"Date From:"}),(0,a.jsx)("input",{type:"date",name:"startDate",id:"startDate",value:X.startDate,onChange:et,className:"px-4 py-1 border rounded w-full outline-none"})]}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("label",{htmlFor:"endDate",className:"mb-1",children:"Date To:"}),(0,a.jsx)("input",{type:"date",name:"endDate",id:"endDate",value:X.endDate,onChange:et,className:"px-4 py-1 border rounded w-full outline-none"})]}),(0,a.jsx)("div",{className:"col-span-2 relative flex justify-center",children:(0,a.jsxs)(d.A,{color:"success",className:"rounded text-white ring-accent",onClick:()=>{en(),Q("0")},children:[(0,a.jsx)("i",{className:"fa-solid fa-filter me-2"}),"Filter"]})})]})},"1")}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2 mt-3",children:[(0,a.jsx)("label",{className:"text-sm text-gray-700",htmlFor:"search-bar",children:"Search by Customer Name, Final Price or Product Name"}),(0,a.jsxs)("div",{className:"w-full flex space-x-2",children:[(0,a.jsx)("input",{type:"text",className:"border border-gray-400 py-2 px-4 rounded-md ring-accent w-full transition-all",name:"search-bar",id:"search-bar",value:O,onChange:e=>q(e.target.value),spellCheck:!1,placeholder:"Search by Customer Name, Final Price or Product Name"}),(0,a.jsxs)("div",{className:"relative space-x-2 w-fit whitespace-nowrap",children:[(0,a.jsx)(d.A,{className:"px-3 py-1 rounded bg-accent text-white cursor-pointer ring-accent h-full",onPress:()=>{q(""),R({key:"",direction:"ascending"}),U({startDate:"",endDate:""})},children:"Clear Filters"}),(0,a.jsx)(d.A,{isIconOnly:!0,className:"rounded bg-accent text-white cursor-pointer h-full ring-accent",onPress:ei,"aria-label":"Download Excel File",children:(0,a.jsx)("i",{className:"fas fa-download "})})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 rounded-md p-4 text-md overflow-auto",children:[(0,a.jsxs)("table",{className:"min-w-full whitespace-nowrap table-auto bg-white rounded overflow-hidden shadow",children:[(0,a.jsx)("thead",{className:"bg-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{className:"text-center cursor-pointer px-3 py-2.5",onClick:()=>ea("order_detail_id"),children:["Order ID ",es("order_detail_id")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer px-3 py-2.5",onClick:()=>ea("customer_name"),children:["Customer Name ",es("customer_name")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer px-3 py-2.5",onClick:()=>ea("product_name"),children:["Product Name ",es("product_name")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer px-3 py-2.5",onClick:()=>ea("price"),children:["Final Price ",es("price")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer px-3 py-2.5",onClick:()=>ea("order_status"),children:["Order Status ",es("order_status")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer px-3 py-2.5",onClick:()=>ea("created_at"),children:["Created On ",es("created_at")]}),(0,a.jsx)("th",{className:"text-center px-3 py-2.5",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:P?Array(y).fill(0).map((e,t)=>(0,a.jsx)("tr",{className:"divide-x",children:Array(7).fill(0).map((e,t)=>(0,a.jsx)("td",{className:"px-3 py-3",children:(0,a.jsx)(u.X,{className:"h-5 rounded-full"})},t))},t)):g.length>0?g.map((e,t)=>(0,a.jsxs)("tr",{className:"text-center  text-sm md:text-base divide-x hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-1.5 px-3",children:e.order_id}),(0,a.jsx)("td",{className:"py-1.5 px-3",children:e.customer_name}),(0,a.jsx)("td",{className:"py-1.5 px-3",children:e.product_name}),(0,a.jsx)("td",{className:"py-1.5 px-3",children:(0,b.fK)(e.price)}),(0,a.jsx)("td",{className:"py-1.5 px-3",children:e.order_status}),(0,a.jsx)("td",{className:"py-1.5 px-3",children:(0,b.a)(e.created_at)}),(0,a.jsxs)("td",{className:"py-1.5 px-3",children:[(0,a.jsx)("button",{className:"inline me-2 fas fa-comment-dots p-1.5 rounded transition-all bg-blue-100 text-blue-500 hover:bg-blue-500 hover:text-white cursor-pointer ring-custom ring-blue-400",onClick:()=>{W({qna:e.review_qna,feedback:e.feedback}),Y()}}),e.qna.length>0&&(0,a.jsx)("button",{className:"inline me-2 far fa-circle-question p-1.5 rounded transition-all bg-accent-dimmed accent hover:bg-accent hover:text-white cursor-pointer ring-accent",onClick:()=>{K(e.qna),V()},disabled:!(e.qna&&e.qna.length>0)})]})]},t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"text-red-500 text-center py-2 font-semibold",children:"No entries to show!"})})})]}),T&&(0,a.jsx)("div",{className:"text-red-500 text-center pt-2 min-h-96",children:"Something went wrong"})]})]}),(0,a.jsx)(i.Z,{itemsPerPage:y,setItemsPerPage:w,currentPage:C,setCurrentPage:S,totalEntries:E,totalPages:k})]})})}),(0,a.jsx)(m.R,{isOpen:G,onClose:H,size:"5xl",backdrop:"none",scrollBehavior:"inside",children:(0,a.jsxs)(h.A,{children:[(0,a.jsx)(x.k,{children:(0,a.jsx)("p",{children:"Question/Answers"})}),(0,a.jsx)(p.I,{children:Z&&Z.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Z.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded p-4 shadow-sm bg-slate-50",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Question:"}),(0,a.jsx)("p",{children:e.question}),(0,a.jsx)("div",{className:"font-semibold mt-2",children:"Answer:"}),(0,a.jsxs)("p",{children:[" ",Array.isArray(e.answer)?e.answer.join(", "):e.answer]})]},t))}):(0,a.jsx)("p",{children:"No questions available."})}),(0,a.jsx)(f.R,{children:(0,a.jsx)(d.A,{color:"danger",variant:"light",onPress:H,children:"Close"})})]})}),(0,a.jsx)(m.R,{isOpen:J,onClose:$,size:"5xl",backdrop:"none",scrollBehavior:"inside",children:(0,a.jsxs)(h.A,{children:[(0,a.jsx)(x.k,{children:(0,a.jsx)("p",{children:"Customer Feedback"})}),(0,a.jsxs)(p.I,{className:"px-2 sm:px-8",children:[(0,a.jsxs)("p",{className:"py-0.5 px-1.5 rounded border bg-slate-50 font-medium text-lg",children:["Feedback: ",M.feedback||"No Feedback Provided"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("p",{className:"mt-1 px-1.5 font-medium text-lg",children:"Feedback QNA:"}),(0,a.jsx)("div",{className:"rounded border p-3",children:(null==M?void 0:M.qna)&&(null==M?void 0:null===(e=M.qna)||void 0===e?void 0:e.length)>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.qna.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded p-4 shadow-sm bg-slate-50",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Question:"}),(0,a.jsx)("p",{children:e.question}),(0,a.jsx)("div",{className:"font-semibold mt-2",children:"Answer:"}),(0,a.jsx)("p",{children:e.answers.join(", ")})]},t))}):(0,a.jsx)("p",{children:"No Feedback QNA available."})})]})]}),(0,a.jsx)(f.R,{children:(0,a.jsx)(d.A,{color:"danger",variant:"light",onPress:$,children:"Close"})})]})})]})}},39840:function(e,t,n){"use strict";n.d(t,{u:function(){return s}});var a=n(9134),r=n(83454);async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var s,i;let a=localStorage.getItem("token");String(r.env.NEXT_PUBLIC_CUSTOMER_ID);let o=await fetch("".concat("https://buybackservice.unicornstore.in","/").concat(e),{...t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a),...null!==(s=null==t?void 0:t.headers)&&void 0!==s?s:void 0}});if(!o.ok)throw Error("Something went wrong ".concat(o.status));if(""===n){let e=await o.json();if("success"!==e.status)throw Error(null!==(i=null==e?void 0:e.message)&&void 0!==i?i:"Something went wrong (status !=='success' and no message)");return e}{let e=await o.blob(),t=window.URL.createObjectURL(e),a=document.createElement("a");return a.href=t,a.setAttribute("download",n),document.body.appendChild(a),a.click(),a.remove(),null}}catch(e){a.Am.error(e.message)}}},77663:function(e){!function(){var t={229:function(e){var t,n,a,r=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c=[],l=!1,d=-1;function u(){l&&a&&(l=!1,a.length?c=a.concat(c):d=-1,c.length&&m())}function m(){if(!l){var e=o(u);l=!0;for(var t=c.length;t;){for(a=c,c=[];++d<t;)a&&a[d].run();d=-1,t=c.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function x(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||o(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},i=!0;try{t[e](s,s.exports,a),i=!1}finally{i&&delete n[e]}return s.exports}a.ab="//";var r=a(229);e.exports=r}()},4483:function(e,t,n){"use strict";n.d(t,{X:function(){return m}});var a=n(15607),r=(0,n(44831).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),s=n(60798),i=n(49869),o=n(50262),c=n(67294),l=n(76733),d=n(85893),u=(0,a.Gp)((e,t)=>{let{Component:n,children:u,getSkeletonProps:m,getContentProps:h}=function(e){var t,n;let d=(0,l.w)(),[u,m]=(0,a.oe)(e,r.variantKeys),{as:h,children:x,isLoaded:p=!1,className:f,classNames:b,...g}=u,v=null!=(n=null!=(t=e.disableAnimation)?t:null==d?void 0:d.disableAnimation)&&n,j=(0,c.useMemo)(()=>r({...m,disableAnimation:v}),[(0,s.Xx)(m),v,x]),N=(0,i.W)(null==b?void 0:b.base,f);return{Component:h||"div",children:x,slots:j,classNames:b,getSkeletonProps:(e={})=>({"data-loaded":(0,o.PB)(p),className:j.base({class:(0,i.W)(N,null==e?void 0:e.className)}),...g}),getContentProps:(e={})=>({className:j.content({class:(0,i.W)(null==b?void 0:b.content,null==e?void 0:e.className)})})}}({...e});return(0,d.jsx)(n,{ref:t,...m(),children:(0,d.jsx)("div",{...h(),children:u})})});u.displayName="NextUI.Skeleton";var m=u}},function(e){e.O(0,[7242,934,3628,2888,9774,179],function(){return e(e.s=20779)}),_N_E=e.O()}]);