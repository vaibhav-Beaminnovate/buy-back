(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3884],{95449:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/warehouse/products",function(){return a(47562)}])},12115:function(e,t,a){"use strict";var s=a(85893);a(67294),t.Z=e=>{let{itemsPerPage:t,setItemsPerPage:a,currentPage:r,setCurrentPage:n,totalEntries:l,totalPages:c}=e;return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("label",{htmlFor:"items",className:"text-sm",children:"Items per page:"}),(0,s.jsx)("select",{id:"items",className:"border border-gray-300 rounded-md py-1 px-2 ring-accent",value:t,onChange:e=>{a(parseInt(e.target.value,10)),n(1)},children:[15,20,25,30,35].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-3 md:mt-0",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-700",children:[t*r-t+1," to"," ",t*r<l?t*r:l," ","of ",l]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("button",{onClick:()=>n(1),disabled:1===r,className:"p-2 rounded-full ring-accent ".concat(r>1?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-bar-left text-lg"})}),(0,s.jsx)("button",{onClick:()=>n(e=>e>1?e-1:e),disabled:1===r,className:"p-2 rounded-full ring-accent ".concat(r>1?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-left text-lg"})}),(0,s.jsx)("button",{onClick:()=>n(e=>e<c?e+1:e),disabled:r===c,className:"p-2 rounded-full ring-accent ".concat(r<c?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-right text-lg"})}),(0,s.jsx)("button",{onClick:()=>n(c),disabled:r===c,className:"p-2 rounded-full ring-accent ".concat(r<c?"text-accent":"text-gray-400"),children:(0,s.jsx)("i",{className:"bi bi-chevron-bar-right text-lg"})})]})]})]})}},98344:function(e,t,a){"use strict";var s=a(85893);a(67294),t.Z=e=>{let{url:t}=e;return(0,s.jsx)("div",{className:"border",children:(0,s.jsx)("iframe",{src:t,className:"w-full h-[450px]"})})}},47562:function(e,t,a){"use strict";a.r(t);var s=a(85893),r=a(12115),n=a(9008),l=a.n(n),c=a(11163),i=a(67294),o=a(9134),d=a(67957),u=a(4483),p=a(10405),h=a(44265),m=a(87740),x=a(86597),f=a(96476),b=a(14930),j=a(98344),N=a(32553);t.default=()=>{let e="https://buybackservice.unicornstore.in";(0,c.useRouter)();let[t,a]=(0,i.useState)([]),[n,g]=(0,i.useState)(1),[y,v]=(0,i.useState)(null),[w,_]=(0,i.useState)(""),[S,P]=(0,i.useState)(!0),[C,k]=(0,i.useState)(15),[A,E]=(0,i.useState)(""),{isOpen:D,onOpen:I,onOpenChange:W}=(0,d.q)(),[z,O]=(0,i.useState)({}),[X,T]=(0,i.useState)(""),[F,Z]=(0,i.useState)(!1),[B,R]=(0,i.useState)(!0),U=(0,N.dQ)(),q=0,M=async()=>{try{console.log(q),q++,P(!0);let t=await fetch("".concat(e,"/get-warehouse-orders/?page=").concat(n,"&per_page=10&sort_desc=false&search=").concat(w,"&warehouse_id=").concat(localStorage.getItem("warehouse_id")),{headers:{Authorization:U}});if(!t.ok)throw Error("Could not get products");let s=await t.json();a(s.data),E(s.total_count),v(Math.ceil(s.total_count/C))}catch(e){o.Am.error(e.message)}finally{setTimeout(()=>{P(!1)},300)}};(0,i.useEffect)(()=>{M(),R(!1)},[n]),(0,i.useEffect)(()=>{if(!B){let e=setTimeout(()=>{g(1),M()},300);return()=>clearTimeout(e)}},[w]);let V=async(t,a)=>{try{let a=await fetch("".concat(e,"/orders-data-wipe?order_id=").concat(t,"&datawipe_certificate=").concat(X),{method:"PUT",headers:{Authorization:U}});if(!a.ok)throw Error("Could not update data wipe status");let s=await a.json();if("success"===s.status)o.Am.success("Data wipe status updated successfully",{toastId:"updateDataWipeSuccess"}),M();else throw Error(s.message)}catch(e){o.Am.error(e.message,{toastId:"updateDataWipeError"})}finally{Z(!1),T(null),O({}),a()}},G=e=>{let t=e.target.files[0];t&&"application/pdf"===t.type?(K(t),Z(!0)):(o.Am.error("Please select a valid PDF file",{toastId:"selectValidPDFErrors"}),Z(!1))},K=async t=>{if(!t){o.Am.error("Please select a pdf first");return}let a=new FormData;a.append("file",t);try{let t=await fetch("".concat(e,"/upload-pdf"),{method:"POST",headers:{Authorization:U},body:a});if(!t.ok)throw Error("Could not upload pdf");let s=await t.json();if("success"!==s.status)throw Error(s.message);T(s.url)}catch(e){o.Am.error(e.message,{toastId:"uploadPdfError"})}};return(0,s.jsxs)("div",{className:"flex justify-center bg-gray-100 min-h-screen",children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:"BuyBack - Warehouse"})}),(0,s.jsx)("div",{className:"container max-w-screen-xl",children:(0,s.jsxs)("div",{className:"flex flex-col bg-white p-4 mb-8 rounded shadow justify-center space-y-2",children:[(0,s.jsxs)("h2",{className:"text-2xl font-semibold",children:["Warehouse Dashboard | Products"," "]}),(0,s.jsxs)("div",{className:"relative p-2 space-y-2 rounded",children:[(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault()},className:"relative",children:[(0,s.jsx)("label",{className:"text-sm text-gray-700 mb-1",htmlFor:"search-bar",children:"Search by Order ID, Seller Name, Product Name or Status"}),(0,s.jsx)("input",{type:"text",className:"w-full border border-gray-400 py-2 px-4 rounded-md ring-accent",name:"search-bar",id:"search-bar",value:w,onChange:e=>_(e.target.value),spellCheck:!1,autoComplete:"off",placeholder:"Search by Order ID, Seller Name, Product Name or Status"})]}),(0,s.jsxs)("table",{className:"min-w-full table-auto bg-white rounded overflow-hidden shadow",children:[(0,s.jsx)("thead",{className:"bg-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-center py-2.5",children:"Order ID"}),(0,s.jsx)("th",{className:"text-center py-2.5",children:"Seller Name"}),(0,s.jsx)("th",{className:"text-center py-2.5",children:"Product Name"}),(0,s.jsx)("th",{className:"text-center py-2.5",children:"Data Wiped"}),(0,s.jsx)("th",{className:"text-center py-2.5",children:"Status"})]})}),(0,s.jsx)("tbody",{className:"divide-y",children:S?Array(10).fill(0).map((e,t)=>(0,s.jsxs)("tr",{className:"divide-x hover:bg-gray-100",children:[(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,s.jsx)(u.X,{className:"h-5 rounded-full"})}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,s.jsx)(u.X,{className:"h-5 rounded-full"})}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,s.jsx)(u.X,{className:"h-5 rounded-full"})}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,s.jsx)(u.X,{className:"h-5 rounded-full"})}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,s.jsx)(u.X,{className:"h-5 rounded-full"})})]},t)):t&&t.length>0?t.map((e,t)=>(0,s.jsxs)("tr",{className:"divide-x",children:[(0,s.jsx)("td",{className:"py-1.5 text-center capitalize",children:e.order_id}),(0,s.jsx)("td",{className:"py-1.5 text-center capitalize",children:e.name}),(0,s.jsx)("td",{className:"py-1.5 text-center capitalize",children:e.product_name}),(0,s.jsx)("td",{className:"py-0.5 text-center capitalize",children:0===e.data_wiped?(0,s.jsxs)("select",{name:"dataWipe",id:"dataWipe",value:e.data_wiped,onChange:()=>{O(e),I()},className:"w-full border rounded px-2 outline-none py-1.5",children:[(0,s.jsx)("option",{value:"1",children:"Wiped"}),(0,s.jsx)("option",{value:"0",children:"Not Wiped"})]}):(0,s.jsx)("span",{children:"Wiped"})}),(0,s.jsx)("td",{className:"py-1.5 text-center capitalize",children:e.status})]},t)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"w-full border py-4 text-center text-red-500 font-semibold",children:"No entries to show!"})})})]}),(0,s.jsx)(r.Z,{itemsPerPage:C,setItemsPerPage:k,currentPage:n,setCurrentPage:g,totalEntries:A,totalPages:y})]})]})}),(0,s.jsx)(p.R,{isOpen:D,onOpenChange:W,backdrop:"opaque",children:(0,s.jsx)(h.A,{children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.k,{className:"flex flex-col gap-1",children:"Upload Data Wipe Confirmation"}),(0,s.jsxs)(x.I,{children:[(0,s.jsxs)("p",{className:"text-lg",children:["Order ID: ",null==z?void 0:z.order_id]}),(0,s.jsx)("input",{type:"file",name:"wipedCeritificate",id:"wipedCeritificate",className:"border border-gray-300 h-fit",onChange:G,accept:"application/pdf"}),(0,s.jsx)("div",{className:"".concat(F?"visible":"invisible"),children:(0,s.jsx)(j.Z,{url:X})})]}),(0,s.jsxs)(f.R,{children:[(0,s.jsx)(b.A,{color:"danger",variant:"light",className:"rounded",onPress:()=>{e(),O({})},children:"Close"}),(0,s.jsx)(b.A,{className:"bg-accent text-white rounded",onPress:()=>{V(z.order_id,e)},children:"Submit"})]})]})})})]})}},4483:function(e,t,a){"use strict";a.d(t,{X:function(){return p}});var s=a(15607),r=(0,a(44831).tv)({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:-z-10 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}}),n=a(60798),l=a(49869),c=a(50262),i=a(67294),o=a(76733),d=a(85893),u=(0,s.Gp)((e,t)=>{let{Component:a,children:u,getSkeletonProps:p,getContentProps:h}=function(e){var t,a;let d=(0,o.w)(),[u,p]=(0,s.oe)(e,r.variantKeys),{as:h,children:m,isLoaded:x=!1,className:f,classNames:b,...j}=u,N=null!=(a=null!=(t=e.disableAnimation)?t:null==d?void 0:d.disableAnimation)&&a,g=(0,i.useMemo)(()=>r({...p,disableAnimation:N}),[(0,n.Xx)(p),N,m]),y=(0,l.W)(null==b?void 0:b.base,f);return{Component:h||"div",children:m,slots:g,classNames:b,getSkeletonProps:(e={})=>({"data-loaded":(0,c.PB)(x),className:g.base({class:(0,l.W)(y,null==e?void 0:e.className)}),...j}),getContentProps:(e={})=>({className:g.content({class:(0,l.W)(null==b?void 0:b.content,null==e?void 0:e.className)})})}}({...e});return(0,d.jsx)(a,{ref:t,...p(),children:(0,d.jsx)("div",{...h(),children:u})})});u.displayName="NextUI.Skeleton";var p=u}},function(e){e.O(0,[7242,2888,9774,179],function(){return e(e.s=95449)}),_N_E=e.O()}]);