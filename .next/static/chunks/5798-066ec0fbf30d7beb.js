"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5798],{93670:function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_DATA_URL_KEY=r.INIT_MAX_NUMBER=r.DEFAULT_NULL_INDEX=void 0,r.DEFAULT_NULL_INDEX=-1,r.INIT_MAX_NUMBER=1e3,r.DEFAULT_DATA_URL_KEY="dataURL"},3942:function(e,r,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,r,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return r[n]}})}:function(e,r,n,i){void 0===i&&(i=n),e[i]=r[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(r,e,n);return o(r,e),r},f=this&&this.__awaiter||function(e,r,n,i){return new(n||(n=Promise))(function(a,o){function l(e){try{u(i.next(e))}catch(e){o(e)}}function f(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?a(e.value):((r=e.value)instanceof n?r:new n(function(e){e(r)})).then(l,f)}u((i=i.apply(e,r||[])).next())})},u=this&&this.__generator||function(e,r){var n,i,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function f(o){return function(f){return function(o){if(n)throw TypeError("Generator is already executing.");for(;l;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,i=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=r.call(e,l)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,f])}}},s=this&&this.__spreadArrays||function(){for(var e=0,r=0,n=arguments.length;r<n;r++)e+=arguments[r].length;for(var i=Array(e),a=0,r=0;r<n;r++)for(var o=arguments[r],l=0,f=o.length;l<f;l++,a++)i[a]=o[l];return i};Object.defineProperty(r,"__esModule",{value:!0});var c=l(n(67294)),h=n(99183),d=n(93838),g=n(93670);r.default=function(e){var r=e.value,n=e.onChange,a=e.onError,o=e.children,l=e.dataURLKey,p=void 0===l?g.DEFAULT_DATA_URL_KEY:l,v=e.multiple,A=void 0!==v&&v,w=e.maxNumber,m=void 0===w?g.INIT_MAX_NUMBER:w,b=e.acceptType,y=e.maxFileSize,U=e.resolutionWidth,F=e.resolutionHeight,_=e.resolutionType,E=e.inputProps,I=e.allowNonImageType,T=void 0!==I&&I,M=(void 0===r?[]:r)||[],C=c.useRef(null),B=c.useState(g.DEFAULT_NULL_INDEX),L=B[0],x=B[1],R=c.useState(null),S=R[0],D=R[1],k=c.useState(!1),P=k[0],O=k[1],N=c.useCallback(function(){return h.openFileDialog(C)},[C]),Q=c.useCallback(function(){x(g.DEFAULT_NULL_INDEX),N()},[N]),H=c.useCallback(function(){null==n||n([])},[n]),z=function(e){return f(void 0,void 0,void 0,function(){var r,i,o,l,c;return u(this,function(v){switch(v.label){case 0:if(!e)return[2];return[4,h.getListFiles(e,p)];case 1:var w;if(!(r=v.sent()).length)return[2];return[4,(w=r,f(void 0,void 0,void 0,function(){var e;return u(this,function(r){switch(r.label){case 0:return[4,d.getErrorValidation({fileList:w,maxFileSize:y,maxNumber:m,acceptType:b,keyUpdate:L,resolutionType:_,resolutionWidth:U,resolutionHeight:F,value:M,allowNonImageType:T})];case 1:if(e=r.sent())return D(e),null==a||a(e,w),[2,!1];return S&&D(null),[2,!0]}})}))];case 2:if(!v.sent())return[2];if(o=[],L>g.DEFAULT_NULL_INDEX)l=r[0],(i=s(M))[L]=l,o.push(L);else if(A)for(i=s(M,r),c=M.length;c<i.length;c+=1)o.push(c);else i=[r[0]],o.push(0);return null==n||n(i,o),[2]}})})},j=c.useMemo(function(){return h.getAcceptTypeString(b,T)},[b,T]);return c.default.createElement(c.default.Fragment,null,c.default.createElement("input",i({type:"file",accept:j,ref:C,multiple:A&&L===g.DEFAULT_NULL_INDEX,onChange:function(e){return f(void 0,void 0,void 0,function(){return u(this,function(r){switch(r.label){case 0:return[4,z(e.target.files)];case 1:return r.sent(),L>g.DEFAULT_NULL_INDEX&&x(g.DEFAULT_NULL_INDEX),C.current&&(C.current.value=""),[2]}})})},style:{display:"none"}},void 0===E?{}:E)),null==o?void 0:o({imageList:M,onImageUpload:Q,onImageRemoveAll:H,onImageUpdate:function(e){x(e),N()},onImageRemove:function(e){var r=s(M);Array.isArray(e)?e.forEach(function(e){r.splice(e,1)}):r.splice(e,1),null==n||n(r)},errors:S,dragProps:{onDrop:function(e){e.preventDefault(),e.stopPropagation(),O(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&z(e.dataTransfer.files)},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.items&&e.dataTransfer.items.length>0&&O(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),O(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragStart:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.clearData()}},isDragging:P}))}},99183:function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getListFiles=r.getImage=r.getBase64=r.getAcceptTypeString=r.openFileDialog=void 0,r.openFileDialog=function(e){e.current&&e.current.click()},r.getAcceptTypeString=function(e,r){return(null==e?void 0:e.length)?e.map(function(e){return"."+e}).join(", "):r?"":"image/*"},r.getBase64=function(e){var r=new FileReader;return new Promise(function(n){r.addEventListener("load",function(){return n(String(r.result))}),r.readAsDataURL(e)})},r.getImage=function(e){var r=new Image;return new Promise(function(n){r.addEventListener("load",function(){return n(r)}),r.src=URL.createObjectURL(e)})},r.getListFiles=function(e,n){for(var i=[],a=0;a<e.length;a+=1)i.push(r.getBase64(e[a]));return Promise.all(i).then(function(r){return r.map(function(r,i){var a;return(a={})[n]=r,a.file=e[i],a})})}},93838:function(e,r,n){var i=this&&this.__awaiter||function(e,r,n,i){return new(n||(n=Promise))(function(a,o){function l(e){try{u(i.next(e))}catch(e){o(e)}}function f(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var r;e.done?a(e.value):((r=e.value)instanceof n?r:new n(function(e){e(r)})).then(l,f)}u((i=i.apply(e,r||[])).next())})},a=this&&this.__generator||function(e,r){var n,i,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function f(o){return function(f){return function(o){if(n)throw TypeError("Generator is already executing.");for(;l;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,i=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=(a=l.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=r.call(e,l)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,f])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.getErrorValidation=r.isMaxNumberValid=r.isAcceptTypeValid=r.isMaxFileSizeValid=r.isImageValid=r.isResolutionValid=void 0;var o=n(93670),l=n(99183);r.isResolutionValid=function(e,r,n,i){if(void 0===n&&(n=0),void 0===i&&(i=1),!n||!i||!e.width||!e.height)return!0;switch(r){case"absolute":if(e.width===n&&e.height===i)return!0;break;case"ratio":var a=n/i;if(e.width/e.height===a)return!0;break;case"less":if(e.width<=n&&e.height<=i)return!0;break;case"more":if(e.width>=n&&e.height>=i)return!0}return!1},r.isImageValid=function(e){return!!e.includes("image")},r.isMaxFileSizeValid=function(e,r){return!r||e<=r},r.isAcceptTypeValid=function(e,r){if(e&&e.length>0){var n=r.split(".").pop()||"";if(0>e.findIndex(function(e){return e.toLowerCase()===n.toLowerCase()}))return!1}return!0},r.isMaxNumberValid=function(e,r,n){if(0!==r&&!r)return!0;if(n===o.DEFAULT_NULL_INDEX){if(e<=r)return!0}else if(e<=r+1)return!0;return!1},r.getErrorValidation=function(e){var n=e.fileList,o=e.value,f=e.maxNumber,u=e.keyUpdate,s=e.acceptType,c=e.maxFileSize,h=e.resolutionType,d=e.resolutionWidth,g=e.resolutionHeight,p=e.allowNonImageType;return i(void 0,void 0,void 0,function(){var e,i,v,A;return a(this,function(a){switch(a.label){case 0:if(e={},r.isMaxNumberValid(n.length+o.length,f,u))return[3,1];return e.maxNumber=!0,[3,5];case 1:i=0,a.label=2;case 2:if(!(i<n.length))return[3,5];if(!(v=n[i].file))return[3,4];if(!p&&!r.isImageValid(v.type)||!r.isAcceptTypeValid(s,v.name))return e.acceptType=!0,[3,5];if(!r.isMaxFileSizeValid(v.size,c))return e.maxFileSize=!0,[3,5];if(!h)return[3,4];return[4,l.getImage(v)];case 3:if(A=a.sent(),!r.isResolutionValid(A,h,d,g))return e.resolution=!0,[3,5];a.label=4;case 4:return i+=1,[3,2];case 5:if(Object.values(e).find(Boolean))return[2,e];return[2,null]}})})}},40221:function(e,r,n){let i;function a(e,r){return new Promise(function(n,i){let a;return o(e).then(function(e){try{return a=e,n(new Blob([r.slice(0,2),a,r.slice(2)],{type:"image/jpeg"}))}catch(e){return i(e)}},i)})}n.d(r,{Z:function(){return P}});let o=e=>new Promise((r,n)=>{let i=new FileReader;i.addEventListener("load",({target:{result:e}})=>{let i=new DataView(e),a=0;if(65496!==i.getUint16(a))return n("not a valid JPEG");for(a+=2;;){let o=i.getUint16(a);if(65498===o)break;let l=i.getUint16(a+2);if(65505===o&&1165519206===i.getUint32(a+4)){let o;let f=a+10;switch(i.getUint16(f)){case 18761:o=!0;break;case 19789:o=!1;break;default:return n("TIFF header contains invalid endian")}if(42!==i.getUint16(f+2,o))return n("TIFF header contains invalid version");let u=i.getUint32(f+4,o),s=f+u+2+12*i.getUint16(f+u,o);for(let e=f+u+2;e<s;e+=12)if(274==i.getUint16(e,o)){if(3!==i.getUint16(e+2,o))return n("Orientation data type is invalid");if(1!==i.getUint32(e+4,o))return n("Orientation data count is invalid");i.setUint16(e+8,1,o);break}return r(e.slice(a,a+2+l))}a+=2+l}return r(new Blob)}),i.readAsArrayBuffer(e)});var l,f,u,s,c={};u={},({get exports(){return c},set exports(t){c=t}}).exports=u,u.parse=function(e,r){for(var n=u.bin.readUshort,i=u.bin.readUint,a=0,o={},l=new Uint8Array(e),f=l.length-4;101010256!=i(l,f);)f--;var s=n(l,a=f+4+4);n(l,a+=2);var c=i(l,a+=2),h=i(l,a+=4);a+=4,a=h;for(var d=0;d<s;d++){i(l,a),i(l,a+=16),c=i(l,a+=4);var g=i(l,a+=4),p=n(l,a+=4),v=n(l,a+2),A=n(l,a+4),w=i(l,a+=14);a+=4+(p+v+A),u._readLocal(l,w,o,c,g,r)}return o},u._readLocal=function(e,r,n,i,a,o){var l=u.bin.readUshort,f=u.bin.readUint;f(e,r),l(e,r+=4),l(e,r+=2);var s=l(e,r+=2);f(e,r+=2),f(e,r+=4);var c=l(e,r+=12),h=l(e,r+=2);r+=2;var d=u.bin.readUTF8(e,r,c);if(r+=c+h,o)n[d]={size:a,csize:i};else{var g=new Uint8Array(e.buffer,r);if(0==s)n[d]=new Uint8Array(g.buffer.slice(r,r+i));else{if(8!=s)throw"unknown compression method: "+s;var p=new Uint8Array(a);u.inflateRaw(g,p),n[d]=p}}},u.inflateRaw=function(e,r){return u.F.inflate(e,r)},u.inflate=function(e,r){return e[0],e[1],u.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),r)},u.deflate=function(e,r){null==r&&(r={level:6});var n=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[n]=120,i[n+1]=156,n+=2,n=u.F.deflateRaw(e,i,n,r.level);var a=u.adler(e,0,e.length);return i[n+0]=a>>>24&255,i[n+1]=a>>>16&255,i[n+2]=a>>>8&255,i[n+3]=a>>>0&255,new Uint8Array(i.buffer,0,n+4)},u.deflateRaw=function(e,r){null==r&&(r={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),i=u.F.deflateRaw(e,n,i,r.level);return new Uint8Array(n.buffer,0,i)},u.encode=function(e,r){null==r&&(r=!1);var n=0,i=u.bin.writeUint,a=u.bin.writeUshort,o={};for(var l in e){var f=!u._noNeed(l)&&!r,s=e[l],c=u.crc.crc(s,0,s.length);o[l]={cpr:f,usize:s.length,crc:c,file:f?u.deflateRaw(s):s}}for(var l in o)n+=o[l].file.length+30+46+2*u.bin.sizeUTF8(l);var h=new Uint8Array(n+=22),d=0,g=[];for(var l in o){var p=o[l];g.push(d),d=u._writeHeader(h,d,l,p,0)}var v=0,A=d;for(var l in o)p=o[l],g.push(d),d=u._writeHeader(h,d,l,p,1,g[v++]);var w=d-A;return i(h,d,101010256),a(h,d+=8,v),a(h,d+=2,v),i(h,d+=2,w),i(h,d+=4,A),d+=6,h.buffer},u._noNeed=function(e){var r=e.split(".").pop().toLowerCase();return -1!="png,jpg,jpeg,zip".indexOf(r)},u._writeHeader=function(e,r,n,i,a,o){var l=u.bin.writeUint,f=u.bin.writeUshort,s=i.file;return l(e,r,0==a?67324752:33639248),r+=4,1==a&&(r+=2),f(e,r,20),f(e,r+=2,0),f(e,r+=2,i.cpr?8:0),l(e,r+=2,0),l(e,r+=4,i.crc),l(e,r+=4,s.length),l(e,r+=4,i.usize),f(e,r+=4,u.bin.sizeUTF8(n)),f(e,r+=2,0),r+=2,1==a&&(l(e,r+=10,o),r+=4),r+=u.bin.writeUTF8(e,r,n),0==a&&(e.set(s,r),r+=s.length),r},u.crc={table:function(){for(var e=new Uint32Array(256),r=0;r<256;r++){for(var n=r,i=0;i<8;i++)1&n?n=3988292384^n>>>1:n>>>=1;e[r]=n}return e}(),update:function(e,r,n,i){for(var a=0;a<i;a++)e=u.crc.table[255&(e^r[n+a])]^e>>>8;return e},crc:function(e,r,n){return 4294967295^u.crc.update(4294967295,e,r,n)}},u.adler=function(e,r,n){for(var i=1,a=0,o=r,l=r+n;o<l;){for(var f=Math.min(o+5552,l);o<f;)a+=i+=e[o++];i%=65521,a%=65521}return a<<16|i},u.bin={readUshort:function(e,r){return e[r]|e[r+1]<<8},writeUshort:function(e,r,n){e[r]=255&n,e[r+1]=n>>8&255},readUint:function(e,r){return 16777216*e[r+3]+(e[r+2]<<16|e[r+1]<<8|e[r])},writeUint:function(e,r,n){e[r]=255&n,e[r+1]=n>>8&255,e[r+2]=n>>16&255,e[r+3]=n>>24&255},readASCII:function(e,r,n){for(var i="",a=0;a<n;a++)i+=String.fromCharCode(e[r+a]);return i},writeASCII:function(e,r,n){for(var i=0;i<n.length;i++)e[r+i]=n.charCodeAt(i)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,r,n){for(var i,a="",o=0;o<n;o++)a+="%"+u.bin.pad(e[r+o].toString(16));try{i=decodeURIComponent(a)}catch(i){return u.bin.readASCII(e,r,n)}return i},writeUTF8:function(e,r,n){for(var i=n.length,a=0,o=0;o<i;o++){var l=n.charCodeAt(o);if(0==(4294967168&l))e[r+a]=l,a++;else if(0==(4294965248&l))e[r+a]=192|l>>6,e[r+a+1]=128|l>>0&63,a+=2;else if(0==(4294901760&l))e[r+a]=224|l>>12,e[r+a+1]=128|l>>6&63,e[r+a+2]=128|l>>0&63,a+=3;else{if(0!=(4292870144&l))throw"e";e[r+a]=240|l>>18,e[r+a+1]=128|l>>12&63,e[r+a+2]=128|l>>6&63,e[r+a+3]=128|l>>0&63,a+=4}}return a},sizeUTF8:function(e){for(var r=e.length,n=0,i=0;i<r;i++){var a=e.charCodeAt(i);if(0==(4294967168&a))n++;else if(0==(4294965248&a))n+=2;else if(0==(4294901760&a))n+=3;else{if(0!=(4292870144&a))throw"e";n+=4}}return n}},u.F={},u.F.deflateRaw=function(e,r,n,i){var a=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],o=u.F.U,l=u.F._goodIndex;u.F._hash;var f=u.F._putsE,s=0,c=n<<3,h=0,d=e.length;if(0==i){for(;s<d;)f(r,c,s+(E=Math.min(65535,d-s))==d?1:0),c=u.F._copyExact(e,s,E,r,c+8),s+=E;return c>>>3}var g=o.lits,p=o.strt,v=o.prev,A=0,w=0,m=0,b=0,y=0,U=0;for(d>2&&(p[U=u.F._hash(e,0)]=0),s=0;s<d;s++){if(y=U,s+1<d-2){U=u.F._hash(e,s+1);var F=s+1&32767;v[F]=p[U],p[U]=F}if(h<=s){(A>14e3||w>26697)&&d-s>100&&(h<s&&(g[A]=s-h,A+=2,h=s),c=u.F._writeBlock(s==d-1||h==d?1:0,g,A,b,e,m,s-m,r,c),A=w=b=0,m=s);var _=0;s<d-2&&(_=u.F._bestMatch(e,s,v,y,Math.min(a[2],d-s),a[3]));var E=_>>>16,I=65535&_;if(0!=_){I=65535&_;var T=l(E=_>>>16,o.of0);o.lhst[257+T]++;var M=l(I,o.df0);o.dhst[M]++,b+=o.exb[T]+o.dxb[M],g[A]=E<<23|s-h,g[A+1]=I<<16|T<<8|M,A+=2,h=s+E}else o.lhst[e[s]]++;w++}}for(m==s&&0!=e.length||(h<s&&(g[A]=s-h,A+=2,h=s),c=u.F._writeBlock(1,g,A,b,e,m,s-m,r,c),A=0,w=0,A=w=b=0,m=s);0!=(7&c);)c++;return c>>>3},u.F._bestMatch=function(e,r,n,i,a,o){var l=32767&r,f=n[l],s=l-f+32768&32767;if(f==l||i!=u.F._hash(e,r-s))return 0;for(var c=0,h=0,d=Math.min(32767,r);s<=d&&0!=--o&&f!=l;){if(0==c||e[r+c]==e[r+c-s]){var g=u.F._howLong(e,r,s);if(g>c){if(h=s,(c=g)>=a)break;s+2<g&&(g=s+2);for(var p=0,v=0;v<g-2;v++){var A=r-s+v+32768&32767,w=A-n[A]+32768&32767;w>p&&(p=w,f=A)}}}s+=(l=f)-(f=n[l])+32768&32767}return c<<16|h},u.F._howLong=function(e,r,n){if(e[r]!=e[r-n]||e[r+1]!=e[r+1-n]||e[r+2]!=e[r+2-n])return 0;var i=r,a=Math.min(e.length,r+258);for(r+=3;r<a&&e[r]==e[r-n];)r++;return r-i},u.F._hash=function(e,r){return(e[r]<<8|e[r+1])+(e[r+2]<<4)&65535},u.saved=0,u.F._writeBlock=function(e,r,n,i,a,o,l,f,s){var c,h,d,g,p,v,A,w,m,b,y,U=u.F.U,F=u.F._putsF,_=u.F._putsE;U.lhst[256]++,g=(d=u.F.getTrees())[0],p=d[1],v=d[2],A=d[3],w=d[4],m=d[5],b=d[6],y=d[7];var E=32+(0==(s+3&7)?0:8-(s+3&7))+(l<<3),I=i+u.F.contSize(U.fltree,U.lhst)+u.F.contSize(U.fdtree,U.dhst),T=i+u.F.contSize(U.ltree,U.lhst)+u.F.contSize(U.dtree,U.dhst);T+=14+3*m+u.F.contSize(U.itree,U.ihst)+(2*U.ihst[16]+3*U.ihst[17]+7*U.ihst[18]);for(var M=0;M<286;M++)U.lhst[M]=0;for(M=0;M<30;M++)U.dhst[M]=0;for(M=0;M<19;M++)U.ihst[M]=0;var C=E<I&&E<T?0:I<T?1:2;if(F(f,s,e),F(f,s+1,C),s+=3,0==C){for(;0!=(7&s);)s++;s=u.F._copyExact(a,o,l,f,s)}else{if(1==C&&(c=U.fltree,h=U.fdtree),2==C){u.F.makeCodes(U.ltree,g),u.F.revCodes(U.ltree,g),u.F.makeCodes(U.dtree,p),u.F.revCodes(U.dtree,p),u.F.makeCodes(U.itree,v),u.F.revCodes(U.itree,v),c=U.ltree,h=U.dtree,_(f,s,A-257),_(f,s+=5,w-1),_(f,s+=5,m-4),s+=4;for(var B=0;B<m;B++)_(f,s+3*B,U.itree[1+(U.ordr[B]<<1)]);s+=3*m,s=u.F._codeTiny(b,U.itree,f,s),s=u.F._codeTiny(y,U.itree,f,s)}for(var L=o,x=0;x<n;x+=2){for(var R=r[x],S=R>>>23,D=L+(8388607&R);L<D;)s=u.F._writeLit(a[L++],c,f,s);if(0!=S){var k=r[x+1],P=k>>16,O=k>>8&255,N=255&k;_(f,s=u.F._writeLit(257+O,c,f,s),S-U.of0[O]),s+=U.exb[O],F(f,s=u.F._writeLit(N,h,f,s),P-U.df0[N]),s+=U.dxb[N],L+=S}}s=u.F._writeLit(256,c,f,s)}return s},u.F._copyExact=function(e,r,n,i,a){var o=a>>>3;return i[o]=n,i[o+1]=n>>>8,i[o+2]=255-i[o],i[o+3]=255-i[o+1],o+=4,i.set(new Uint8Array(e.buffer,r,n),o),a+(n+4<<3)},u.F.getTrees=function(){for(var e=u.F.U,r=u.F._hufTree(e.lhst,e.ltree,15),n=u.F._hufTree(e.dhst,e.dtree,15),i=[],a=u.F._lenCodes(e.ltree,i),o=[],l=u.F._lenCodes(e.dtree,o),f=0;f<i.length;f+=2)e.ihst[i[f]]++;for(f=0;f<o.length;f+=2)e.ihst[o[f]]++;for(var s=u.F._hufTree(e.ihst,e.itree,7),c=19;c>4&&0==e.itree[1+(e.ordr[c-1]<<1)];)c--;return[r,n,s,a,l,c,i,o]},u.F.getSecond=function(e){for(var r=[],n=0;n<e.length;n+=2)r.push(e[n+1]);return r},u.F.nonZero=function(e){for(var r="",n=0;n<e.length;n+=2)0!=e[n+1]&&(r+=(n>>1)+",");return r},u.F.contSize=function(e,r){for(var n=0,i=0;i<r.length;i++)n+=r[i]*e[1+(i<<1)];return n},u.F._codeTiny=function(e,r,n,i){for(var a=0;a<e.length;a+=2){var o=e[a],l=e[a+1];i=u.F._writeLit(o,r,n,i);var f=16==o?2:17==o?3:7;o>15&&(u.F._putsE(n,i,l,f),i+=f)}return i},u.F._lenCodes=function(e,r){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var i=0;i<n;i+=2){var a=e[i+1],o=i+3<n?e[i+3]:-1,l=i+5<n?e[i+5]:-1,f=0==i?-1:e[i-1];if(0==a&&o==a&&l==a){for(var u=i+5;u+2<n&&e[u+2]==a;)u+=2;(s=Math.min(u+1-i>>>1,138))<11?r.push(17,s-3):r.push(18,s-11),i+=2*s-2}else if(a==f&&o==a&&l==a){for(u=i+5;u+2<n&&e[u+2]==a;)u+=2;var s=Math.min(u+1-i>>>1,6);r.push(16,s-3),i+=2*s-2}else r.push(a,0)}return n>>>1},u.F._hufTree=function(e,r,n){var i=[],a=e.length,o=r.length,l=0;for(l=0;l<o;l+=2)r[l]=0,r[l+1]=0;for(l=0;l<a;l++)0!=e[l]&&i.push({lit:l,f:e[l]});var f=i.length,s=i.slice(0);if(0==f)return 0;if(1==f){var c=i[0].lit;return s=0==c?1:0,r[1+(c<<1)]=1,r[1+(s<<1)]=1,1}i.sort(function(e,r){return e.f-r.f});var h=i[0],d=i[1],g=0,p=1,v=2;for(i[0]={lit:-1,f:h.f+d.f,l:h,r:d,d:0};p!=f-1;)h=g!=p&&(v==f||i[g].f<i[v].f)?i[g++]:i[v++],d=g!=p&&(v==f||i[g].f<i[v].f)?i[g++]:i[v++],i[p++]={lit:-1,f:h.f+d.f,l:h,r:d};var A=u.F.setDepth(i[p-1],0);for(A>n&&(u.F.restrictDepth(s,n,A),A=n),l=0;l<f;l++)r[1+(s[l].lit<<1)]=s[l].d;return A},u.F.setDepth=function(e,r){return -1!=e.lit?(e.d=r,r):Math.max(u.F.setDepth(e.l,r+1),u.F.setDepth(e.r,r+1))},u.F.restrictDepth=function(e,r,n){var i=0,a=1<<n-r,o=0;for(e.sort(function(e,r){return r.d==e.d?e.f-r.f:r.d-e.d}),i=0;i<e.length&&e[i].d>r;i++){var l=e[i].d;e[i].d=r,o+=a-(1<<n-l)}for(o>>>=n-r;o>0;)(l=e[i].d)<r?(e[i].d++,o-=1<<r-l-1):i++;for(;i>=0;i--)e[i].d==r&&o<0&&(e[i].d--,o++);0!=o&&console.log("debt left")},u.F._goodIndex=function(e,r){var n=0;return r[16]<=e&&(n|=16),r[8|n]<=e&&(n|=8),r[4|n]<=e&&(n|=4),r[2|n]<=e&&(n|=2),r[1|n]<=e&&(n|=1),n},u.F._writeLit=function(e,r,n,i){return u.F._putsF(n,i,r[e<<1]),i+r[1+(e<<1)]},u.F.inflate=function(e,r){var n=Uint8Array;if(3==e[0]&&0==e[1])return r||new n(0);var i=u.F,a=i._bitsF,o=i._bitsE,l=i._decodeTiny,f=i.makeCodes,s=i.codes2map,c=i._get17,h=i.U,d=null==r;d&&(r=new n(e.length>>>2<<3));for(var g,p,v=0,A=0,w=0,m=0,b=0,y=0,U=0,F=0,_=0;0==v;)if(v=a(e,_,1),A=a(e,_+1,2),_+=3,0!=A){if(d&&(r=u.F._check(r,F+131072)),1==A&&(g=h.flmap,p=h.fdmap,y=511,U=31),2==A){w=o(e,_,5)+257,m=o(e,_+5,5)+1,b=o(e,_+10,4)+4,_+=14;for(var E=0;E<38;E+=2)h.itree[E]=0,h.itree[E+1]=0;var I=1;for(E=0;E<b;E++){var T=o(e,_+3*E,3);h.itree[1+(h.ordr[E]<<1)]=T,T>I&&(I=T)}_+=3*b,f(h.itree,I),s(h.itree,I,h.imap),g=h.lmap,p=h.dmap,_=l(h.imap,(1<<I)-1,w+m,e,_,h.ttree);var M=i._copyOut(h.ttree,0,w,h.ltree);y=(1<<M)-1;var C=i._copyOut(h.ttree,w,m,h.dtree);U=(1<<C)-1,f(h.ltree,M),s(h.ltree,M,g),f(h.dtree,C),s(h.dtree,C,p)}for(;;){var B=g[c(e,_)&y];_+=15&B;var L=B>>>4;if(L>>>8==0)r[F++]=L;else{if(256==L)break;var x=F+L-254;if(L>264){var R=h.ldef[L-257];x=F+(R>>>3)+o(e,_,7&R),_+=7&R}var S=p[c(e,_)&U];_+=15&S;var D=S>>>4,k=h.ddef[D],P=(k>>>4)+a(e,_,15&k);for(_+=15&k,d&&(r=u.F._check(r,F+131072));F<x;)r[F]=r[F++-P],r[F]=r[F++-P],r[F]=r[F++-P],r[F]=r[F++-P];F=x}}}else{0!=(7&_)&&(_+=8-(7&_));var O=4+(_>>>3),N=e[O-4]|e[O-3]<<8;d&&(r=u.F._check(r,F+N)),r.set(new n(e.buffer,e.byteOffset+O,N),F),_=O+N<<3,F+=N}return r.length==F?r:r.slice(0,F)},u.F._check=function(e,r){var n=e.length;if(r<=n)return e;var i=new Uint8Array(Math.max(n<<1,r));return i.set(e,0),i},u.F._decodeTiny=function(e,r,n,i,a,o){for(var l=u.F._bitsE,f=u.F._get17,s=0;s<n;){var c=e[f(i,a)&r];a+=15&c;var h=c>>>4;if(h<=15)o[s]=h,s++;else{var d=0,g=0;16==h?(g=3+l(i,a,2),a+=2,d=o[s-1]):17==h?(g=3+l(i,a,3),a+=3):18==h&&(g=11+l(i,a,7),a+=7);for(var p=s+g;s<p;)o[s]=d,s++}}return a},u.F._copyOut=function(e,r,n,i){for(var a=0,o=0,l=i.length>>>1;o<n;){var f=e[o+r];i[o<<1]=0,i[1+(o<<1)]=f,f>a&&(a=f),o++}for(;o<l;)i[o<<1]=0,i[1+(o<<1)]=0,o++;return a},u.F.makeCodes=function(e,r){for(var n,i,a,o,l=u.F.U,f=e.length,s=l.bl_count,c=0;c<=r;c++)s[c]=0;for(c=1;c<f;c+=2)s[e[c]]++;var h=l.next_code;for(n=0,s[0]=0,i=1;i<=r;i++)n=n+s[i-1]<<1,h[i]=n;for(a=0;a<f;a+=2)0!=(o=e[a+1])&&(e[a]=h[o],h[o]++)},u.F.codes2map=function(e,r,n){for(var i=e.length,a=u.F.U.rev15,o=0;o<i;o+=2)if(0!=e[o+1])for(var l=o>>1,f=e[o+1],s=l<<4|f,c=r-f,h=e[o]<<c,d=h+(1<<c);h!=d;)n[a[h]>>>15-r]=s,h++},u.F.revCodes=function(e,r){for(var n=u.F.U.rev15,i=15-r,a=0;a<e.length;a+=2){var o=e[a]<<r-e[a+1];e[a]=n[o]>>>i}},u.F._putsE=function(e,r,n){n<<=7&r;var i=r>>>3;e[i]|=n,e[i+1]|=n>>>8},u.F._putsF=function(e,r,n){n<<=7&r;var i=r>>>3;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},u.F._bitsE=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<n)-1},u.F._bitsF=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<n)-1},u.F._get17=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},u.F._get25=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},u.F.U=(l=Uint16Array,f=Uint32Array,{next_code:new l(16),bl_count:new l(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new l(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new f(32),flmap:new l(512),fltree:[],fdmap:new l(32),fdtree:[],lmap:new l(32768),ltree:[],ttree:[],dmap:new l(32768),dtree:[],imap:new l(512),itree:[],rev15:new l(32768),lhst:new f(286),dhst:new f(30),ihst:new f(19),lits:new f(15e3),strt:new l(65536),prev:new l(32768)}),function(){for(var e=u.F.U,r=0;r<32768;r++){var n=r;n=(4278255360&(n=(4042322160&(n=(3435973836&(n=(2863311530&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8,e.rev15[r]=(n>>>16|n<<16)>>>17}function i(e,r,n){for(;0!=r--;)e.push(0,n)}for(r=0;r<32;r++)e.ldef[r]=e.of0[r]<<3|e.exb[r],e.ddef[r]=e.df0[r]<<4|e.dxb[r];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),u.F.makeCodes(e.fltree,9),u.F.codes2map(e.fltree,9,e.flmap),u.F.revCodes(e.fltree,9),i(e.fdtree,32,5),u.F.makeCodes(e.fdtree,5),u.F.codes2map(e.fdtree,5,e.fdmap),u.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}();var h=(s={__proto__:null,default:c},[c].forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(r){if("default"!==r&&!(r in s)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})}),Object.freeze(s));let d=function(){var e={nextZero(e,r){for(;0!=e[r];)r++;return r},readUshort:(e,r)=>e[r]<<8|e[r+1],writeUshort(e,r,n){e[r]=n>>8&255,e[r+1]=255&n},readUint:(e,r)=>16777216*e[r]+(e[r+1]<<16|e[r+2]<<8|e[r+3]),writeUint(e,r,n){e[r]=n>>24&255,e[r+1]=n>>16&255,e[r+2]=n>>8&255,e[r+3]=255&n},readASCII(e,r,n){let i="";for(let a=0;a<n;a++)i+=String.fromCharCode(e[r+a]);return i},writeASCII(e,r,n){for(let i=0;i<n.length;i++)e[r+i]=n.charCodeAt(i)},readBytes(e,r,n){let i=[];for(let a=0;a<n;a++)i.push(e[r+a]);return i},pad:e=>e.length<2?`0${e}`:e,readUTF8(r,n,i){let a,o="";for(let a=0;a<i;a++)o+=`%${e.pad(r[n+a].toString(16))}`;try{a=decodeURIComponent(o)}catch(a){return e.readASCII(r,n,i)}return a}};function r(r,n,i,a){let l=n*i,f=Math.ceil(n*o(a)/8),u=new Uint8Array(4*l),s=new Uint32Array(u.buffer),{ctype:c}=a,{depth:h}=a,d=e.readUshort;if(6==c){let e=l<<2;if(8==h)for(var g=0;g<e;g+=4)u[g]=r[g],u[g+1]=r[g+1],u[g+2]=r[g+2],u[g+3]=r[g+3];if(16==h)for(g=0;g<e;g++)u[g]=r[g<<1]}else if(2==c){let e=a.tabs.tRNS;if(null==e){if(8==h)for(g=0;g<l;g++){var p=3*g;s[g]=-16777216|r[p+2]<<16|r[p+1]<<8|r[p]}if(16==h)for(g=0;g<l;g++)p=6*g,s[g]=-16777216|r[p+4]<<16|r[p+2]<<8|r[p]}else{var v=e[0];let n=e[1],i=e[2];if(8==h)for(g=0;g<l;g++){var A=g<<2;p=3*g,s[g]=-16777216|r[p+2]<<16|r[p+1]<<8|r[p],r[p]==v&&r[p+1]==n&&r[p+2]==i&&(u[A+3]=0)}if(16==h)for(g=0;g<l;g++)A=g<<2,p=6*g,s[g]=-16777216|r[p+4]<<16|r[p+2]<<8|r[p],d(r,p)==v&&d(r,p+2)==n&&d(r,p+4)==i&&(u[A+3]=0)}}else if(3==c){let e=a.tabs.PLTE,o=a.tabs.tRNS,s=o?o.length:0;if(1==h)for(var w,m=0;m<i;m++){var b=m*f,y=m*n;for(g=0;g<n;g++){A=y+g<<2;var U=3*(w=r[b+(g>>3)]>>7-((7&g)<<0)&1);u[A]=e[U],u[A+1]=e[U+1],u[A+2]=e[U+2],u[A+3]=w<s?o[w]:255}}if(2==h)for(m=0;m<i;m++)for(b=m*f,y=m*n,g=0;g<n;g++)A=y+g<<2,U=3*(w=r[b+(g>>2)]>>6-((3&g)<<1)&3),u[A]=e[U],u[A+1]=e[U+1],u[A+2]=e[U+2],u[A+3]=w<s?o[w]:255;if(4==h)for(m=0;m<i;m++)for(b=m*f,y=m*n,g=0;g<n;g++)A=y+g<<2,U=3*(w=r[b+(g>>1)]>>4-((1&g)<<2)&15),u[A]=e[U],u[A+1]=e[U+1],u[A+2]=e[U+2],u[A+3]=w<s?o[w]:255;if(8==h)for(g=0;g<l;g++)A=g<<2,U=3*(w=r[g]),u[A]=e[U],u[A+1]=e[U+1],u[A+2]=e[U+2],u[A+3]=w<s?o[w]:255}else if(4==c){if(8==h)for(g=0;g<l;g++){A=g<<2;var F,_=r[F=g<<1];u[A]=_,u[A+1]=_,u[A+2]=_,u[A+3]=r[F+1]}if(16==h)for(g=0;g<l;g++)A=g<<2,_=r[F=g<<2],u[A]=_,u[A+1]=_,u[A+2]=_,u[A+3]=r[F+2]}else if(0==c)for(v=a.tabs.tRNS?a.tabs.tRNS:-1,m=0;m<i;m++){let e=m*f,i=m*n;if(1==h)for(var E=0;E<n;E++){var I=(_=255*(r[e+(E>>>3)]>>>7-(7&E)&1))==255*v?0:255;s[i+E]=I<<24|_<<16|_<<8|_}else if(2==h)for(E=0;E<n;E++)I=(_=85*(r[e+(E>>>2)]>>>6-((3&E)<<1)&3))==85*v?0:255,s[i+E]=I<<24|_<<16|_<<8|_;else if(4==h)for(E=0;E<n;E++)I=(_=17*(r[e+(E>>>1)]>>>4-((1&E)<<2)&15))==17*v?0:255,s[i+E]=I<<24|_<<16|_<<8|_;else if(8==h)for(E=0;E<n;E++)I=(_=r[e+E])==v?0:255,s[i+E]=I<<24|_<<16|_<<8|_;else if(16==h)for(E=0;E<n;E++)_=r[e+(E<<1)],I=d(r,e+(E<<1))==v?0:255,s[i+E]=I<<24|_<<16|_<<8|_}return u}function n(e,r,n,f){let u=new Uint8Array((Math.ceil(n*o(e)/8)+1+e.interlace)*f);return r=e.tabs.CgBI?a(r,u):i(r,u),0==e.interlace?r=l(r,e,0,n,f):1==e.interlace&&(r=function(e,r){let n=r.width,i=r.height,a=o(r),f=a>>3,u=Math.ceil(n*a/8),s=new Uint8Array(i*u),c=0,h=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],g=[8,8,8,4,4,2,2],p=[8,8,4,4,2,2,1],v=0;for(;v<7;){let o=g[v],w=p[v],m=0,b=0,y=h[v];for(;y<i;)y+=o,b++;let U=d[v];for(;U<n;)U+=w,m++;let F=Math.ceil(m*a/8);l(e,r,c,m,b);let _=0,E=h[v];for(;E<i;){let r=d[v],i=c+_*F<<3;for(;r<n;){var A;if(1==a&&(A=(A=e[i>>3])>>7-(7&i)&1,s[E*u+(r>>3)]|=A<<7-((7&r)<<0)),2==a&&(A=(A=e[i>>3])>>6-(7&i)&3,s[E*u+(r>>2)]|=A<<6-((3&r)<<1)),4==a&&(A=(A=e[i>>3])>>4-(7&i)&15,s[E*u+(r>>1)]|=A<<4-((1&r)<<2)),a>=8){let n=E*u+r*f;for(let r=0;r<f;r++)s[n+r]=e[(i>>3)+r]}i+=a,r+=w}_++,E+=o}m*b!=0&&(c+=b*(1+F)),v+=1}return s}(r,e)),r}function i(e,r){return a(new Uint8Array(e.buffer,2,e.length-6),r)}var a=function(){let e={H:{}};return e.H.N=function(r,n){let i=Uint8Array,a,o,l=0,f=0,u=0,s=0,c=0,h=0,d=0,g=0,p=0;if(3==r[0]&&0==r[1])return n||new i(0);let v=e.H,A=v.b,w=v.e,m=v.R,b=v.n,y=v.A,U=v.Z,F=v.m,_=null==n;for(_&&(n=new i(r.length>>>2<<5));0==l;)if(l=A(r,p,1),f=A(r,p+1,2),p+=3,0!=f){if(_&&(n=e.H.W(n,g+131072)),1==f&&(a=F.J,o=F.h,h=511,d=31),2==f){u=w(r,p,5)+257,s=w(r,p+5,5)+1,c=w(r,p+10,4)+4,p+=14;let e=1;for(var E=0;E<38;E+=2)F.Q[E]=0,F.Q[E+1]=0;for(E=0;E<c;E++){let n=w(r,p+3*E,3);F.Q[1+(F.X[E]<<1)]=n,n>e&&(e=n)}p+=3*c,b(F.Q,e),y(F.Q,e,F.u),a=F.w,o=F.d,p=m(F.u,(1<<e)-1,u+s,r,p,F.v);let n=v.V(F.v,0,u,F.C);h=(1<<n)-1;let i=v.V(F.v,u,s,F.D);d=(1<<i)-1,b(F.C,n),y(F.C,n,a),b(F.D,i),y(F.D,i,o)}for(;;){let e=a[U(r,p)&h];p+=15&e;let i=e>>>4;if(i>>>8==0)n[g++]=i;else{if(256==i)break;{let e=g+i-254;if(i>264){let n=F.q[i-257];e=g+(n>>>3)+w(r,p,7&n),p+=7&n}let a=o[U(r,p)&d];p+=15&a;let l=a>>>4,f=F.c[l],u=(f>>>4)+A(r,p,15&f);for(p+=15&f;g<e;)n[g]=n[g++-u],n[g]=n[g++-u],n[g]=n[g++-u],n[g]=n[g++-u];g=e}}}}else{0!=(7&p)&&(p+=8-(7&p));let a=4+(p>>>3),o=r[a-4]|r[a-3]<<8;_&&(n=e.H.W(n,g+o)),n.set(new i(r.buffer,r.byteOffset+a,o),g),p=a+o<<3,g+=o}return n.length==g?n:n.slice(0,g)},e.H.W=function(e,r){let n=e.length;if(r<=n)return e;let i=new Uint8Array(n<<1);return i.set(e,0),i},e.H.R=function(r,n,i,a,o,l){let f=e.H.e,u=e.H.Z,s=0;for(;s<i;){let e=r[u(a,o)&n];o+=15&e;let i=e>>>4;if(i<=15)l[s]=i,s++;else{let e=0,r=0;16==i?(r=3+f(a,o,2),o+=2,e=l[s-1]):17==i?(r=3+f(a,o,3),o+=3):18==i&&(r=11+f(a,o,7),o+=7);let n=s+r;for(;s<n;)l[s]=e,s++}}return o},e.H.V=function(e,r,n,i){let a=0,o=0,l=i.length>>>1;for(;o<n;){let n=e[o+r];i[o<<1]=0,i[1+(o<<1)]=n,n>a&&(a=n),o++}for(;o<l;)i[o<<1]=0,i[1+(o<<1)]=0,o++;return a},e.H.n=function(r,n){let i,a,o,l;let f=e.H.m,u=r.length,s=f.j;for(var c=0;c<=n;c++)s[c]=0;for(c=1;c<u;c+=2)s[r[c]]++;let h=f.K;for(i=0,s[0]=0,a=1;a<=n;a++)i=i+s[a-1]<<1,h[a]=i;for(o=0;o<u;o+=2)0!=(l=r[o+1])&&(r[o]=h[l],h[l]++)},e.H.A=function(r,n,i){let a=r.length,o=e.H.m.r;for(let e=0;e<a;e+=2)if(0!=r[e+1]){let a=e>>1,l=r[e+1],f=a<<4|l,u=n-l,s=r[e]<<u,c=s+(1<<u);for(;s!=c;)i[o[s]>>>15-n]=f,s++}},e.H.l=function(r,n){let i=e.H.m.r,a=15-n;for(let e=0;e<r.length;e+=2){let o=r[e]<<n-r[e+1];r[e]=i[o]>>>a}},e.H.M=function(e,r,n){n<<=7&r;let i=r>>>3;e[i]|=n,e[i+1]|=n>>>8},e.H.I=function(e,r,n){n<<=7&r;let i=r>>>3;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},e.H.e=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<n)-1},e.H.b=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<n)-1},e.H.Z=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},e.H.i=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},e.H.m=function(){let e=Uint16Array,r=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new e(65536),g:new e(32768)}}(),function(){let r=e.H.m;for(var n=0;n<32768;n++){let e=n;e=(4278255360&(e=(4042322160&(e=(3435973836&(e=(2863311530&e)>>>1|(1431655765&e)<<1))>>>2|(858993459&e)<<2))>>>4|(252645135&e)<<4))>>>8|(16711935&e)<<8,r.r[n]=(e>>>16|e<<16)>>>17}function i(e,r,n){for(;0!=r--;)e.push(0,n)}for(n=0;n<32;n++)r.q[n]=r.S[n]<<3|r.T[n],r.c[n]=r.p[n]<<4|r.z[n];i(r._,144,8),i(r._,112,9),i(r._,24,7),i(r._,8,8),e.H.n(r._,9),e.H.A(r._,9,r.J),e.H.l(r._,9),i(r.$,32,5),e.H.n(r.$,5),e.H.A(r.$,5,r.h),e.H.l(r.$,5),i(r.Q,19,0),i(r.C,286,0),i(r.D,30,0),i(r.v,320,0)}(),e.H.N}();function o(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function l(e,r,n,i,a){let l,u,s=o(r),c=Math.ceil(i*s/8);s=Math.ceil(s/8);let h=e[n],d=0;if(h>1&&(e[n]=[0,0,1][h-2]),3==h)for(d=s;d<c;d++)e[d+1]=e[d+1]+(e[d+1-s]>>>1)&255;for(let r=0;r<a;r++)if(h=e[(u=(l=n+r*c)+r+1)-1],d=0,0==h)for(;d<c;d++)e[l+d]=e[u+d];else if(1==h){for(;d<s;d++)e[l+d]=e[u+d];for(;d<c;d++)e[l+d]=e[u+d]+e[l+d-s]}else if(2==h)for(;d<c;d++)e[l+d]=e[u+d]+e[l+d-c];else if(3==h){for(;d<s;d++)e[l+d]=e[u+d]+(e[l+d-c]>>>1);for(;d<c;d++)e[l+d]=e[u+d]+(e[l+d-c]+e[l+d-s]>>>1)}else{for(;d<s;d++)e[l+d]=e[u+d]+f(0,e[l+d-c],0);for(;d<c;d++)e[l+d]=e[u+d]+f(e[l+d-s],e[l+d-c],e[l+d-s-c])}return e}function f(e,r,n){let i=e+r-n,a=i-e,o=i-r,l=i-n;return a*a<=o*o&&a*a<=l*l?e:o*o<=l*l?r:n}function u(e,r,n,i,a,o,l,f,u){let s=Math.min(r,a),c=Math.min(n,o),h=0,d=0;for(let n=0;n<c;n++)for(let o=0;o<s;o++)if(l>=0&&f>=0?(h=n*r+o<<2,d=(f+n)*a+l+o<<2):(h=(-f+n)*r-l+o<<2,d=n*a+o<<2),0==u)i[d]=e[h],i[d+1]=e[h+1],i[d+2]=e[h+2],i[d+3]=e[h+3];else if(1==u){var g=e[h+3]*(1/255),p=e[h]*g,v=e[h+1]*g,A=e[h+2]*g,w=i[d+3]*(1/255),m=i[d]*w,b=i[d+1]*w,y=i[d+2]*w;let r=1-g,n=g+w*r,a=0==n?0:1/n;i[d+3]=255*n,i[d+0]=(p+m*r)*a,i[d+1]=(v+b*r)*a,i[d+2]=(A+y*r)*a}else if(2==u)g=e[h+3],p=e[h],v=e[h+1],A=e[h+2],w=i[d+3],m=i[d],b=i[d+1],y=i[d+2],g==w&&p==m&&v==b&&A==y?(i[d]=0,i[d+1]=0,i[d+2]=0,i[d+3]=0):(i[d]=p,i[d+1]=v,i[d+2]=A,i[d+3]=g);else if(3==u){if(g=e[h+3],p=e[h],v=e[h+1],A=e[h+2],w=i[d+3],m=i[d],b=i[d+1],y=i[d+2],g==w&&p==m&&v==b&&A==y)continue;if(g<220&&w>20)return!1}return!0}return{decode:function(r){let o=new Uint8Array(r),l=8,f=e.readUshort,u=e.readUint,s={tabs:{},frames:[]},c=new Uint8Array(o.length),h,d=0,g=0,p=[137,80,78,71,13,10,26,10];for(var v,A=0;A<8;A++)if(o[A]!=p[A])throw"The input is not a PNG file!";for(;l<o.length;){let r=e.readUint(o,l);l+=4;let p=e.readASCII(o,l,4);if(l+=4,"IHDR"==p)w=l,s.width=e.readUint(o,w),w+=4,s.height=e.readUint(o,w),w+=4,s.depth=o[w],w++,s.ctype=o[w],w++,s.compress=o[w],w++,s.filter=o[w],w++,s.interlace=o[w],w++;else if("iCCP"==p){for(var w,m,b=l;0!=o[b];)b++;e.readASCII(o,l,b-l),o[b+1];let n=o.slice(b+2,l+r),f=null;try{f=i(n)}catch(e){f=a(n)}s.tabs[p]=f}else if("CgBI"==p)s.tabs[p]=o.slice(l,l+4);else if("IDAT"==p){for(A=0;A<r;A++)c[d+A]=o[l+A];d+=r}else if("acTL"==p)s.tabs[p]={num_frames:u(o,l),num_plays:u(o,l+4)},h=new Uint8Array(o.length);else if("fcTL"==p){0!=g&&((v=s.frames[s.frames.length-1]).data=n(s,h.slice(0,g),v.rect.width,v.rect.height),g=0);let e={x:u(o,l+12),y:u(o,l+16),width:u(o,l+4),height:u(o,l+8)},r=f(o,l+22),i={rect:e,delay:Math.round(1e3*(r=f(o,l+20)/(0==r?100:r))),dispose:o[l+24],blend:o[l+25]};s.frames.push(i)}else if("fdAT"==p){for(A=0;A<r-4;A++)h[g+A]=o[l+A+4];g+=r-4}else if("pHYs"==p)s.tabs[p]=[e.readUint(o,l),e.readUint(o,l+4),o[l+8]];else if("cHRM"==p)for(A=0,s.tabs[p]=[];A<8;A++)s.tabs[p].push(e.readUint(o,l+4*A));else if("tEXt"==p||"zTXt"==p){null==s.tabs[p]&&(s.tabs[p]={});var y=e.nextZero(o,l),U=e.readASCII(o,l,y-l),F=l+r-y-1;if("tEXt"==p)m=e.readASCII(o,y+1,F);else{var _=i(o.slice(y+2,y+2+F));m=e.readUTF8(_,0,_.length)}s.tabs[p][U]=m}else if("iTXt"==p){null==s.tabs[p]&&(s.tabs[p]={}),y=0,b=l,y=e.nextZero(o,b),U=e.readASCII(o,b,y-b);let n=o[b=y+1];o[b+1],b+=2,y=e.nextZero(o,b),e.readASCII(o,b,y-b),b=y+1,y=e.nextZero(o,b),e.readUTF8(o,b,y-b),F=r-((b=y+1)-l),0==n?m=e.readUTF8(o,b,F):(_=i(o.slice(b,b+F)),m=e.readUTF8(_,0,_.length)),s.tabs[p][U]=m}else if("PLTE"==p)s.tabs[p]=e.readBytes(o,l,r);else if("hIST"==p){let e=s.tabs.PLTE.length/3;for(A=0,s.tabs[p]=[];A<e;A++)s.tabs[p].push(f(o,l+2*A))}else if("tRNS"==p)3==s.ctype?s.tabs[p]=e.readBytes(o,l,r):0==s.ctype?s.tabs[p]=f(o,l):2==s.ctype&&(s.tabs[p]=[f(o,l),f(o,l+2),f(o,l+4)]);else if("gAMA"==p)s.tabs[p]=e.readUint(o,l)/1e5;else if("sRGB"==p)s.tabs[p]=o[l];else if("bKGD"==p)0==s.ctype||4==s.ctype?s.tabs[p]=[f(o,l)]:2==s.ctype||6==s.ctype?s.tabs[p]=[f(o,l),f(o,l+2),f(o,l+4)]:3==s.ctype&&(s.tabs[p]=o[l]);else if("IEND"==p)break;l+=r,e.readUint(o,l),l+=4}return 0!=g&&((v=s.frames[s.frames.length-1]).data=n(s,h.slice(0,g),v.rect.width,v.rect.height)),s.data=n(s,c,s.width,s.height),delete s.compress,delete s.interlace,delete s.filter,s},toRGBA8:function(e){let n=e.width,i=e.height;if(null==e.tabs.acTL)return[r(e.data,n,i,e).buffer];let a=[];null==e.frames[0].data&&(e.frames[0].data=e.data);let o=n*i*4,l=new Uint8Array(o),f=new Uint8Array(o),s=new Uint8Array(o);for(let h=0;h<e.frames.length;h++){let d=e.frames[h],g=d.rect.x,p=d.rect.y,v=d.rect.width,A=d.rect.height,w=r(d.data,v,A,e);if(0!=h)for(var c=0;c<o;c++)s[c]=l[c];if(0==d.blend?u(w,v,A,l,n,i,g,p,0):1==d.blend&&u(w,v,A,l,n,i,g,p,1),a.push(l.buffer.slice(0)),0==d.dispose);else if(1==d.dispose)u(f,v,A,l,n,i,g,p,0);else if(2==d.dispose)for(c=0;c<o;c++)l[c]=s[c]}return a},_paeth:f,_copyTile:u,_bin:e}}();!function(){let{_copyTile:e}=d,{_bin:r}=d,n=d._paeth;var i={table:function(){let e=new Uint32Array(256);for(let r=0;r<256;r++){let n=r;for(let e=0;e<8;e++)1&n?n=3988292384^n>>>1:n>>>=1;e[r]=n}return e}(),update(e,r,n,a){for(let o=0;o<a;o++)e=i.table[255&(e^r[n+o])]^e>>>8;return e},crc:(e,r,n)=>4294967295^i.update(4294967295,e,r,n)};function a(e,r,n,i){r[n]+=e[0]*i>>4,r[n+1]+=e[1]*i>>4,r[n+2]+=e[2]*i>>4,r[n+3]+=e[3]*i>>4}function o(e){return Math.max(0,Math.min(255,e))}function l(e,r){let n=e[0]-r[0],i=e[1]-r[1],a=e[2]-r[2],o=e[3]-r[3];return n*n+i*i+a*a+o*o}function f(e,r,n,i,f,u,s){null==s&&(s=1);let c=i.length,h=[];for(var d,g=0;g<c;g++){let e=i[g];h.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(g=0;g<c;g++){let e=4294967295;for(var p=0,v=0;v<c;v++){var A=l(h[g],h[v]);v!=g&&A<e&&(e=A,p=v)}}let w=new Uint32Array(f.buffer),m=new Int16Array(r*n*4),b=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(g=0;g<b.length;g++)b[g]=255*((b[g]+.5)/16-.5);for(let f=0;f<n;f++)for(let y=0;y<r;y++){g=4*(f*r+y),2!=s?d=[o(e[g]+m[g]),o(e[g+1]+m[g+1]),o(e[g+2]+m[g+2]),o(e[g+3]+m[g+3])]:(A=b[4*(3&f)+(3&y)],d=[o(e[g]+A),o(e[g+1]+A),o(e[g+2]+A),o(e[g+3]+A)]),p=0;let U=16777215;for(v=0;v<c;v++){let e=l(d,h[v]);e<U&&(U=e,p=v)}let F=h[p],_=[d[0]-F[0],d[1]-F[1],d[2]-F[2],d[3]-F[3]];1==s&&(y!=r-1&&a(_,m,g+4,7),f!=n-1&&(0!=y&&a(_,m,g+4*r-4,3),a(_,m,g+4*r,5),y!=r-1&&a(_,m,g+4*r+4,1))),u[g>>2]=p,w[g>>2]=i[p]}}function u(e,n,a,o,l){null==l&&(l={});let{crc:f}=i,u=r.writeUint,s=r.writeUshort,c=r.writeASCII,h=8,d=e.frames.length>1,g,p=!1,v=33+(d?20:0);if(null!=l.sRGB&&(v+=13),null!=l.pHYs&&(v+=21),null!=l.iCCP&&(v+=21+(g=pako.deflate(l.iCCP)).length+4),3==e.ctype){for(var A=e.plte.length,w=0;w<A;w++)e.plte[w]>>>24!=255&&(p=!0);v+=8+3*A+4+(p?8+1*A+4:0)}for(var m=0;m<e.frames.length;m++)d&&(v+=38),v+=(F=e.frames[m]).cimg.length+12,0!=m&&(v+=4);let b=new Uint8Array(v+=12),y=[137,80,78,71,13,10,26,10];for(w=0;w<8;w++)b[w]=y[w];if(u(b,h,13),c(b,h+=4,"IHDR"),u(b,h+=4,n),u(b,h+=4,a),b[h+=4]=e.depth,b[++h]=e.ctype,b[++h]=0,b[++h]=0,b[++h]=0,u(b,++h,f(b,h-17,17)),h+=4,null!=l.sRGB&&(u(b,h,1),c(b,h+=4,"sRGB"),b[h+=4]=l.sRGB,u(b,++h,f(b,h-5,5)),h+=4),null!=l.iCCP){let e=13+g.length;u(b,h,e),c(b,h+=4,"iCCP"),c(b,h+=4,"ICC profile"),h+=13,b.set(g,h),u(b,h+=g.length,f(b,h-(e+4),e+4)),h+=4}if(null!=l.pHYs&&(u(b,h,9),c(b,h+=4,"pHYs"),u(b,h+=4,l.pHYs[0]),u(b,h+=4,l.pHYs[1]),b[h+=4]=l.pHYs[2],u(b,++h,f(b,h-13,13)),h+=4),d&&(u(b,h,8),c(b,h+=4,"acTL"),u(b,h+=4,e.frames.length),u(b,h+=4,null!=l.loop?l.loop:0),u(b,h+=4,f(b,h-12,12)),h+=4),3==e.ctype){for(u(b,h,3*(A=e.plte.length)),c(b,h+=4,"PLTE"),h+=4,w=0;w<A;w++){let r=3*w,n=e.plte[w],i=255&n,a=n>>>8&255,o=n>>>16&255;b[h+r+0]=i,b[h+r+1]=a,b[h+r+2]=o}if(u(b,h+=3*A,f(b,h-3*A-4,3*A+4)),h+=4,p){for(u(b,h,A),c(b,h+=4,"tRNS"),h+=4,w=0;w<A;w++)b[h+w]=e.plte[w]>>>24&255;u(b,h+=A,f(b,h-A-4,A+4)),h+=4}}let U=0;for(m=0;m<e.frames.length;m++){var F=e.frames[m];d&&(u(b,h,26),c(b,h+=4,"fcTL"),u(b,h+=4,U++),u(b,h+=4,F.rect.width),u(b,h+=4,F.rect.height),u(b,h+=4,F.rect.x),u(b,h+=4,F.rect.y),s(b,h+=4,o[m]),s(b,h+=2,1e3),b[h+=2]=F.dispose,b[++h]=F.blend,u(b,++h,f(b,h-30,30)),h+=4);let r=F.cimg;u(b,h,(A=r.length)+(0==m?0:4));let n=h+=4;c(b,h,0==m?"IDAT":"fdAT"),h+=4,0!=m&&(u(b,h,U++),h+=4),b.set(r,h),u(b,h+=A,f(b,n,h-n)),h+=4}return u(b,h,0),c(b,h+=4,"IEND"),u(b,h+=4,f(b,h-4,4)),h+=4,b.buffer}function s(e,r,i){for(let a=0;a<e.frames.length;a++){let o=e.frames[a];o.rect.width;let l=o.rect.height,f=new Uint8Array(l*o.bpl+l);o.cimg=function(e,r,i,a,o,l,f){let u=[],s,c=[0,1,2,3,4];-1!=l?c=[l]:(r*a>5e5||1==i)&&(c=[0]),f&&(s={level:0});for(var d=0;d<c.length;d++){for(let l=0;l<r;l++)!function(e,r,i,a,o,l){let f=i*a,u=f+i;if(e[u]=l,u++,0==l){if(a<500)for(var s=0;s<a;s++)e[u+s]=r[f+s];else e.set(new Uint8Array(r.buffer,f,a),u)}else if(1==l){for(s=0;s<o;s++)e[u+s]=r[f+s];for(s=o;s<a;s++)e[u+s]=r[f+s]-r[f+s-o]+256&255}else if(0==i){for(s=0;s<o;s++)e[u+s]=r[f+s];if(2==l)for(s=o;s<a;s++)e[u+s]=r[f+s];if(3==l)for(s=o;s<a;s++)e[u+s]=r[f+s]-(r[f+s-o]>>1)+256&255;if(4==l)for(s=o;s<a;s++)e[u+s]=r[f+s]-n(r[f+s-o],0,0)+256&255}else{if(2==l)for(s=0;s<a;s++)e[u+s]=r[f+s]+256-r[f+s-a]&255;if(3==l){for(s=0;s<o;s++)e[u+s]=r[f+s]+256-(r[f+s-a]>>1)&255;for(s=o;s<a;s++)e[u+s]=r[f+s]+256-(r[f+s-a]+r[f+s-o]>>1)&255}if(4==l){for(s=0;s<o;s++)e[u+s]=r[f+s]+256-n(0,r[f+s-a],0)&255;for(s=o;s<a;s++)e[u+s]=r[f+s]+256-n(r[f+s-o],r[f+s-a],r[f+s-o-a])&255}}}(o,e,l,a,i,c[d]);u.push(h.deflate(o,s))}let g,p=1e9;for(d=0;d<u.length;d++)u[d].length<p&&(g=d,p=u[d].length);return u[g]}(o.img,l,o.bpp,o.bpl,f,r,i)}}function c(r,n,i,a,o){let l=o[0],u=o[1],s=o[2],c=o[3],h=o[4],d=o[5],A=6,w=8,m=255;for(var b=0;b<r.length;b++){let e=new Uint8Array(r[b]);for(var y=e.length,U=0;U<y;U+=4)m&=e[U+3]}let F=255!=m,_=function(r,n,i,a,o,l){let f=[];for(var u,s=0;s<r.length;s++){let u=new Uint8Array(r[s]),g=new Uint32Array(u.buffer),v=0,A=0,w=n,m=i,b=a?1:0;if(0!=s){let y=l||a||1==s||0!=f[s-2].dispose?1:2,U=0,F=1e9;for(let e=0;e<y;e++){var c,h=new Uint8Array(r[s-1-e]);let a=new Uint32Array(r[s-1-e]),l=n,f=i,u=-1,p=-1;for(let e=0;e<i;e++)for(let r=0;r<n;r++)g[d=e*n+r]!=a[d]&&(r<l&&(l=r),r>u&&(u=r),e<f&&(f=e),e>p&&(p=e));-1==u&&(l=f=u=p=0),o&&(1==(1&l)&&l--,1==(1&f)&&f--);let b=(u-l+1)*(p-f+1);b<F&&(F=b,U=e,v=l,A=f,w=u-l+1,m=p-f+1)}h=new Uint8Array(r[s-1-U]),1==U&&(f[s-1].dispose=2),e(h,n,i,c=new Uint8Array(w*m*4),w,m,-v,-A,0),1==(b=e(u,n,i,c,w,m,-v,-A,3)?1:0)?p(u,n,i,c,{x:v,y:A,width:w,height:m}):e(u,n,i,c,w,m,-v,-A,0)}else c=u.slice(0);f.push({rect:{x:v,y:A,width:w,height:m},img:c,blend:b,dispose:0})}if(a)for(s=0;s<f.length;s++){if(1==(u=f[s]).blend)continue;let e=u.rect,a=f[s-1].rect,l=Math.min(e.x,a.x),c=Math.min(e.y,a.y),h={x:l,y:c,width:Math.max(e.x+e.width,a.x+a.width)-l,height:Math.max(e.y+e.height,a.y+a.height)-c};f[s-1].dispose=1,s-1!=0&&g(r,n,i,f,s-1,h,o),g(r,n,i,f,s,h,o)}if(1!=r.length)for(var d=0;d<f.length;d++)(u=f[d]).rect.width,u.rect.height;return f}(r,n,i,l,u,s),E={},I=[],T=[];if(0!=a){let e=[];for(U=0;U<_.length;U++)e.push(_[U].img.buffer);let r=v(function(e){let r=0;for(var n=0;n<e.length;n++)r+=e[n].byteLength;let i=new Uint8Array(r),a=0;for(n=0;n<e.length;n++){let r=new Uint8Array(e[n]),o=r.length;for(let e=0;e<o;e+=4){let n=r[e],o=r[e+1],l=r[e+2],f=r[e+3];0==f&&(n=o=l=0),i[a+e]=n,i[a+e+1]=o,i[a+e+2]=l,i[a+e+3]=f}a+=o}return i.buffer}(e),a);for(U=0;U<r.plte.length;U++)I.push(r.plte[U].est.rgba);let n=0;for(U=0;U<_.length;U++){let e=(C=_[U]).img.length;var M=new Uint8Array(r.inds.buffer,n>>2,e>>2);T.push(M);let i=new Uint8Array(r.abuf,n,e);d&&f(C.img,C.rect.width,C.rect.height,I,i,M),C.img.set(i),n+=e}}else for(b=0;b<_.length;b++){var C=_[b];let e=new Uint32Array(C.img.buffer);var B=C.rect.width;for(M=new Uint8Array(y=e.length),T.push(M),U=0;U<y;U++){let r=e[U];if(0!=U&&r==e[U-1])M[U]=M[U-1];else if(U>B&&r==e[U-B])M[U]=M[U-B];else{let e=E[r];if(null==e&&(E[r]=e=I.length,I.push(r),I.length>=300))break;M[U]=e}}}let L=I.length;for(L<=256&&0==h&&(w=Math.max(w=L<=2?1:L<=4?2:L<=16?4:8,c)),b=0;b<_.length;b++){(C=_[b]).rect.x,C.rect.y,B=C.rect.width;let e=C.rect.height,r=C.img;new Uint32Array(r.buffer);let n=4*B,i=4;if(L<=256&&0==h){var x=new Uint8Array((n=Math.ceil(w*B/8))*e);let a=T[b];for(let r=0;r<e;r++){U=r*n;let e=r*B;if(8==w)for(var R=0;R<B;R++)x[U+R]=a[e+R];else if(4==w)for(R=0;R<B;R++)x[U+(R>>1)]|=a[e+R]<<4-4*(1&R);else if(2==w)for(R=0;R<B;R++)x[U+(R>>2)]|=a[e+R]<<6-2*(3&R);else if(1==w)for(R=0;R<B;R++)x[U+(R>>3)]|=a[e+R]<<7-1*(7&R)}r=x,A=3,i=1}else if(0==F&&1==_.length){x=new Uint8Array(B*e*3);let a=B*e;for(U=0;U<a;U++){let e=3*U,n=4*U;x[e]=r[n],x[e+1]=r[n+1],x[e+2]=r[n+2]}r=x,A=2,i=3,n=3*B}C.img=r,C.bpl=n,C.bpp=i}return{ctype:A,depth:w,plte:I,frames:_}}function g(r,n,i,a,o,l,f){let u=Uint8Array,s=Uint32Array,c=new u(r[o-1]),h=new s(r[o-1]),d=o+1<r.length?new u(r[o+1]):null,g=new u(r[o]),v=new s(g.buffer),A=n,w=i,m=-1,b=-1;for(let e=0;e<l.height;e++)for(let r=0;r<l.width;r++){let i=l.x+r,f=l.y+e,u=f*n+i,s=v[u];0==s||0==a[o-1].dispose&&h[u]==s&&(null==d||0!=d[4*u+3])||(i<A&&(A=i),i>m&&(m=i),f<w&&(w=f),f>b&&(b=f))}-1==m&&(A=w=m=b=0),f&&(1==(1&A)&&A--,1==(1&w)&&w--),l={x:A,y:w,width:m-A+1,height:b-w+1};let y=a[o];y.rect=l,y.blend=1,y.img=new Uint8Array(l.width*l.height*4),0==a[o-1].dispose?(e(c,n,i,y.img,l.width,l.height,-l.x,-l.y,0),p(g,n,i,y.img,l)):e(g,n,i,y.img,l.width,l.height,-l.x,-l.y,0)}function p(r,n,i,a,o){e(r,n,i,a,o.width,o.height,-o.x,-o.y,2)}function v(e,r){let n;let i=new Uint8Array(e),a=i.slice(0),o=new Uint32Array(a.buffer),l=A(a,r),f=l[0],u=l[1],s=i.length,c=new Uint8Array(s>>2);if(i.length<2e7)for(var h=0;h<s;h+=4)n=w(f,d=i[h]*(1/255),g=i[h+1]*(1/255),p=i[h+2]*(1/255),v=i[h+3]*(1/255)),c[h>>2]=n.ind,o[h>>2]=n.est.rgba;else for(h=0;h<s;h+=4){var d=i[h]*(1/255),g=i[h+1]*(1/255),p=i[h+2]*(1/255),v=i[h+3]*(1/255);for(n=f;n.left;)n=0>=m(n.est,d,g,p,v)?n.left:n.right;c[h>>2]=n.ind,o[h>>2]=n.est.rgba}return{abuf:a.buffer,inds:c,plte:u}}function A(e,r,n){null==n&&(n=1e-4);let i=new Uint32Array(e.buffer),a={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};a.bst=y(e,a.i0,a.i1),a.est=U(a.bst);let o=[a];for(;o.length<r;){let r=0,a=0;for(var l=0;l<o.length;l++)o[l].est.L>r&&(r=o[l].est.L,a=l);if(r<n)break;let f=o[a],u=function(e,r,n,i,a,o){for(i-=4;n<i;){for(;b(e,n,a)<=o;)n+=4;for(;b(e,i,a)>o;)i-=4;if(n>=i)break;let l=r[n>>2];r[n>>2]=r[i>>2],r[i>>2]=l,n+=4,i-=4}for(;b(e,n,a)>o;)n-=4;return n+4}(e,i,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=u||f.i1<=u){f.est.L=0;continue}let s={i0:f.i0,i1:u,bst:null,est:null,tdst:0,left:null,right:null};s.bst=y(e,s.i0,s.i1),s.est=U(s.bst);let c={i0:u,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};for(l=0,c.bst={R:[],m:[],N:f.bst.N-s.bst.N};l<16;l++)c.bst.R[l]=f.bst.R[l]-s.bst.R[l];for(l=0;l<4;l++)c.bst.m[l]=f.bst.m[l]-s.bst.m[l];c.est=U(c.bst),f.left=s,f.right=c,o[a]=s,o.push(c)}for(o.sort((e,r)=>r.bst.N-e.bst.N),l=0;l<o.length;l++)o[l].ind=l;return[a,o]}function w(e,r,n,i,a){if(null==e.left)return e.tdst=function(e,r,n,i,a){let o=r-e[0],l=n-e[1],f=i-e[2],u=a-e[3];return o*o+l*l+f*f+u*u}(e.est.q,r,n,i,a),e;let o=m(e.est,r,n,i,a),l=e.left,f=e.right;o>0&&(l=e.right,f=e.left);let u=w(l,r,n,i,a);if(u.tdst<=o*o)return u;let s=w(f,r,n,i,a);return s.tdst<u.tdst?s:u}function m(e,r,n,i,a){let{e:o}=e;return o[0]*r+o[1]*n+o[2]*i+o[3]*a-e.eMq}function b(e,r,n){return e[r]*n[0]+e[r+1]*n[1]+e[r+2]*n[2]+e[r+3]*n[3]}function y(e,r,n){let i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=[0,0,0,0];for(let o=r;o<n;o+=4){let r=e[o]*(1/255),n=e[o+1]*(1/255),l=e[o+2]*(1/255),f=e[o+3]*(1/255);a[0]+=r,a[1]+=n,a[2]+=l,a[3]+=f,i[0]+=r*r,i[1]+=r*n,i[2]+=r*l,i[3]+=r*f,i[5]+=n*n,i[6]+=n*l,i[7]+=n*f,i[10]+=l*l,i[11]+=l*f,i[15]+=f*f}return i[4]=i[1],i[8]=i[2],i[9]=i[6],i[12]=i[3],i[13]=i[7],i[14]=i[11],{R:i,m:a,N:n-r>>2}}function U(e){let{R:r}=e,{m:n}=e,{N:i}=e,a=n[0],o=n[1],l=n[2],f=n[3],u=0==i?0:1/i,s=[r[0]-a*a*u,r[1]-a*o*u,r[2]-a*l*u,r[3]-a*f*u,r[4]-o*a*u,r[5]-o*o*u,r[6]-o*l*u,r[7]-o*f*u,r[8]-l*a*u,r[9]-l*o*u,r[10]-l*l*u,r[11]-l*f*u,r[12]-f*a*u,r[13]-f*o*u,r[14]-f*l*u,r[15]-f*f*u],c=[Math.random(),Math.random(),Math.random(),Math.random()],h=0,d=0;if(0!=i)for(let e=0;e<16&&(c=F.multVec(s,c),d=Math.sqrt(F.dot(c,c)),c=F.sml(1/d,c),!(0!=e&&1e-9>Math.abs(d-h)));e++)h=d;let g=[a*u,o*u,l*u,f*u];return{Cov:s,q:g,e:c,L:h,eMq255:F.dot(F.sml(255,g),c),eMq:F.dot(c,g),rgba:(Math.round(255*g[3])<<24|Math.round(255*g[2])<<16|Math.round(255*g[1])<<8|Math.round(255*g[0])<<0)>>>0}}var F={multVec:(e,r)=>[e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],e[4]*r[0]+e[5]*r[1]+e[6]*r[2]+e[7]*r[3],e[8]*r[0]+e[9]*r[1]+e[10]*r[2]+e[11]*r[3],e[12]*r[0]+e[13]*r[1]+e[14]*r[2]+e[15]*r[3]],dot:(e,r)=>e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],sml:(e,r)=>[e*r[0],e*r[1],e*r[2],e*r[3]]};d.encode=function(e,r,n,i,a,o,l){null==i&&(i=0),null==l&&(l=!1);let f=c(e,r,n,i,[!1,!1,!1,0,l,!1]);return s(f,-1),u(f,r,n,a,o)},d.encodeLL=function(e,r,n,i,a,o,l,f){let c={ctype:0+(1==i?0:2)+(0==a?0:4),depth:o,frames:[]},h=(i+a)*o,d=h*r;for(let i=0;i<e.length;i++)c.frames.push({rect:{x:0,y:0,width:r,height:n},img:new Uint8Array(e[i]),blend:0,dispose:1,bpp:Math.ceil(h/8),bpl:Math.ceil(d/8)});return s(c,0,!0),u(c,r,n,l,f)},d.encode.compress=c,d.encode.dither=f,d.quantize=v,d.quantize.getKDtree=A,d.quantize.getNearest=w}();let g={toArrayBuffer(e,r){let n=e.width,i=e.height,a=n<<2,o=new Uint32Array(e.getContext("2d").getImageData(0,0,n,i).data.buffer),l=(32*n+31)/32<<2,f=l*i,u=122+f,s=new ArrayBuffer(u),c=new DataView(s),h,d,p,v,A=1048576,w=0,m=0,b=0;function y(e){c.setUint16(m,e,!0),m+=2}function U(e){c.setUint32(m,e,!0),m+=4}y(19778),U(u),m+=4,U(122),U(108),U(n),U(-i>>>0),y(1),y(32),U(3),U(f),U(2835),U(2835),m+=8,U(16711680),U(65280),U(255),U(4278190080),U(1466527264),function e(){for(;w<i&&A>0;){for(v=122+w*l,h=0;h<a;)A--,p=(d=o[b++])>>>24,c.setUint32(v+h,d<<8|p),h+=4;w++}b<o.length?(A=1048576,setTimeout(e,g._dly)):r(s)}()},toBlob(e,r){this.toArrayBuffer(e,e=>{r(new Blob([e],{type:"image/bmp"}))})},_dly:9};var p={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},v={[p.CHROME]:16384,[p.FIREFOX]:11180,[p.DESKTOP_SAFARI]:16384,[p.IE]:8192,[p.IOS]:4096,[p.ETC]:8192};let A="undefined"!=typeof window,w="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,m=A&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),b=(A||w)&&(m&&m.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),y=(A||w)&&(m&&m.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function U(e,r,n=Date.now()){return new Promise(i=>{let a=e.split(","),o=a[0].match(/:(.*?);/)[1],l=globalThis.atob(a[1]),f=l.length,u=new Uint8Array(f);for(;f--;)u[f]=l.charCodeAt(f);let s=new Blob([u],{type:o});s.name=r,s.lastModified=n,i(s)})}function F(e){return new Promise((r,n)=>{let i=new y;i.onload=()=>r(i.result),i.onerror=e=>n(e),i.readAsDataURL(e)})}function _(e){return new Promise((r,n)=>{let i=new Image;i.onload=()=>r(i),i.onerror=e=>n(e),i.src=e})}function E(){if(void 0!==E.cachedResult)return E.cachedResult;let e=p.ETC,{userAgent:r}=navigator;return/Chrom(e|ium)/i.test(r)?e=p.CHROME:/iP(ad|od|hone)/i.test(r)&&/WebKit/i.test(r)?e=p.IOS:/Safari/i.test(r)?e=p.DESKTOP_SAFARI:/Firefox/i.test(r)?e=p.FIREFOX:(/MSIE/i.test(r)||!0==!!document.documentMode)&&(e=p.IE),E.cachedResult=e,E.cachedResult}function I(e,r){let n=v[E()],i=e,a=r,o=i*a,l=i>a?a/i:i/a;for(;o>n*n;){let e=(n+i)/2,r=(n+a)/2;e<r?(a=r,i=r*l):(a=e*l,i=e),o=i*a}return{width:i,height:a}}function T(e,r){let n,i;try{if(i=(n=new OffscreenCanvas(e,r)).getContext("2d"),null===i)throw Error("getContext of OffscreenCanvas returns null")}catch(e){i=(n=document.createElement("canvas")).getContext("2d")}return n.width=e,n.height=r,[n,i]}function M(e,r){let{width:n,height:i}=I(e.width,e.height),[a,o]=T(n,i);return r&&/jpe?g/.test(r)&&(o.fillStyle="white",o.fillRect(0,0,a.width,a.height)),o.drawImage(e,0,0,a.width,a.height),a}function C(e,r={}){return new Promise(function(n,i){let a,o;var l=function(){try{return o=M(a,r.fileType||e.type),n([a,o])}catch(e){return i(e)}},f=function(r){try{var n=function(e){try{throw e}catch(e){return i(e)}};try{let r;return F(e).then(function(e){try{return r=e,_(r).then(function(e){try{return a=e,function(){try{return l()}catch(e){return i(e)}}()}catch(e){return n(e)}},n)}catch(e){return n(e)}},n)}catch(e){n(e)}}catch(e){return i(e)}};try{if(function e(){return void 0!==e.cachedResult||(e.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),e.cachedResult}()||[p.DESKTOP_SAFARI,p.MOBILE_SAFARI].includes(E()))throw Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(e){try{return a=e,l()}catch(e){return f()}},f)}catch(e){f()}})}function B(e,r,n,i,a=1){return new Promise(function(o,l){let f;if("image/png"===r){let o,l;return o=e.getContext("2d"),{data:l}=o.getImageData(0,0,e.width,e.height),(f=new Blob([d.encode([l.buffer],e.width,e.height,4096*a)],{type:r})).name=n,f.lastModified=i,c.call(this)}if("image/bmp"===r)return new Promise(r=>g.toBlob(e,r)).then((function(e){try{return(f=e).name=n,f.lastModified=i,s.call(this)}catch(e){return l(e)}}).bind(this),l);if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:r,quality:a}).then((function(e){try{return(f=e).name=n,f.lastModified=i,u.call(this)}catch(e){return l(e)}}).bind(this),l);return U(e.toDataURL(r,a),n,i).then((function(e){try{return f=e,u.call(this)}catch(e){return l(e)}}).bind(this),l);function u(){return s.call(this)}function s(){return c.call(this)}function c(){return o(f)}})}function L(e){e.width=0,e.height=0}function x(){return new Promise(function(e,r){let n,i,a,o;return void 0!==x.cachedResult?e(x.cachedResult):U("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(l){try{return n=l,C(n).then(function(l){try{return i=l[1],B(i,n.type,n.name,n.lastModified).then(function(n){try{return a=n,L(i),C(a).then(function(n){try{return o=n[0],x.cachedResult=1===o.width&&2===o.height,e(x.cachedResult)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)})}function R(e){return new Promise((r,n)=>{let i=new y;i.onload=e=>{let n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return r(-2);let i=n.byteLength,a=2;for(;a<i&&!(8>=n.getUint16(a+2,!1));){let e=n.getUint16(a,!1);if(a+=2,65505==e){if(1165519206!=n.getUint32(a+=2,!1))return r(-1);let e=18761==n.getUint16(a+=6,!1);a+=n.getUint32(a+4,e);let i=n.getUint16(a,e);a+=2;for(let o=0;o<i;o++)if(274==n.getUint16(a+12*o,e))return r(n.getUint16(a+12*o+8,e))}else{if(65280!=(65280&e))break;a+=n.getUint16(a,!1)}}return r(-1)},i.onerror=e=>n(e),i.readAsArrayBuffer(e)})}function S(e,r){let{width:n}=e,{height:i}=e,{maxWidthOrHeight:a}=r,o,l=e;return isFinite(a)&&(n>a||i>a)&&([l,o]=T(n,i),n>i?(l.width=a,l.height=i/n*a):(l.width=n/i*a,l.height=a),o.drawImage(e,0,0,l.width,l.height),L(e)),l}function D(e,r){let{width:n}=e,{height:i}=e,[a,o]=T(n,i);switch(r>4&&r<9?(a.width=i,a.height=n):(a.width=n,a.height=i),r){case 2:o.transform(-1,0,0,1,n,0);break;case 3:o.transform(-1,0,0,-1,n,i);break;case 4:o.transform(1,0,0,-1,0,i);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,i,0);break;case 7:o.transform(0,-1,-1,0,i,n);break;case 8:o.transform(0,-1,1,0,0,n)}return o.drawImage(e,0,0,n,i),L(e),a}function k(e,r,n=0){return new Promise(function(i,a){let o,l,f,u,s,c,h,d,g,p,v,A,w,m,b,y,U,F,_,E;function I(e=5){if(r.signal&&r.signal.aborted)throw r.signal.reason;o+=e,r.onProgress(Math.min(o,100))}function M(e){if(r.signal&&r.signal.aborted)throw r.signal.reason;o=Math.min(Math.max(e,o),100),r.onProgress(o)}return o=n,l=r.maxIteration||10,f=1024*r.maxSizeMB*1024,I(),C(e,r).then((function(n){try{return[,u]=n,I(),s=S(u,r),I(),new Promise(function(n,i){var a;if(!(a=r.exifOrientation))return R(e).then((function(e){try{return a=e,o.call(this)}catch(e){return i(e)}}).bind(this),i);function o(){return n(a)}return o.call(this)}).then((function(n){try{return c=n,I(),x().then((function(n){try{return h=n?s:D(s,c),I(),d=r.initialQuality||1,g=r.fileType||e.type,B(h,g,e.name,e.lastModified,d).then((function(n){try{var o;if(p=n,I(),v=p.size>f,A=p.size>e.size,!v&&!A)return M(100),i(p);function c(){if(l--&&(b>f||b>w)){let r,n;return r=E?.95*_.width:_.width,n=E?.95*_.height:_.height,[U,F]=T(r,n),F.drawImage(_,0,0,r,n),d*="image/png"===g?.85:.95,B(U,g,e.name,e.lastModified,d).then(function(e){try{return y=e,L(_),_=U,b=y.size,M(Math.min(99,Math.floor((m-b)/(m-f)*100))),c}catch(e){return a(e)}},a)}return[1]}return w=e.size,b=m=p.size,_=h,E=!r.alwaysKeepResolution&&v,(o=(function(e){for(;e;){if(e.then)return void e.then(o,a);try{if(e.pop){if(e.length)return e.pop()?C.call(this):e;e=c}else e=e.call(this)}catch(e){return a(e)}}}).bind(this))(c);function C(){return L(_),L(U),L(s),L(h),L(u),M(100),i(y)}}catch(e){return a(e)}}).bind(this),a)}catch(e){return a(e)}}).bind(this),a)}catch(e){return a(e)}}).bind(this),a)}catch(e){return a(e)}}).bind(this),a)})}function P(e,r){return new Promise(function(n,o){let l,f,u,s,c,h;if(l={...r},u=0,{onProgress:s}=l,l.maxSizeMB=l.maxSizeMB||Number.POSITIVE_INFINITY,c="boolean"!=typeof l.useWebWorker||l.useWebWorker,delete l.useWebWorker,l.onProgress=e=>{u=e,"function"==typeof s&&s(u)},!(e instanceof Blob||e instanceof b))return o(Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return o(Error("The file given is not an image"));if(h="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!c||"function"!=typeof Worker||h)return k(e,l).then((function(e){try{return f=e,p.call(this)}catch(e){return o(e)}}).bind(this),o);var d=(function(){try{return p.call(this)}catch(e){return o(e)}}).bind(this),g=function(r){try{return k(e,l).then(function(e){try{return f=e,d()}catch(e){return o(e)}},o)}catch(e){return o(e)}};try{return l.libURL=l.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",new Promise((r,n)=>{i||(i=function(e){let r=[];return"function"==typeof e?r.push(`(${e})()`):r.push(e),URL.createObjectURL(new Blob(r))}("\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n"));let a=new Worker(i);a.addEventListener("message",function(e){if(l.signal&&l.signal.aborted)a.terminate();else if(void 0===e.data.progress){if(e.data.error)return n(Error(e.data.error)),void a.terminate();r(e.data.file),a.terminate()}else l.onProgress(e.data.progress)}),a.addEventListener("error",n),l.signal&&l.signal.addEventListener("abort",()=>{n(l.signal.reason),a.terminate()}),a.postMessage({file:e,imageCompressionLibUrl:l.libURL,options:{...l,onProgress:void 0,signal:void 0}})}).then(function(e){try{return f=e,d()}catch(e){return g()}},g)}catch(e){g()}function p(){try{f.name=e.name,f.lastModified=e.lastModified}catch(e){}try{l.preserveExif&&"image/jpeg"===e.type&&(!l.fileType||l.fileType&&l.fileType===e.type)&&(f=a(e,f))}catch(e){}return n(f)}})}P.getDataUrlFromFile=F,P.getFilefromDataUrl=U,P.loadImage=_,P.drawImageInCanvas=M,P.drawFileInCanvas=C,P.canvasToFile=B,P.getExifOrientation=R,P.handleMaxWidthOrHeight=S,P.followExifOrientation=D,P.cleanupCanvasMemory=L,P.isAutoOrientationInBrowser=x,P.approximateBelowMaximumCanvasSizeOfBrowser=I,P.copyExifWithoutOrientation=a,P.getBrowserName=E,P.version="2.0.2"}}]);