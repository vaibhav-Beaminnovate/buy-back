(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4892],{10597:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Brands/product/questions/[...variant_order]",function(){return a(9199)}])},69722:function(e,t,a){"use strict";var s=a(85893),r=a(32553),n=a(34863),l=a(67294),i=a(3942),c=a.n(i),o=a(40221);t.Z=e=>{let{buttonStyles:t={},imageStyles:i={},containerStyles:d={},onImagesChange:u=()=>{},folderName:m,s3imageUrlArray:h,setS3imageUrlArray:x,tag:p,imageName:g,setImageName:f,setAadharCount:b,setPhoneCount:y,clearImages:w}=e,[j,v]=(0,l.useState)([]),[N,A]=(0,l.useState)(!1),I="https://buybackservice.unicornstore.in",S=(0,r.dQ)(),[E,_]=(0,l.useState)(""),k=e=>e.reduce((e,t)=>({...e,...t}),{});(0,l.useEffect)(()=>{h&&k(h)[p]&&v([{data_url:k(h)[p]}])},[h,p]),(0,l.useEffect)(()=>{w&&w(()=>v([]))},[w]),(0,l.useEffect)(()=>{("GST_certificate"===p||"cheque"===p||"company_logo"===p)&&v(h.filter(e=>e[p]).map(e=>({original_url:e[p],data_url:"".concat(e[p],"?t=").concat(new Date().getTime())})))},[h,p]);let C=e=>({front_aadhar:"front_aadhar",back_aadhar:"back_aadhar",Top:"Top",Bottom:"Bottom",Front:"Front",Back:"Back",Left:"Left",Right:"Right",front_invoice:"front_invoice",back_invoice:"back_invoice"})[e]||e,D=e=>{x(t=>t.filter(t=>!Object.values(t).includes(e)))},P=e=>{let[t,a]=e.split(","),s=t.split(":")[1].split(";")[0],r=atob(a),n=new ArrayBuffer(r.length),l=new Uint8Array(n);for(let e=0;e<r.length;e++)l[e]=r.charCodeAt(e);return new Blob([n],{type:s})},T=(e,t)=>new File([e],t,{type:e.type}),M=async e=>{try{let t=a(1616);if(!("image/heic"===e.type||"image/heif"===e.type||/\.(heic|heif)$/i.test(e.name)))return e;{let a=await t({blob:e,toType:"image/png"}),s=e.name.split(".").slice(0,-1).join(".");return new File([a],"".concat(s,".png"),{type:"image/png"})}}catch(t){return console.error("Error converting HEIC to PNG: ",t),e}},R=async e=>{let t=await M(e[0]),a=await (0,o.Z)(t,{maxSizeMB:4,maxWidthOrHeight:1920,useWebWorker:!0}),s=new FormData;s.append("file",a,a.name);try{A(!0);let e=await fetch("".concat(I,"/upload-for-order-detail/?folder_name=").concat(m),{method:"POST",headers:{Authorization:S},body:s});if(!e.ok)throw Error("Failed to upload images");let t=await e.json();x(e=>[...e,{[C(p)]:t.s3_image_url}]),["Top","Bottom","Front","Back","Left","Right"].includes(p)&&y(e=>e+1),["front_aadhar","back_aadhar"].includes(p)&&b(e=>e+1),_(t.s3_image_url)}catch(e){console.error("Error uploading images:",e)}finally{A(!1)}},O=(0,l.useCallback)((e,t)=>{A(!0),f(p+(g+1)),v(e),u(e,t),R(e.map(e=>T(P(e.data_url),"image_".concat(p,"_").concat(e.file.name))))},[u,p,R]),q=async e=>{try{if(!(await fetch("".concat(I,"/remove-image?s3_image=").concat(e),{method:"DELETE",headers:{Authorization:S}})).ok)throw Error("Failed to delete image");["Top","Bottom","Front","Back","Left","Right"].includes(p)&&y(e=>e-1),["front_aadhar","back_aadhar"].includes(p)&&b(e=>e-1)}catch(e){console.error("Error deleting image:",e)}},B=async e=>{let t=j[e],a=t&&t.data_url;await q(a),D(a),v(t=>t.filter((t,a)=>a!==e)),x(e=>e.filter(e=>!Object.values(e).includes(a)))};return N?(0,s.jsx)("div",{className:"w-full max-h-full h-full relative grid place-content-center",children:(0,s.jsx)(n.c,{color:"success"})}):(0,s.jsx)("div",{className:"w-full h-full max-h-full relative ".concat(d),children:(0,s.jsx)(c(),{value:j,onChange:O,dataURLKey:"data_url",allowNonImageType:!0,children:e=>{let{imageList:a,onImageUpload:r,isDragging:n,dragProps:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full items-center justify-center max-h-full",children:[(0,s.jsx)("button",{style:{...t,color:n?"red":void 0},onClick:r,...l,className:"text-gray-400 w-full h-full content-center absolute top-0 left-0 ",children:(0,s.jsx)("span",{className:"".concat(j.length>0?"hidden":""),children:"Click here to upload or Drop here"})}),(0,s.jsx)("div",{className:"overflow-y-scroll scrollbar-hidden z-10 w-full",children:(0,s.jsx)("div",{className:"flex items-center justify-center w-full space-y-5",children:a.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-start md:justify-center ",children:[(0,s.jsx)("div",{className:"flex flex-row absolute right-1 space-x-1 top-1 h-full",children:(0,s.jsx)("button",{className:"text-red-500 bg-gray-200 rounded px-1 text-xl h-fit sticky top-1",onClick:e=>{e.stopPropagation(),B(t)},children:(0,s.jsx)("i",{className:"bi bi-x-square"})})}),(0,s.jsx)("img",{className:"h-full",src:E,alt:"",style:i})]},t))})})]})}})})}},9199:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return O}});var s=a(85893),r=a(67294),n=e=>{let{journeyData:t}=e;return t&&"success"===t.status&&Array.isArray(t.data)&&0!==t.data.length?(0,s.jsx)("div",{className:"w-full h-full flex flex-col",children:t.data.map((e,t)=>Object.keys(e).map(a=>{let r=e[a];return Array.isArray(r)?(0,s.jsxs)("div",{className:"journey-element",children:[(0,s.jsxs)("p",{className:" text-lg font-semibold accent",children:[a,":"]}),r.map((e,t)=>(0,s.jsx)("p",{className:"ms-2",children:e&&e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()||"No detail available"},t))]},"".concat(t,"-").concat(a)):(0,s.jsx)("div",{className:"journey-element",children:(0,s.jsxs)("p",{children:["Error: Details are not available for ",a,"."]})},"".concat(t,"-").concat(a))}))}):(0,s.jsx)("p",{})},l=a(69722),i=a(9008),c=a.n(i),o=a(25675),d=a.n(o),u=a(11163),m=a(58386),h=a(5152),x=a.n(h),p=a(67957),g=a(34863),f=a(1773),b=a(39412),y=a(91680),w=a(50199),j=a(87740),v=a(86597),N=a(10843),A=a(32553),I=a(9134),S=e=>{let{buyerData:t,sign:r}=e,n=()=>'\n          <div style="font-size: 13px; line-height: 1.2; width: 100%; box-sizing: border-box; padding: 30px;">\n            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; align-items: start; width: 100%;">\n              <div>\n                <p style="font-size:18px; font-weight: bold;">Customer Purchase Receipt</p>\n                <p style="margin-top:10px">Date: '.concat((0,A.a)(new Date),'</p>\n                <p>Service Number: </p>\n                <p>Buyer: Unicorn </p>\n              </div>\n              <div style="text-align: right;">\n                <p style="font-size: 18px; font-weight: bold;">BuyBack</p>\n                <p style="font-size: 12px;">www.buyback.in</p>\n              </div>\n              <div class="seller-details" style="grid-column: span 2 / span 2; margin: 10px 0px 0px 0px; border: 1px solid #ddd; border-radius: 5px;">\n                <table style="width: 100%; border-collapse: collapse; margin: 16px">\n                  <tr>\n                    <td style="font-weight: bold; width: 100px;">Seller Details:</td>\n                    <td></td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Name:</td>\n                    <td style="padding: 5px 0;">').concat(t.username+" "+t.userLastName,'</td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Contact No.:</td>\n                    <td style="padding: 5px 0;">').concat(t.userPhone,'</td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Email Id:</td>\n                    <td style="padding: 5px 0;">').concat(t.userEmail,'</td>\n                  </tr>\n                </table>\n              </div>\n              <div style="grid-column: span 2 / span 2; margin: 10px 0px 0px 0px;">\n                <p style="font-weight: bold; font-size:16px;">INDEMNITY BOND</p>\n                <p style="margin: 8px 0px">This Bond of Indemnity is made and executed by: <strong>').concat(t.username+" "+t.userLastName,'</strong> Herein after referred to as "Seller" who has come in Retail store of <strong>UNICORN @ CITY</strong> to sell his/her old Gadget, to the Unicorn Network herein after referred to as "Purchaser" which expression shall mean and include its representative, executors, nominee, partness, affiliates and assigns on day of <strong>').concat((0,A.a)(new Date),'</strong></p>\n                <div style="display: flex; align-items: flex-end; flex-direction: column;margin: 10px 0px 0px 0px">\n                ').concat(r.trimmedDataURL&&"<img\n                src=".concat(r.trimmedDataURL,'\n                style="width: auto; height:40px;"\n                />'),"\n                <p><strong>").concat(t.username+" "+t.userLastName,"</strong> <br /> Seller Name</p>\n                </div>\n              </div>\n              \n            </div>\n          </div>\n        ");return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"border",dangerouslySetInnerHTML:{__html:n()}}),(0,s.jsx)("div",{className:"text-center mt-8",children:(0,s.jsx)(b.A,{color:"primary",onPress:()=>{console.log({sign:r});try{if("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC"===r.trimmedDataURL||""===r.trimmedDataURL)throw Error("Empty Signature");a.e(8607).then(a.t.bind(a,68607,23)).then(e=>{let t=e.default,a=n();t({printable:a,type:"raw-html",honorMarginPadding:!0,style:"\n            @page {\n              size: A4;\n              margin: 0;\n              }\n              body {\n                    margin: 0px;\n                    }\n                    div {\n                    width: 100%;\n                  } \n                  .seller-details {\n                    margin-right: 40px;\n                    }\n                    "})}).catch(e=>{console.error("Failed to load printJS:",e)})}catch(e){I.Am.error(e.message)}},className:"text-white rounded block ms-auto ring-custom !ring-blue-400",children:"Print Bond"})})]})},E=a(25422),_=a(55961),k=a.n(_),C=a(41664),D=a.n(C),P=a(58877),T=a.n(P),M=a(96476),R=e=>{let{setImeiFormData:t,setErrors:n,errors:l}=e,[i,c]=(0,r.useState)(null),o=(0,r.useRef)(null),{isOpen:d,onOpen:u,onOpenChange:m,onClose:h}=(0,p.q)(),x=["aztec","code_128","code_39","code_93","codabar","data_matrix","ean_13","ean_8","itf","pdf417","qr_code","upc_a","upc_e"];class g{static async polyfill(){if(!("BarcodeDetector"in window))try{await a.e(3087).then(a.bind(a,3087))}catch(e){throw console.log(e),Error("BarcodeDetector API is not supported by your browser.",{cause:e})}}static async getSupportedFormats(){let e=await window.BarcodeDetector.getSupportedFormats()||[];return x.filter(t=>e.includes(t))}static async create(e){let t=Array.isArray(e)&&e.length>0?e:await g.getSupportedFormats();return new g(t)}static async setup(){try{return await g.polyfill(),{barcodeReaderError:null}}catch(e){return{barcodeReaderError:e}}}async detect(e){if(!this.barcodeReader)throw Error("BarcodeReader is not initialized.");let t=await this.barcodeReader.detect(e);if(Array.isArray(t)&&t.length>0)return t[0]}constructor(e){this.barcodeReader=new window.BarcodeDetector({formats:e})}}return(0,r.useEffect)(()=>{if(d)return(async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),a=e.getVideoTracks()[0];a.getCapabilities().zoom&&await a.applyConstraints({advanced:[{zoom:2}]}),o.current&&(o.current.srcObject=e,o.current.autoplay=!0,o.current.playsInline=!0,o.current.muted=!0,o.current.play());let{barcodeReaderError:s}=await g.setup();if(s){c(s.message);return}let r=await g.getSupportedFormats(),l=await g.create(r),i=async()=>{if(o.current&&o.current.readyState>=2)try{let e=await l.detect(o.current);if(e){let a=o.current.srcObject;a&&a.getTracks().forEach(e=>e.stop()),t(t=>({...t,newIMEI:e.rawValue})),15===e.rawValue.length?n(e=>({...e,newIMEI:""})):n(e=>({...e,newIMEI:"New IMEI must be 15 digits"})),h()}}catch(e){console.log("No barcode detected:",e.message)}requestAnimationFrame(i)};i()}catch(e){c(e.message)}})(),()=>{o.current&&o.current.srcObject&&(o.current.srcObject.getTracks().forEach(e=>e.stop()),o.current.srcObject=null)}},[d]),(0,s.jsxs)("div",{className:"flex flex-col justify-end",children:[(0,s.jsx)("button",{onClick:u,className:"p-2.5 fas fa-camera bg-blue-100 text-blue-500 hover:bg-blue-500 hover:text-white transition-all rounded"}),l.newIMEI&&(0,s.jsx)("span",{className:"text-xs",children:" \xa0"}),!l.neIMEI&&l.oldIMEI&&(0,s.jsx)("span",{className:"text-xs hidden lg:inline",children:" \xa0"}),(0,s.jsx)(y.R,{isOpen:d,onOpenChange:m,children:(0,s.jsx)(w.A,{children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.k,{className:"flex flex-col gap-1",children:"Barcode Scanner"}),(0,s.jsx)(v.I,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg mb-1",children:"Align Barcode in the frame below"}),i&&(0,s.jsxs)("p",{children:["Error: ",i]}),(0,s.jsx)("video",{ref:o,className:"w-full"})]})}),(0,s.jsx)(M.R,{children:(0,s.jsx)(b.A,{color:"danger",variant:"light",onPress:e,children:"Close"})})]})})})]})};x()(()=>a.e(8607).then(a.t.bind(a,68607,23)),{loadableGenerated:{webpack:()=>[68607]},ssr:!1}),x()(()=>Promise.all([a.e(7847),a.e(3842),a.e(5443),a.e(3778)]).then(a.t.bind(a,80599,23)),{loadableGenerated:{webpack:()=>[80599]},ssr:!1});var O=()=>{let e=(0,u.useRouter)(),{variant_order:t}=e.query,i="https://buybackservice.unicornstore.in",[o,h]=(0,r.useState)(null),[x,_]=(0,r.useState)(!0),[C,P]=(0,r.useState)(null),[M,O]=(0,r.useState)([]),[q,B]=(0,r.useState)({}),[F,U]=(0,r.useState)(!0),[z,L]=(0,r.useState)(null),[K,G]=(0,r.useState)(0),[J,V]=(0,r.useState)(""),[Y,Z]=(0,r.useState)(""),[Q,X]=(0,r.useState)(""),[H,W]=(0,r.useState)(""),[$,ee]=(0,r.useState)(""),[et,ea]=(0,r.useState)(""),[es,er]=(0,r.useState)(!1),[en,el]=(0,r.useState)(!0),[ei,ec]=(0,r.useState)(null),[eo,ed]=(0,r.useState)(!1),[eu,em]=(0,r.useState)(0),[eh,ex]=(0,r.useState)(!1),[ep,eg]=(0,r.useState)(!0),[ef,eb]=(0,r.useState)(""),[ey,ew]=(0,r.useState)([]),[ej,ev]=(0,r.useState)(""),[eN,eA]=(0,r.useState)(!1),[eI,eS]=(0,r.useState)(null),[eE,e_]=(0,r.useState)(!1),[ek,eC]=(0,r.useState)(""),[eD,eP]=(0,r.useState)(""),[eT,eM]=(0,r.useState)(""),[eR,eO]=(0,r.useState)(new Set),[eq,eB]=(0,r.useState)(0),eF=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,[eU,ez]=(0,r.useState)(0),[eL,eK]=(0,r.useState)(0),[eG,eJ]=(0,r.useState)(!1),[eV,eY]=(0,r.useState)(""),[eZ,eQ]=(0,r.useState)(!1),[eX,eH]=(0,r.useState)(!1),[eW,e$]=(0,r.useState)(!0),[e0,e1]=(0,r.useState)({userEmail:Q,userPhone:H,userLastName:Y,username:J}),[e2,e3]=(0,r.useState)({}),{isOpen:e5,onOpen:e4,onOpenChange:e8}=(0,p.q)(),[e6,e7]=(0,r.useState)(0),[e9,te]=(0,r.useState)({price:!0,verification:!1,phoneDetails:!1,indemnity:!1}),[tt,ta]=(0,r.useState)({price:!1,verification:!1,phoneDetails:!1,indemnity:!1}),[ts,tr]=(0,r.useState)({oldIMEI:"",newIMEI:""}),[tn,tl]=(0,r.useState)({oldIMEI:"",newIMEI:""}),[ti,tc]=(0,r.useState)(!1),[to,td]=(0,r.useState)([]),[tu,tm]=(0,r.useState)(null),[th,tx]=(0,r.useState)(""),[tp,tg]=(0,r.useState)(!0),[tf,tb]=(0,r.useState)(!1),ty=(0,r.useRef)(null),[tw,tj]=(0,r.useState)({trimmedDataURL:""}),[tv,tN]=(0,r.useState)(!1),tA=(0,r.useRef)(null),tI=(0,A.dQ)();(0,r.useEffect)(()=>{e1({userEmail:Q,userPhone:H,userLastName:Y,username:J})},[Q,H,Y,J]),(0,r.useEffect)(()=>{let e;return eu>0?e=setInterval(()=>{em(e=>e-1)},1e3):ex(!1),()=>clearInterval(e)},[eu]);let tS=()=>{X(""),V(""),Z(""),W(""),ea(""),er(!1),eg(!0),ex(!1),em(0),tr({oldIMEI:"",newIMEI:""}),e$(!0),ew([]),ev(""),ez(0),eK(0),eH(!1),eJ(!1)};function tE(e,t){B(a=>{let s={...a};return s[e]===t?delete s[e]:s[e]=t,s})}let t_=async()=>{try{if(!(await fetch("".concat(i,"/delete-all-by-order-id?order_id=").concat(t[1]),{method:"DELETE",headers:{Authorization:tI}})).ok)throw Error("Delete failed")}catch(e){console.log(e),P(e.message)}},tk=async()=>{_(!0);try{let e=await fetch("".concat(i,"/get-variant-by-id/?variant_id=").concat(t[0]),{headers:{Authorization:tI}});if(!e.ok)throw Error("Failed to fetch variant");let a=await e.json();if(L(a),!a.product_id)throw Error("Product ID is missing in variant");let s=await fetch("".concat(i,"/get-product-by-id/?product_id=").concat(a.product_id),{headers:{Authorization:tI}});if(!s.ok)throw Error("Failed to fetch product");let r=await s.json();h(r);let n=await fetch("".concat(i,"/get-questions-by-product?product_id=").concat(a.product_id),{headers:{Authorization:tI}});if(!n.ok)throw Error("Failed to fetch questions");let l=await n.json();O(l.result);let c=new Set(l.result.filter(e=>1===e.set_base_value).map(e=>e.question_id));eO(c)}catch(e){P(e.message)}finally{_(!1)}};(0,r.useEffect)(()=>{ew([]),t&&(eP(localStorage.getItem("staff_id")),tm(localStorage.getItem("staff_login")),"false"===localStorage.getItem("staff_login")?(ee(localStorage.getItem("name")),tx(localStorage.getItem("executive_id"))):tX(localStorage.getItem("staff_id")),t_(),tk(),tH(),localStorage.removeItem("order_id"),localStorage.removeItem("customer_id"))},[t,i]),(0,r.useEffect)(()=>{let e=Object.keys(q).length>0;e?e&&e_(!0):e_(!1),tP()&&eM("")},[q]),(0,r.useEffect)(()=>{"yes"===q.satisfied&&el(!0)},[q.satisfied]);let tC=async(e,a)=>{if(F)try{if(U(!1),!(await fetch("".concat(i,"/create-product-question-answer"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:tI},body:JSON.stringify({variant_id:t[0],order_id:t[1],question_id:e,answer:a})})).ok)throw Error("Failed to submit answer")}catch(e){console.error("Error submitting answer:",e.message)}finally{U(!0)}},tD=(e,t)=>{tC(e,t),setTimeout(()=>{tL()},250)},tP=()=>M.filter(e=>1===e.set_base_value).map(e=>e.question_id).every(e=>q[e]),tT=async()=>{if(eE){if(!tP()){eM("Please fill all required fields.");return}e4(),G("Loading...");try{let e=await fetch("".concat(i,"/create-order-detail/?order_id=").concat(t[1],"&staff_id=").concat(eD),{method:"POST",headers:{Authorization:tI}});if(!e.ok)throw Error("Could not create order detail");let a=await e.json();"error"===a.status||"info"===a.status?G("Something went wrong"):(G(a.exact_value),eC(a.order_detail_id),e3(a))}catch(e){console.log(e)}finally{setTimeout(()=>{tg(!1)},300)}}},tM=async()=>{if(eF.test(Q))try{ev(""),er(!0);let e=await fetch("".concat(i,"/customer/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:tI},body:JSON.stringify({first_name:J,last_name:Y,email:Q,phone_number:H})});if(!e.ok)throw Error("could not create customer");let t=await e.json();ec(t.customer_id),em(60),ex(!0),eg(!1)}catch(e){console.log(e)}else ev("Please enter a valid email address.")},tR=async()=>{if(eF.test(Q))try{ev(""),er(!0);let e=await fetch("".concat(i,"/customer/create?otp_for=terms"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:tI},body:JSON.stringify({first_name:J,last_name:Y,email:Q,phone_number:H})});if(!e.ok)throw Error("could not create customer");let t=await e.json();ec(t.customer_id),em(60),ex(!0),eg(!1)}catch(e){console.log(e)}else ev("Please enter a valid email address.")},tO=async()=>{try{let e=await fetch("".concat(i,"/confirm-otp?customer_id=").concat(ei,"&otp=").concat(et,"&order_id=").concat(t[1]),{headers:{Authorization:tI}});if(!e.ok)throw Error("Could not confirm otp");let a=await e.json();"success"===a.status?(tf&&e7(e=>e+1),tf&&ta(e=>({...e,verification:!0})),eJ(!0),ed(!1)):ed(!0)}catch(e){console.log(e)}},tq=async()=>{try{let e=await fetch("".concat(i,"/confirm-otp?customer_id=").concat(ei,"&otp=").concat(eV,"&order_id=").concat(t[1],"&otp_for=terms"),{headers:{Authorization:tI}});if(!e.ok)throw Error("Could not confirm otp");let a=await e.json();"success"===a.status?(tB(),e7(e=>e+1),tf||ta(e=>({...e,verification:!0})),tf&&ta(e=>({...e,price:!0})),te(e=>({...e,phoneDetails:!0})),eQ(!1)):eQ(!0)}catch(e){console.log(e)}},tB=async()=>{try{let e=await fetch("".concat(i,"/create-order-folder/?order_id=").concat(t[1]),{method:"POST",headers:{Authorization:tI}});if(!e.ok)throw Error("Could not create order folder");let a=await e.json();eb(a.folder)}catch(e){console.log(e)}},tF=e=>{let{name:t,value:a}=e.target;tr({...ts,[t]:a}),tl(e=>{let s={...e};return"oldIMEI"===t&&(a.trim()?15!==a.trim().length?s.oldIMEI="Old IMEI must be 15 digits":s.oldIMEI="":s.oldIMEI="Old IMEI is required"),"newIMEI"===t&&(!a.trim()&&eW?s.newIMEI="New IMEI is required":15!==a.trim().length&&eW?s.newIMEI="New IMEI must be 15 digits":s.newIMEI=""),s})},tU=()=>{let e={};return ts.oldIMEI.trim()?ts.oldIMEI.length<15&&(e.oldIMEI="Old IMEI must be 15 digits"):e.oldIMEI="Old IMEI is required",eW&&!ts.newIMEI.trim()?e.newIMEI="New IMEI is required":eW&&ts.newIMEI.length<15&&(e.newIMEI="New IMEI must be 15 digits"),tl(e),0===Object.keys(e).length},tz=async()=>{if(!tU()){tA.current&&tA.current.scrollTo({top:0,behavior:"smooth"});return}if(eU<2||eL<6){I.Am.error("Please upload all the required photos");return}try{let e=await fetch("".concat(i,"/insert-images-in-order-detail?order_id=").concat(t[1],"&old_imei=").concat(ts.oldIMEI).concat(ts.newIMEI.length>0?"&new_imei=".concat(ts.newIMEI):"","&staff_id=").concat(eD),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:tI},body:JSON.stringify(ey)});if(!e.ok)throw Error("Could not insert images in order detil");await e.json(),e7(3),ta(e=>({...e,phoneDetails:!0})),te(e=>({...e,indemnity:!0}))}catch(e){console.log(e.message),I.Am.error(e.message)}},tL=async()=>{try{let e=await fetch("".concat(i,"/get-all-journey?order_id=").concat(t[1]),{headers:{Authorization:tI}});if(!e.ok)throw Error("Failed to submit answer");if(e.ok){let t=await e.json();eS(t)}}catch(e){console.log(e)}},tK=e=>{let a=document.createElement("svg");k()(a,t[1],{format:"CODE128",width:1,height:20});let s=a.querySelector("text");s&&s.remove();let r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("style","font: 14px monospace"),r.setAttribute("text-anchor","middle"),r.setAttribute("x","44"),r.setAttribute("y",45),r.textContent="OID: ".concat(t[1]),a.appendChild(r);let n=a.outerHTML;return'\n      <div style="font-size: 10px; width: 25mm; height: 11mm; padding: 0; display: flex; align-items: center; justify-content: center; padding: 8px 0px 0px 0px; border:0.1px solid black; box-sizing:border-box">\n        '.concat(n,"\n      </div>\n    ")},tG=async e=>{if(""===th){tc("Executive Name is required"),I.Am.error("Executive name is required"),tA.current&&tA.current.scrollTo({top:0,behavior:"smooth"});return}if(tc(!1),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC"===tw.trimmedDataURL||""===tw.trimmedDataURL){I.Am.error("Empty Signature");return}try{tN(!0);let t=await tZ(),a=await new Promise((e,a)=>{let s=new FileReader;s.onloadend=()=>e(s.result.split(",")[1]),s.onerror=a,s.readAsDataURL(t)}),s=await fetch("".concat(i,"/set-exchange-type"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:tI},body:JSON.stringify({order_detail_id:ek,executive_id:th,coupon_exchange:eW,customer_id:ei,indemnity_pdf:a})});if(!s.ok)throw Error("Could not set exchange type");let r=await s.json();if("success"!==r.status)throw Error(r.message);e(),tJ(),setTimeout(()=>{eA(!0)},500)}catch(e){I.Am.error(e.message),console.log(e)}finally{tN(!1)}},tJ=()=>{a.e(8607).then(a.t.bind(a,68607,23)).then(e=>{(0,e.default)({printable:tK(eI.data),type:"raw-html",style:"\n            @page { \n              size: 25mm 14mm; \n              margin: 0; \n            } \n            body { \n              display: flex; \n              align-items: center; \n              justify-content: center; \n              height: 100%; \n            } \n          "})}).catch(e=>{console.error("Failed to load printJS:",e)})},tV=()=>'\n          <div style="font-size: 13px; line-height: 1.2; width: 100%; box-sizing: border-box; padding: 30px;">\n            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; align-items: start; width: 100%;">\n              <div>\n                <p style="font-size:18px; font-weight: bold;">Customer Purchase Receipt</p>\n                <p style="margin-top:10px">Date: '.concat((0,A.a)(new Date),'</p>\n                <p>Service Number: </p>\n                <p>Buyer: Unicorn </p>\n              </div>\n              <div style="text-align: right;">\n                <p style="font-size: 18px; font-weight: bold;">BuyBack</p>\n                <p style="font-size: 12px;">www.buyback.in</p>\n              </div>\n              <div class="seller-details" style="grid-column: span 2 / span 2; margin: 10px 0px 0px 0px; border: 1px solid #ddd; border-radius: 5px;">\n                <table style="width: 100%; border-collapse: collapse; margin: 16px">\n                  <tr>\n                    <td style="font-weight: bold; width: 100px;">Seller Details:</td>\n                    <td></td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Name:</td>\n                    <td style="padding: 5px 0;">').concat(e0.username+" "+e0.userLastName,'</td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Contact No.:</td>\n                    <td style="padding: 5px 0;">').concat(e0.userPhone,'</td>\n                  </tr>\n                  <tr>\n                    <td style="font-weight: bold; padding: 5px 0; width: 100px;">Email Id:</td>\n                    <td style="padding: 5px 0;">').concat(e0.userEmail,'</td>\n                  </tr>\n                </table>\n              </div>\n              <div style="grid-column: span 2 / span 2; margin: 10px 0px 0px 0px;">\n                <p style="font-weight: bold; font-size:16px;">INDEMNITY BOND</p>\n                <p style="margin: 8px 0px">This Bond of Indemnity is made and executed by: <strong>').concat(e0.username+" "+e0.userLastName,'</strong> Herein after referred to as "Seller" who has come in Retail store of <strong>UNICORN @ CITY</strong> to sell his/her old Gadget, to the Unicorn Network herein after referred to as "Purchaser" which expression shall mean and include its representative, executors, nominee, partness, affiliates and assigns on day of <strong>').concat((0,A.a)(new Date),'</strong></p>\n                <div style="display: flex; align-items: flex-end; flex-direction: column;margin: 10px 0px 0px 0px">\n                ').concat(tw.trimmedDataURL&&"<img\n                src=".concat(tw.trimmedDataURL,'\n                style="width: auto; height:40px;"\n                />'),"\n                <p><strong>").concat(e0.username+" "+e0.userLastName,"</strong> <br /> Seller Name</p>\n                </div>\n              </div>\n              \n            </div>\n          </div>\n        "),tY=()=>{try{if("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC"===tw.trimmedDataURL||""===tw.trimmedDataURL)throw Error("Empty Signature");a.e(8607).then(a.t.bind(a,68607,23)).then(e=>{let t=e.default,a=tV();t({printable:a,type:"raw-html",honorMarginPadding:!0,style:"\n            @page {\n              size: A4;\n              margin: 0;\n              }\n              body {\n                    margin: 0px;\n                    }\n                    div {\n                    width: 100%;\n                  } \n                  .seller-details {\n                    margin-right: 40px;\n                    }\n                    "})}).catch(e=>{console.error("Failed to load printJS:",e)})}catch(e){I.Am.error(e.message)}},tZ=async()=>{try{let e=tV(),t=document.createElement("div");t.innerHTML=e;let s=(await Promise.all([a.e(7847),a.e(3842),a.e(5443),a.e(3778)]).then(a.t.bind(a,80599,23))).default;return await s().set({margin:1,html2canvas:{scale:2},jsPDF:{orientation:"portrait"}}).from(t).outputPdf("blob")}catch(e){throw console.error("Error generating PDF:",e),e}},tQ=e=>{e7(e),0===e?(V(""),Z(""),X(""),W(""),ea(""),eJ(!1),eY(""),B(e=>({...e,tnc:0})),em(0),tr({oldIMEI:"",newIMEI:""}),ee(""),ew([]),ez(0),eK(0),e$(!0)):1===e?(tr({oldIMEI:"",newIMEI:""}),ee(""),ew([]),ez(0),eK(0),e$(!0)):2===e&&e$(!0)},tX=async e=>{try{let t=await fetch("".concat(i,"/get-executive-by-staff?staff_id=").concat(e),{headers:{Authorization:tI}});if(!t.ok)throw Error("Could not get executive list");let a=await t.json();if("success"!==a.status)throw Error(a.message);td(a.data)}catch(e){I.Am.error(e.message)}},tH=async()=>{try{let e=await fetch("".concat(i,"/get-customer-detail-order"));if(!e.ok)throw Error("Could not get sequence");let t=await e.json();if("success"!==t.status)throw Error(t.message);tb(t.before_order)}catch(e){I.Am.error(e.message)}},tW=()=>{localStorage.setItem("customer_id",ei),localStorage.setItem("order_id",t[1])},t$=()=>{ty.current&&(ty.current.clear(),tj({trimmedDataURL:""}))},t0=()=>{try{if(ty.current){if("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC"===ty.current.getTrimmedCanvas().toDataURL("image/png"))throw Error("Empty Signature");tj({trimmedDataURL:ty.current.getTrimmedCanvas().toDataURL("image/png")})}}catch(e){I.Am.error(e.message)}};return x?(0,s.jsxs)("div",{className:"text-center mt-40 bg-white",children:[(0,s.jsx)(c(),{children:(0,s.jsx)("title",{children:"BuyBack- Loading"})}),(0,s.jsx)(g.c,{color:"success"})]}):C?(0,s.jsxs)("div",{className:"w-screen h-screen flex justify-center  bg-white mt-40",children:[(0,s.jsx)(c(),{children:(0,s.jsx)("title",{children:"BuyBack - Error"})}),(0,s.jsxs)("p",{className:"text-red-500",children:["Error: ",C]})]}):o?(0,s.jsxs)("div",{className:"bg-white",children:[(0,s.jsx)(c(),{children:(0,s.jsxs)("title",{children:["BuyBack - Sell your old ",z.name]})}),(0,s.jsx)("div",{className:"min-h-screen mb-8 flex",children:(0,s.jsx)("div",{className:"w-screen justify-center px-4 flex",children:(0,s.jsxs)("div",{className:"max-w-screen-xl w-full grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col shadow-lg min-h-[300px] col-span-2 rounded-lg p-4 bg-white",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col items-start mb-4",children:[(0,s.jsx)("p",{className:"text-xl font-semibold",children:"Tell us more about your device"}),(0,s.jsx)("p",{className:"text-gray-500 text-md font-semibold",children:"Please answer a few questions about your device."})]}),(0,s.jsx)("ol",{className:"space-y-8",children:M.map((e,t)=>(0,s.jsxs)("li",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"text-lg font-semibold",children:[(0,s.jsxs)("span",{className:"me-2",children:[t+1,"."]}),eT&&eR.has(e.question_id)&&(0,s.jsx)("span",{className:"border-l-4 border-red-500 rounded-l ps-2"}),e.description,1===e.set_base_value&&(0,s.jsx)("span",{className:"text-red-500",children:"*"}),eT&&eR.has(e.question_id)&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:"This is a required question"})]}),"binary"===e.question_type&&(0,s.jsx)("fieldset",{className:"mt-2 gap-x-1 grid grid-cols-2 md:grid-cols-2",children:e.options.map((t,a)=>(0,s.jsxs)("label",{id:"label-".concat(t.id),className:"bg-gray-100 ms-2 ps-4 mb-3 py-1 rounded custom-radio border cursor-pointer",onClick:()=>tD(e.question_id,t.id),children:[(0,s.jsx)("input",{type:"checkbox",name:"question-".concat(e.question_id),checked:q[e.question_id]===t.id,onChange:()=>tE(e.question_id,t.id),value:t.id,className:"hidden"}),(0,s.jsx)("span",{className:"radio-custom"}),(0,s.jsx)("span",{className:"ms-3 flex items-start justify-center flex-col w-full",children:t.option_value})]},t.id))}),"select"===e.question_type&&(0,s.jsx)("fieldset",{className:"mt-2 gap-x-1 grid grid-cols-1 md:grid-cols-2",children:e.options.map((t,a)=>(0,s.jsxs)("label",{id:"label-".concat(t.id),className:"bg-gray-100 ms-2 ps-4 mb-3  py-1 rounded custom-checkbox border cursor-pointer",onClick:()=>tD(e.question_id,t.id),children:[(0,s.jsx)(f.K,{color:"success",radius:"sm",isSelected:q[e.question_id]===t.id,onValueChange:()=>tE(e.question_id,t.id),onClick:()=>tD(e.question_id,t.id),className:"text-white"}),(0,s.jsxs)("span",{className:"ms-3 flex items-start justify-center flex-col w-full",children:[t.s3_image_url&&(0,s.jsx)(d(),{src:t.s3_image_url,width:100,height:100,alt:"Option image"}),t.option_value]})]},t.id))}),"multiselect"===e.question_type&&(0,s.jsx)("fieldset",{className:"mt-2 gap-x-1 grid grid-cols-1 md:grid-cols-2",children:e.options.map(t=>{var a;return(0,s.jsxs)("label",{id:"label-".concat(t.id),className:"bg-gray-100 ms-2 ps-4 mb-3  py-1 rounded custom-checkbox border cursor-pointer",onClick:()=>tD(e.question_id,t.id),children:[(0,s.jsx)(f.K,{color:"success",radius:"sm",isSelected:null===(a=q[e.question_id])||void 0===a?void 0:a.includes(t.id),onValueChange:()=>{let a=q[e.question_id]||[],s=a.includes(t.id)?a.filter(e=>e!==t.id):[...a,t.id];B(t=>({...t,[e.question_id]:s}))},onClick:()=>tD(e.question_id,t.id),className:"text-white"}),(0,s.jsxs)("span",{className:"ms-3 flex items-start justify-center flex-col w-full",children:[t.s3_image_url&&(0,s.jsx)(d(),{src:t.s3_image_url,width:100,height:100,alt:"Option image"}),t.option_value]})]},t.id)})})]},e.question_id))}),eT&&(0,s.jsx)("p",{className:"text-red-500 font-semibold mb-4",children:eT}),(0,s.jsx)(b.A,{className:"rounded px-4 py-1 mt-2 bg-accent text-white disabled:!bg-gray-300 disabled:hover:!bg-gray-300 disabled:text-black",onPress:tT,disabled:!eE,children:"Get exact value"})]}),(0,s.jsxs)("div",{className:"flex flex-col shadow-lg min-h-[300px] col-span-1 rounded-lg p-4 bg-white sticky top-20 max-h-[800px] overflow-y-scroll scrollbar-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d(),{src:(null==o?void 0:o.image_url)||"/refurbished.webp",height:75,width:75,alt:(null==o?void 0:o.name)||"Product Image"}),(0,s.jsx)("span",{className:" lg:ms-4 text-xl",children:z.name})]}),(0,s.jsx)("hr",{className:"my-4"}),(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsx)("span",{className:"text-xl font-semibold",children:"Device Appraisal:"})}),(0,s.jsx)("div",{children:(0,s.jsx)(n,{journeyData:eI})})]})]})})}),(0,s.jsx)(y.R,{isOpen:e5,onOpenChange:e8,isDismissable:!1,isKeyboardDismissDisabled:!0,size:"3xl",radius:"sm",classNames:{base:"h-[99%] sm:h-[95%] md:h-auto max-h-none md:max-h-[calc(100%-8rem)]",body:"px-2 sm:px-4 md:px-6 pb-0 sm:pb-8"},scrollBehavior:"inside",onClose:tS,children:(0,s.jsx)(w.A,{children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.k,{className:"flex flex-col gap-1",children:"Generate Order"}),(0,s.jsxs)(v.I,{ref:tA,children:[(0,s.jsx)(E.v,{activeStep:e6,className:"w-full py-4 mt-0 xl:sticky xl:-top-2 border shadow z-30 bg-white",connectorStyleConfig:{size:2,style:"dashed"},styleConfig:{activeBgColor:"#42c8b7",completedBgColor:"#319488"},children:tf?[{label:"Customer Verification",key:"verification",index:0},{label:"Confirm Price",key:"price",index:1},{label:"Phone Details",key:"phoneDetails",index:2},{label:"Indemnity Bond",key:"indemnity",index:3}].map((e,t)=>(0,s.jsx)(E.h,{onClick:()=>tQ(e.index),label:e.label,completed:tt[e.key],active:e9[e.key],disabled:e6<e.index,className:"ring-accent"},e.index)):[{label:"Confirm Price",key:"price",index:0},{label:"Customer Verification",key:"verification",index:1},{label:"Phone Details",key:"phoneDetails",index:2},{label:"Indemnity Bond",key:"indemnity",index:3}].map((e,t)=>(0,s.jsx)(E.h,{onClick:()=>tQ(e.index),label:e.label,completed:tt[e.key]&&!(e6<e.index),active:e9[e.key],disabled:e6<e.index},e.index))}),tp?(0,s.jsxs)("div",{className:"grid gap-y-4 border border-gray-300 p-4 mb-4",children:[(0,s.jsx)(N.X,{className:"h-7 w-72 sm:w-80 max-w-full mx-auto"}),(0,s.jsx)(N.X,{className:"h-7 w-32 mx-auto"}),(0,s.jsx)(N.X,{className:"h-5 w-48"})]}):(0,s.jsxs)(s.Fragment,{children:[(tf?1===e6:0===e6)&&(0,s.jsx)("div",{className:"w-full h-full md:h-fit bg-white pt-1 relative flex flex-col justify-between",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"border border-gray-300 p-2 pb-4",children:[(0,s.jsx)("div",{className:"flex justify-center items-center",children:(0,s.jsxs)("span",{className:"text-xl font-bold accent",children:["Exact Value of ",z.name]})}),(0,s.jsx)("div",{className:"w-full flex flex-col justify-between ".concat(e2.has_cashback&&"yes"===q.exchange?" py-8":"py-3"),children:(0,s.jsx)("div",{className:"text-lg ",children:e2.has_cashback&&"yes"===q.exchange?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"flex justify-between w-full gap-x-4  text-base",children:[(0,s.jsx)("span",{children:"Actual Value:"}),(0,s.jsx)("span",{children:(0,A.fK)(K)})]}),(0,s.jsxs)("p",{className:"flex justify-between w-full gap-x-4 text-base",children:[(0,s.jsx)("span",{children:"Cashback: "}),(0,s.jsxs)("span",{children:["+"," ","yes"===q.exchange?(0,A.fK)(e2.cashback):(0,A.fK)(0)]})]}),(0,s.jsxs)("p",{className:"flex justify-between w-full gap-x-8 border-t border-gray-300 text-2xl mt-2",children:[(0,s.jsx)("span",{children:"Total Price: "}),(0,s.jsx)("span",{className:"font-bold accent",children:"yes"===q.exchange?(0,A.fK)(K+e2.cashback):(0,A.fK)(K)})]})]}):(0,s.jsx)("p",{className:"flex justify-center w-full gap-x-8 border-gray-300 text-2xl mt-2",children:(0,s.jsx)("span",{className:"font-bold",children:(0,A.fK)(K)})})})}),(0,s.jsx)("div",{className:"w-full flex flex-col items-center justify-end",children:(0,s.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"w-full grid gap-y-0.5 relative",children:[e2.has_cashback&&(0,s.jsxs)(f.K,{radius:"none",color:"success",classNames:{icon:"text-white",wrapper:"rounded"},isSelected:"yes"===q.exchange,onChange:()=>tE("exchange","yes"),isRequired:!0,children:["Apply for cashback",(0,s.jsx)("span",{className:"text-red-400",children:"*"})]}),(!e2.has_cashback||"yes"===q.exchange)&&(0,s.jsxs)(f.K,{radius:"none",color:"success",classNames:{icon:"text-white",wrapper:"rounded",base:"relative"},isSelected:"yes"===q.satisfied,onChange:()=>tE("satisfied","yes"),isRequired:!0,children:["The customer is satisfied with the price displayed",(0,s.jsx)("span",{className:"text-red-400",children:"*"}),!en&&(0,s.jsx)("span",{className:"block absolute text-red-500 -bottom-4 text-sm",children:"Please check above checkbox"})]}),"yes"!==q.satisfied&&(0,s.jsx)(D(),{onClick:tW,href:"/feedback",className:"underline text-blue-500 ms-8",children:"Customer Not Satisfied?"}),tf&&"yes"===q.satisfied&&(0,s.jsxs)("div",{className:"lg:col-span-2 grid grid-cols-1 lg:grid-cols-2",children:[(0,s.jsx)("span",{onClick:()=>{tE("tnc",1),1!==q.tnc?(tR(),eH(!0)):eH(!1)},children:(0,s.jsx)(f.K,{radius:"none",color:"success",classNames:{icon:"text-white",wrapper:"rounded",base:"my-0.5"},isSelected:1===q.tnc,onChange:()=>{tE("tnc",1),1!==q.tnc?(tR(),eH(!0)):eH(!1)},isRequired:!0,children:(0,s.jsxs)("div",{children:["Accept"," ",(0,s.jsx)("a",{href:"http://",target:"_blank",rel:"noopener noreferrer",className:"inline accent",children:"Terms and Conditions"})]})})}),eX&&(0,s.jsxs)("span",{className:"} lg:col-span-2 grid grid-cols-1 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"w-full lg:col-span-2 flex flex-col ",children:["OTP Again",(0,s.jsx)(m.Z,{value:eV,onChange:eY,numInputs:6,renderSeparator:(0,s.jsx)("span",{children:"\xa0"}),inputStyle:"border rounded px-1 !w-8 outline-none",inputType:"number",renderInput:e=>(0,s.jsx)("input",{...e})}),(0,s.jsx)("span",{className:"".concat(eZ?"visible":"invisible"," text-red-500 text-sm"),children:"Wrong OTP"})]}),(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(b.A,{className:"block ml-auto px-3 py-1 rounded bg-accent text-white lg:col-span-2 disabled:bg-gray-300 ",onPress:()=>{tq()},disabled:6!==eV.length,children:"Confirm OTP Again"})})]})]})]})})]}),!tf&&(0,s.jsx)("div",{className:"w-full mt-5 flex justify-end gap-x-2 mb-4",children:(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsx)(b.A,{radius:"sm",color:"danger",variant:"light",onPress:()=>{e(),tS()},className:"rounded",children:"Cancel"}),(!e2.has_cashback||"yes"===q.exchange)&&(0,s.jsx)(b.A,{radius:"sm",color:"success",onPress:()=>{"yes"===q.satisfied?(e7(e=>e+1),ta(e=>({...e,price:!0})),te(e=>({...e,verification:!0}))):el(!1)},className:"text-white rounded",disabled:"yes"!==q.exchange,children:"Continue with verification"})]})})]})}),(tf?0===e6:1===e6)&&(0,s.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"w-full bg-white px-2 md:px-4 pb-4 pt-1 border border-gray-300 mb-4 relative grid grid-cols-1 md:grid-cols-2 z-20 lg:grid-rows-none md:gap-x-2 gap-y-2",children:[(0,s.jsx)("div",{className:"text-2xl accent mb-3 md:col-span-2 flex justify center",children:(0,s.jsx)("span",{className:"text-center w-full",children:"Customer Verification"})}),(0,s.jsxs)("div",{className:"w-full flex flex-col lg:px-2",children:[(0,s.jsxs)("span",{children:["First Name",(0,s.jsx)("span",{className:"text-red-500 ",children:"*"})]}),(0,s.jsx)("input",{type:"text",required:!0,className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded mt-0.5 lg:mt-0",spellCheck:!1,value:J,onChange:e=>V(e.target.value)})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col lg:px-2",children:[(0,s.jsxs)("span",{children:["Last Name",(0,s.jsx)("span",{className:"text-red-500 ",children:"*"})]}),(0,s.jsx)("input",{type:"text",required:!0,className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded mt-0.5 lg:mt-0",spellCheck:!1,value:Y,onChange:e=>Z(e.target.value)})]}),(0,s.jsxs)("div",{className:" w-full flex flex-col lg:px-2",children:[(0,s.jsxs)("span",{children:["Email",(0,s.jsx)("span",{className:"text-red-500 ",children:"*"})]}),(0,s.jsx)("input",{type:"email",required:!0,className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded mt-0.5 lg:mt-0",spellCheck:!1,value:Q,onChange:e=>X(e.target.value)}),(0,s.jsx)("p",{className:"".concat(ej.length>0?"visible":"invisible"," block text-red-500 text-sm lg:text-md"),children:ej})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col lg:px-2 ",children:[(0,s.jsxs)("span",{children:["Phone",(0,s.jsx)("span",{className:"text-red-500 ",children:"*"})]}),(0,s.jsx)("input",{required:!0,type:"number",maxLength:10,className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded mt-0.5 lg:mt-0",spellCheck:!1,value:H,onChange:e=>W(e.target.value),onKeyDown:e=>{("ArrowUp"===e.key||"ArrowDown"===e.key)&&e.preventDefault()}})]}),!eG&&(0,s.jsxs)("div",{className:"md:col-span-2 grid grid-cols-1 lg:grid-cols-2",children:[(0,s.jsx)("span",{className:"w-full md:col-span-2",children:(0,s.jsxs)("div",{className:"block w-fit ml-auto",children:[(0,s.jsx)(b.A,{variant:"light",className:"text-xs accent  disabled:text-gray-400 rounded",disabled:eh||ep||10!==H.length||J.length<3||Q.length<5,onPress:()=>{(!eh||ep)&&(tM(),em(60),ex(!0))},children:eh?"Resend OTP (".concat(Math.floor(eu/60),":").concat(eu%60,")"):"Resend OTP"}),(0,s.jsx)(b.A,{className:"px-3 ms-4 rounded bg-accent text-white disabled:!bg-gray-400 disabled:!hover:bg-gray-300 ring-accent",disabled:10!==H.length||J.length<3||Q.length<5||!ep,onPress:()=>{tM()},children:"Send OTP"})]})}),es&&(0,s.jsxs)("div",{className:"w-full md:col-span-2 mt-2",children:["OTP",(0,s.jsx)(m.Z,{value:et,onChange:ea,numInputs:6,renderSeparator:(0,s.jsx)("span",{children:"\xa0"}),inputStyle:"border rounded px-1 !w-8 outline-none",inputType:"number",renderInput:e=>(0,s.jsx)("input",{...e})}),(0,s.jsx)("span",{className:"".concat(eo?"visible":"invisible"," text-red-500 text-sm"),children:"Incorrect OTP"})]}),(0,s.jsx)("span",{className:" md:col-span-2 ",children:es&&(0,s.jsx)(b.A,{className:"px-3 py-1 rounded bg-accent  text-white md:col-span-2 disabled:bg-gray-300 block ml-auto",onPress:()=>{tO()},disabled:6!==et.length,children:"Confirm OTP"})})]}),!tf&&eG&&(0,s.jsxs)("div",{className:"md:col-span-2 grid grid-cols-1 lg:grid-cols-2",children:[(0,s.jsx)("span",{onClick:()=>{tE("tnc",1),1!==q.tnc?(tR(),eH(!0)):eH(!1)},children:(0,s.jsx)(f.K,{radius:"none",color:"success",classNames:{icon:"text-white",wrapper:"rounded",base:"my-0.5"},isSelected:1===q.tnc,onChange:()=>{tE("tnc",1),1!==q.tnc?(tR(),eH(!0)):eH(!1)},isRequired:!0,children:(0,s.jsxs)("div",{children:["Accept"," ",(0,s.jsx)("a",{href:"http://",target:"_blank",rel:"noopener noreferrer",className:"inline accent",children:"Terms and Conditions"})]})})}),eX&&(0,s.jsxs)("span",{className:"} md:col-span-2 grid grid-cols-1 lg:grid-cols-2",children:[(0,s.jsxs)("span",{className:"w-full md:col-span-2 flex flex-col ",children:["OTP Again",(0,s.jsx)(m.Z,{value:eV,onChange:eY,numInputs:6,renderSeparator:(0,s.jsx)("span",{children:"\xa0"}),inputStyle:"border rounded px-1 !w-8 outline-none",inputType:"number",renderInput:e=>(0,s.jsx)("input",{...e})}),(0,s.jsx)("span",{className:"".concat(eZ?"visible":"invisible"," text-red-500 text-sm"),children:"Wrong OTP"})]}),(0,s.jsx)("span",{className:"md:col-span-2",children:(0,s.jsx)(b.A,{className:"block ml-auto px-3 py-1 rounded bg-accent text-white md:col-span-2 disabled:bg-gray-300 ",onPress:()=>{tq()},disabled:6!==eV.length,children:"Confirm OTP Again"})})]})]})]}),2===e6&&(0,s.jsxs)("div",{className:"w-full bg-white px-2 md:px-4 pb-4 pt-1 relative flex flex-col items-start justify-start border",children:[(0,s.jsx)("span",{className:"text-2xl accent mb-3",children:"Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-2 gap-y-2 w-full",children:[(0,s.jsx)("div",{className:"relative flex gap-x-3 items-center lg:col-span-2 mb-2",children:(0,s.jsx)(f.K,{radius:"none",color:"success",classNames:{icon:"text-white",wrapper:"rounded"},isSelected:eW,onValueChange:e$,children:"Do you wish to exchange your device for another device?"})}),(0,s.jsxs)("div",{className:"w-full flex flex-col relative ",children:[(0,s.jsxs)("span",{children:["Old IMEI",(0,s.jsx)("span",{className:"text-red-500 text-sm",children:"*"})]}),(0,s.jsx)("input",{type:"number",name:"oldIMEI",value:ts.oldIMEI,onChange:e=>tF(e),className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded ".concat(tn.oldIMEI?"border-red-300":""),maxLength:15}),tn.oldIMEI&&(0,s.jsx)("span",{className:"text-red-500 relative top-0.5 text-xs",children:tn.oldIMEI})]}),(0,s.jsxs)("div",{className:"w-full flex relative gap-x-1",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col",children:[(0,s.jsxs)("span",{children:["New IMEI",eW&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:"*"})]}),(0,s.jsx)("input",{type:"number",name:"newIMEI",value:ts.newIMEI,onChange:e=>tF(e),className:"py-1 ps-3 pe-8 outline-none bg-transparent border rounded ".concat(tn.newIMEI?"border-red-300":""),maxLength:15}),tn.newIMEI&&(0,s.jsx)("span",{className:"text-red-500 relative top-0.5 text-xs",children:tn.newIMEI})]}),(0,s.jsx)(R,{setImeiFormData:tr,setErrors:tl,errors:tn})]})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col h-fit items-center sm:border border-gray-300 py-2 mt-2",children:[(0,s.jsx)("span",{className:"text-lg font-semibold",children:"User Documents"}),(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 w-full sm:px-2 items-center sm:mt-2 h-full gap-x-1",children:[(0,s.jsxs)("div",{className:"h-full w-full flex flex-col ",children:[(0,s.jsxs)("div",{className:"text-center",children:["Front Aadhar",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("span",{className:"h-40 w-full border-2 border-dashed border-gray-400 overflow-hidden",children:(0,s.jsx)(l.Z,{maxNumber:1,folderName:ef,s3imageUrlArray:ey,setS3imageUrlArray:ew,tag:"front_aadhar",imageName:eq,setImageName:eB,setAadharCount:ez,aadharCount:eU})})]}),(0,s.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,s.jsxs)("span",{className:"text-center",children:["Back Aadhar",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("span",{className:"h-40 w-full border-2 border-dashed border-gray-400 overflow-hidden",children:(0,s.jsx)(l.Z,{maxNumber:1,folderName:ef,s3imageUrlArray:ey,setS3imageUrlArray:ew,tag:"back_aadhar",imageName:eq,setImageName:eB,setAadharCount:ez,aadharCount:eU})})]})]})})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col items-center sm:border border-gray-300 py-2 mt-2",children:[(0,s.jsx)("span",{className:"text-lg font-semibold",children:"Invoice"}),(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 w-full sm:px-2 items-center sm:mt-2 h-full space-x-1",children:[(0,s.jsxs)("div",{className:"h-full w-full flex flex-col ",children:[(0,s.jsx)("div",{className:"text-center",children:"Invoice Front"}),(0,s.jsx)("span",{className:"h-40 max-h-[150px] w-full border-2 border-dashed border-gray-400 overflow-hidden",children:(0,s.jsx)(l.Z,{maxNumber:1,folderName:ef,s3imageUrlArray:ey,setS3imageUrlArray:ew,tag:"front_invoice",imageName:eq,setImageName:eB})})]}),(0,s.jsxs)("span",{className:"h-full w-full flex flex-col",children:[(0,s.jsx)("span",{className:"text-center",children:"Invoice Back"}),(0,s.jsx)("span",{className:"h-40 max-h-[150px] w-full border-2 border-dashed border-gray-400 overflow-hidden",children:(0,s.jsx)(l.Z,{maxNumber:1,folderName:ef,s3imageUrlArray:ey,setS3imageUrlArray:ew,tag:"back_invoice",imageName:eq,setImageName:eB})})]})]})})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col items-center sm:border border-gray-300 pt-2 pb-5 sm:px-2 mt-2",children:[(0,s.jsx)("span",{className:"text-lg font-semibold",children:"Photos of Mobile"}),(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsx)("span",{className:"grid grid-cols-2 md:grid-cols-3 w-full sm:mt-2 h-full gap-x-1 gap-y-1",children:["Top","Bottom","Left","Right","Front","Back"].map(e=>(0,s.jsxs)("span",{className:"flex flex-col ",children:[(0,s.jsxs)("span",{className:"text-center",children:[e,(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("span",{className:"h-40 w-full border-2 border-dashed border-gray-400 overflow-hidden",children:(0,s.jsx)(l.Z,{maxNumber:1,folderName:ef,s3imageUrlArray:ey,setS3imageUrlArray:ew,tag:e,imageName:eq,setImageName:eB,phoneCount:eL,setPhoneCount:eK})})]},e))})})]}),(0,s.jsx)("div",{className:"w-full flex justify-end items-center",children:(0,s.jsx)(b.A,{className:"bg-accent py-1 px-3 rounded text-white mt-3 disabled:bg-gray-400 disabled:hover:bg-gray-400",onPress:tz,children:"Submit"})})]}),3===e6&&(0,s.jsxs)("div",{className:"w-full bg-white px-4 pb-4 pt-1 border border-gray-300 relative flex flex-col items-start justify-start",children:[(0,s.jsx)("span",{className:"text-2xl accent mb-3",children:"Indemnity Bond"}),(0,s.jsxs)("div",{className:"grid gap-x-4 gap-y-2 w-full",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col relative",children:[(0,s.jsxs)("span",{children:["Executive:"," ","true"===tu&&(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),"false"===tu&&(0,s.jsx)("input",{value:$,className:"py-1 ps-3 pe-8 outline-none border rounded bg-gray-100 capitalize",onChange:()=>null}),"true"===tu&&(0,s.jsxs)("select",{name:"execName",id:"execName",className:"py-1 ps-3 pe-8 ring-accent border rounded ".concat(ti?"border-red-300":""),value:th,onChange:e=>{tx(e.target.value),tc("")},children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select an executive"}),to.map((e,t)=>(0,s.jsx)("option",{value:null==e?void 0:e.executive_id,className:"capitalize",children:null==e?void 0:e.name},t))]}),ti&&(0,s.jsx)("span",{className:"text-red-500 relative top-0.5 text-xs",children:ti})]}),(0,s.jsx)(S,{buyerData:e0,sign:tw,generateContent:tV,printReceipt:tY}),(0,s.jsx)("p",{className:"text-lg mt-2",children:"Please Add Your Signature"}),(0,s.jsx)(T(),{ref:ty,canvasProps:{className:"sigCanvas border border-2 border-gray-300 border-dashed w-full h-40"}}),(0,s.jsxs)("div",{className:"relative space-x-2 mt-2",children:[(0,s.jsx)(b.A,{color:"danger",variant:"light",className:"px-6 py-2 rounded ring-custom !ring-red-400",onPress:t$,children:"Reset"}),(0,s.jsx)(b.A,{color:"primary",className:"px-6 py-2 text-white rounded ring-custom !ring-blue-400",onPress:t0,children:"Crop Signature"})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(b.A,{isLoading:tv,className:"ms-auto rounded bg-accent text-white ring-accent flex items-center",onPress:()=>tG(e),children:"Submit"})})]})]})]})]})]})})}),eN&&(0,s.jsx)("div",{className:"flex w-screen h-screen fixed top-0 right-0 z-50 overflow-hidden backdrop-blur-sm justify-center items-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"w-full md:w-[500px] h-auto bg-white px-6 md:px-10 py-10 rounded-lg relative shadow-xl flex flex-col items-center justify-center animate-fade-in",children:[(0,s.jsx)("span",{className:"absolute top-4 right-4 text-red-500 cursor-pointer ",onClick:()=>{e.push("/")},children:(0,s.jsx)("i",{className:"bi bi-x-lg text-2xl"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("i",{className:"bi bi-check-circle text-green-500 text-5xl mb-4"}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-gray-800",children:"Order Created Successfully"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2 text-center",children:"Your order has been created successfully."})]})]})})]}):(0,s.jsxs)("div",{className:"w-screen min-h-screen flex justify-center items-center",children:[(0,s.jsx)(c(),{children:(0,s.jsx)("title",{children:"BuyBack - Error"})}),(0,s.jsx)("p",{children:"No product data available"})]})}},58386:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(67294),r=function(e){return"object"==typeof e&&null!==e},n=function(e){var t=e.value,a=void 0===t?"":t,n=e.numInputs,l=void 0===n?4:n,i=e.onChange,c=e.onPaste,o=e.renderInput,d=e.shouldAutoFocus,u=void 0!==d&&d,m=e.inputType,h=void 0===m?"text":m,x=e.renderSeparator,p=e.placeholder,g=e.containerStyle,f=e.inputStyle,b=e.skipDefaultStyles,y=void 0!==b&&b,w=s.useState(0),j=w[0],v=w[1],N=s.useRef([]),A=function(){return a?a.toString().split(""):[]},I="number"===h||"tel"===h;s.useEffect(function(){N.current=N.current.slice(0,l)},[l]),s.useEffect(function(){var e;u&&(null===(e=N.current[0])||void 0===e||e.focus())},[u]);var S=function(){if("string"==typeof p){if(p.length===l)return p;p.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},E=function(e){return(I?!isNaN(Number(e)):"string"==typeof e)&&1===e.trim().length},_=function(e){var t=e.target.value;E(t)&&(T(t),P(j+1))},k=function(e){var t=e.nativeEvent,a=e.target.value;E(a)||(a.length!==l||a.split("").some(function(e){return!E(e)})||(M(a.split("")),P(l-1)),null===t.data&&"deleteContentBackward"===t.inputType&&(e.preventDefault(),T(""),P(j-1)),e.target.value="")},C=function(){v(j-1)},D=function(e){var t=A();[e.code,e.key].includes("Backspace")?(e.preventDefault(),T(""),P(j-1)):"Delete"===e.code?(e.preventDefault(),T("")):"ArrowLeft"===e.code?(e.preventDefault(),P(j-1)):"ArrowRight"===e.code?(e.preventDefault(),P(j+1)):e.key===t[j]?(e.preventDefault(),P(j+1)):("Spacebar"===e.code||"Space"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code)&&e.preventDefault()},P=function(e){var t,a,s=Math.max(Math.min(l-1,e),0);N.current[s]&&(null===(t=N.current[s])||void 0===t||t.focus(),null===(a=N.current[s])||void 0===a||a.select(),v(s))},T=function(e){var t=A();t[j]=e[0],M(t)},M=function(e){i(e.join(""))},R=function(e){e.preventDefault();var t,a=A(),s=j,r=e.clipboardData.getData("text/plain").slice(0,l-j).split("");if(!(I&&r.some(function(e){return isNaN(Number(e))}))){for(var n=0;n<l;++n)n>=j&&r.length>0&&(a[n]=null!==(t=r.shift())&&void 0!==t?t:"",s++);P(s),M(a)}};return s.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},r(g)&&g),className:"string"==typeof g?g:void 0,onPaste:c},Array.from({length:l},function(e,t){return t}).map(function(e){var t,a,n;return s.createElement(s.Fragment,{key:e},o({value:null!==(t=A()[e])&&void 0!==t?t:"",placeholder:null!==(n=null===(a=S())||void 0===a?void 0:a[e])&&void 0!==n?n:void 0,ref:function(t){return N.current[e]=t},onChange:_,onFocus:function(t){v(e),t.target.select()},onBlur:C,onKeyDown:D,onPaste:R,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(y?{}:{width:"1em",textAlign:"center"},r(f)?f:{}),className:"string"==typeof f?f:void 0,type:h,inputMode:I?"numeric":"text",onInput:k},e),e<l-1&&("function"==typeof x?x(e):x))}))}}},function(e){e.O(0,[4838,8838,1773,1761,5798,5422,8877,2888,9774,179],function(){return e(e.s=10597)}),_N_E=e.O()}]);