(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{4201:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/orders",function(){return s(1844)}])},2115:function(e,t,s){"use strict";var a=s(5893);s(7294),t.Z=e=>{let{itemsPerPage:t,setItemsPerPage:s,currentPage:r,setCurrentPage:l,totalEntries:n,totalPages:i}=e;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("label",{htmlFor:"items",className:"text-sm",children:"Items per page:"}),(0,a.jsx)("select",{id:"items",className:"border border-gray-300 rounded-md py-1 px-2 outline-none",value:t,onChange:e=>{s(parseInt(e.target.value,10)),l(1)},children:[15,20,25,30,35].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-3 md:mt-0",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:[t*r-t+1," to"," ",t*r<n?t*r:n," ","of ",n]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>l(1),disabled:1===r,className:"p-2 rounded-full ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>l(e=>e>1?e-1:e),disabled:1===r,className:"p-2 rounded-full ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>l(e=>e<i?e+1:e),disabled:r===i,className:"p-2 rounded-full ".concat(r<i?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-right text-lg"})}),(0,a.jsx)("button",{onClick:()=>l(i),disabled:r===i,className:"p-2 rounded-full ".concat(r<i?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-right text-lg"})})]})]})]})}},4625:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7294);function r(e,t){let[s,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let s=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(s)}},[e,t]),s}},1844:function(e,t,s){"use strict";s.r(t);var a=s(5893),r=s(7294),l=s(4625),n=s(2115),i=s(1163),c=s(4059),d=s(9621),o=s(843),m=s(5066),x=s(5961),u=s.n(x),h=s(5152);s.n(h)()(()=>s.e(607).then(s.t.bind(s,8607,23)),{loadableGenerated:{webpack:()=>[8607]},ssr:!1}),t.default=()=>{(0,i.useRouter)();let[e,t]=(0,r.useState)(""),[x,h]=(0,r.useState)([]),[p,g]=(0,r.useState)(null),[b,f]=(0,r.useState)(null),[j,N]=(0,r.useState)(15),[y,v]=(0,r.useState)(1),[w,_]=(0,r.useState)(1),[k,C]=(0,r.useState)(!1),[S,A]=(0,r.useState)(""),[D,P]=(0,r.useState)(""),[E,q]=(0,r.useState)(""),[F,I]=(0,r.useState)(""),[O,X]=(0,r.useState)(!0),[z,T]=(0,r.useState)({key:"",direction:"ascending"}),[M,Z]=(0,r.useState)([]),[G,L]=(0,r.useState)({startDate:"",endDate:""}),K=e=>{let{name:t,value:s}=e.target;"location"===t&&shipmentID||L(e=>({...e,[t]:s}))},H=async()=>{C(!0);try{let t=z.key,s="descending"===z.direction,a=await fetch("".concat("https://buybackservice.unicornstore.in","/get-order-details-by-staff?staff_id=").concat(e,"&per_page=").concat(j,"&page=").concat(w,"&search=").concat(E,"&sort_by=").concat(t,"&sort_desc=").concat(s,"&from_date=").concat(G.startDate,"&to_date=").concat(G.endDate));if(!a.ok)throw Error("Could not get order details by staff id");let r=await a.json();0===r.data.length?I("No entries found, please refine your search query"):I(""),h(r.data.length>0?r.data:[]),v(Math.ceil(r.total_count/j)),P(r.total_count),A("")}catch(e){console.log(e),A(e)}finally{setTimeout(()=>{C(!1)},600)}},J=e=>{g(e)},Q=e=>{f(e)},R=e=>{let t="ascending";z.key===e&&"ascending"===z.direction&&(t="descending"),T({key:e,direction:t}),_(1)};(0,r.useEffect)(()=>{t(localStorage.getItem("staff_id")),e&&H()},[e,j,w,z]),(0,r.useEffect)(()=>{p||b?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden")},[p,b]);let B=(0,l.Z)(E,500);(0,r.useEffect)(()=>{""!==B&&(_(1),H())},[B,E]);let U=e=>z.key!==e?null:"ascending"===z.direction?(0,a.jsx)("i",{className:"bi bi-arrow-up"}):(0,a.jsx)("i",{className:"bi bi-arrow-down"}),V=e=>{let t=document.createElement("svg");u()(t,e,{format:"CODE128",width:1,height:20,margin:0});let s=t.querySelector("text");s&&s.remove();let a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style","font: 8px monospace; fill: black; line-height: 0.5em"),a.setAttribute("text-anchor","middle"),a.setAttribute("x","35"),a.setAttribute("y",35),a.textContent="OID: ".concat(e),t.appendChild(a);let r=t.outerHTML;return'\n      <div style="font-size: 10px; width: 25mm; height: 11mm; padding: 0; display: flex; align-items: center; justify-content: center; padding: 8px 0px 0px 0px; border:0.1px solid black; box-sizing:border-box">\n        '.concat(r,"\n      </div>\n    ")},W=e=>{s.e(607).then(s.t.bind(s,8607,23)).then(t=>{(0,t.default)({printable:V(e),type:"raw-html",style:"\n            @page { \n              size: 25mm 14mm; \n              margin: 0; \n            } \n            body { \n              display: flex; \n              align-items: center; \n              justify-content: center; \n              height: 100%; \n            } \n          "})}).catch(e=>{console.error("Failed to load printJS:",e)})};return(0,a.jsx)("div",{className:"flex justify-center bg-gray-100 min-h-screen relative -top-28",children:(0,a.jsx)("div",{className:"container max-w-screen-xl ",children:(0,a.jsxs)("div",{className:"flex flex-col justify-center space-y-2 bg-white shadow p-4 my-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"relative pb-4",children:[(0,a.jsx)(c.d,{variant:"bordered",selectedKeys:M,onSelectionChange:Z,children:(0,a.jsx)(d.G,{"aria-label":"Filters",title:"Filters",startContent:(0,a.jsx)("i",{className:"fas fa-filter"}),children:(0,a.jsxs)("div",{className:"border-t grid grid-cols-2 gap-4 pt-2",children:[(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("label",{htmlFor:"startDate",className:"mb-1",children:"Date From:"}),(0,a.jsx)("input",{type:"date",name:"startDate",id:"startDate",value:G.startDate,onChange:K,className:"px-4 py-1 border rounded w-full outline-none"})]}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("label",{htmlFor:"endDate",className:"mb-1",children:"Date To:"}),(0,a.jsx)("input",{type:"date",name:"endDate",id:"endDate",value:G.endDate,onChange:K,className:"px-4 py-1 border rounded w-full outline-none"})]}),(0,a.jsx)("div",{className:"col-span-2 relative flex justify-center",children:(0,a.jsxs)("button",{className:"bg-accent px-4 py-1 rounded text-white ring-accent",onClick:()=>{H(),Z("0")},children:[(0,a.jsx)("i",{className:"fa-solid fa-filter me-2"}),"Filter"]})})]})},"1")}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2 mt-3",children:[(0,a.jsx)("label",{className:"text-sm text-gray-700",children:"Search by Customer Name, Final Price or Product Name"}),(0,a.jsxs)("span",{className:"w-full grid grid-cols-1 md:grid-cols-6 md:space-x-2",children:[(0,a.jsx)("input",{type:"text",className:"border border-gray-400 py-2 px-4 rounded-md ring-accent col-span-5 transition-all",name:"search-bar",value:E,onChange:e=>q(e.target.value),spellCheck:!1,autoComplete:"off"}),(0,a.jsx)("button",{className:"mt-2 md:mt-0 px-3 py-1 rounded bg-accent text-white cursor-pointer ring-accent",onClick:()=>{q(""),T({key:"",direction:"ascending"}),L({startDate:"",endDate:""})},children:"Clear All Filters"})]})]}),(0,a.jsxs)("div",{className:"mt-4 rounded-md p-4 text-md",children:[(0,a.jsxs)("table",{className:"min-w-full table-auto bg-white rounded overflow-hidden shadow",children:[(0,a.jsx)("thead",{className:"bg-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>R("order_detail_id"),children:["Order ID ",U("order_detail_id")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>R("customer_name"),children:["Customer Name ",U("customer_name")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>R("order_status"),children:["Order Status ",U("order_status")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>R("price"),children:["Final Price ",U("price")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>R("product_name"),children:["Product Name ",U("product_name")]}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:k?Array(j).fill(0).map((e,t)=>(0,a.jsxs)("tr",{className:"divide-x hover:bg-gray-100",children:[(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})}),(0,a.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,a.jsx)(o.X,{className:"h-5 rounded-full"})})]},t)):x.map((e,t)=>(0,a.jsxs)("tr",{className:"text-center  text-sm md:text-base divide-x hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-1.5",children:e.order_id}),(0,a.jsx)("td",{className:"py-1.5",children:e.customer_name}),(0,a.jsx)("td",{className:"py-1.5",children:e.order_status}),(0,a.jsx)("td",{className:"py-1.5",children:(0,m.fK)(e.price)}),(0,a.jsx)("td",{className:"py-1.5",children:e.product_name}),(0,a.jsxs)("td",{className:"py-1.5 flex gap-x-4 justify-center",children:[p===e.order_detail_id&&(0,a.jsx)("div",{id:"imageGalleryModal",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm overflow-hidden",children:(0,a.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"relative w-full max-w-3xl bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsx)("span",{className:"absolute top-4 right-4 z-20 cursor-pointer rounded px-1 text-red-500 hover:bg-[#AAAAAA60] transition duration-200",onClick:()=>g(!1),children:(0,a.jsx)("i",{className:"bi bi-x-lg text-2xl"})}),(0,a.jsx)("div",{className:"p-6 grid grid-cols-2 sm:grid-cols-4 gap-4 overflow-y-auto max-h-[100vh]",children:e.images&&e.images.map((e,t)=>(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-lg shadow-md border flex flex-col pb-2",children:[(0,a.jsx)("p",{className:"w-full text-center",children:Object.keys(e)}),(0,a.jsx)("div",{className:"my-auto",children:(0,a.jsx)("img",{src:e[Object.keys(e)[0]],alt:"Product Image",className:"object-contain object-center w-full h-48"})})]},t))})]})}),b===e.order_detail_id&&(0,a.jsx)("div",{id:"qnaModal",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm overflow-hidden",children:(0,a.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"relative w-full max-w-screen-xl bg-white rounded-lg shadow-lg overflow-hidden min-h-fit",children:[(0,a.jsx)("span",{className:"absolute top-4 right-4 z-20 cursor-pointer rounded px-1 text-red-500 hover:bg-[#AAAAAA60] transition duration-200",onClick:()=>f(!1),children:(0,a.jsx)("i",{className:"bi bi-x-lg text-2xl"})}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto 2xl:overflow-y-clip max-h-[80vh]",children:e.qna&&e.qna.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:e.qna.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded p-4 shadow-sm bg-gray-50",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Question:"}),(0,a.jsx)("p",{children:e.question}),(0,a.jsx)("div",{className:"font-semibold mt-2",children:"Answer:"}),(0,a.jsx)("p",{children:e.answer})]},t))}):(0,a.jsx)("p",{children:"No questions available."})})]})}),(0,a.jsx)("button",{className:"fas fa-image p-1.5 rounded transition-all border border-blue-300 bg-blue-100 text-blue-500 hover:bg-blue-500 hover:text-white cursor-pointer ring-custom ring-blue-400",onClick:()=>J(e.order_detail_id),disabled:!(e.images&&e.images.length>0)}),(0,a.jsx)("button",{className:"far fa-circle-question p-1.5 rounded transition-all border border-accent border-opacity-30 bg-accent-dimmed accent hover:bg-[var(--accent-color)] hover:text-white cursor-pointer ring-accent",onClick:()=>Q(e.order_detail_id),disabled:!(e.qna&&e.qna.length>0)}),(0,a.jsx)("button",{className:"fas fa-print p-1.5 rounded transition-all border border-purple-300 bg-purple-100 text-purple-500 hover:bg-purple-500 hover:text-white cursor-pointer ring-custom ring-purple-400",onClick:()=>W(e.order_id)})]})]},t))})]}),F&&(0,a.jsx)("div",{className:"text-red-500 text-center pt-2 min-h-96",children:F}),S&&(0,a.jsx)("div",{className:"text-red-500 text-center pt-2 min-h-96",children:"Something went wrong"})]})]}),(0,a.jsx)(n.Z,{itemsPerPage:j,setItemsPerPage:N,currentPage:w,setCurrentPage:_,totalEntries:D,totalPages:y})]})})})}}},function(e){e.O(0,[260,427,854,720,888,774,179],function(){return e(e.s=4201)}),_N_E=e.O()}]);