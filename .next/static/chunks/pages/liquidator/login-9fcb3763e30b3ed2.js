(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{5058:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/liquidator/login",function(){return a(5213)}])},5213:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return u}});var t=a(5893),r=a(9412),n=a(1163),o=a(7294),l=a(9134),i=a(8386),d=()=>{let e="https://buybackservice.unicornstore.in",[s,a]=(0,o.useState)(!1),[d,c]=(0,o.useState)(""),m=(0,n.useRouter)(),[u,p]=(0,o.useState)({username:"",password:""}),[x,h]=(0,o.useState)({username:"",password:""}),[b,w]=(0,o.useState)("username"),[g,N]=(0,o.useState)(""),[f,j]=(0,o.useState)(!1),[y,v]=(0,o.useState)(0),[S,_]=(0,o.useState)(""),[P,k]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=localStorage.getItem("liquidator_token"),s=localStorage.getItem("liquidator_name");e&&s&&m.replace("/liquidator")},[m]);let C=e=>{let{name:s,value:a}=e.target;p({...u,[s]:a}),"phone"===b&&j(!1),h(e=>{let t={...e};return"username"===s&&(a.trim()?"phone"===b&&10!==a.length?t.username="Phone number must be 10 digits":t.username="":t.username="".concat("username"===b?"Username":"Phone number"," is required")),"password"===s&&(a.trim()?t.password="":t.password="Password is required"),t})},q=()=>{let e={};return u.username.trim()||(e.username="".concat("username"===b?"Username":"Phone number"," is required")),"phone"===b&&10!==u.username.length&&(e.username="Phone number must be 10 digits"),"username"!==b||u.password.trim()||(e.password="Password is required"),"phone"===b&&f&&!g.trim()&&(e.password="OTP is required"),h(e),0===Object.keys(e).length},E=async s=>{if(s.preventDefault(),!q())return;if(k(!0),!s.target.reportValidity()){console.log("error in form");return}let a=new FormData;a.append("username",u.username),a.append("password",u.password),c("");try{let s=await fetch("".concat(e,"/liquidator/token"),{method:"POST",body:a}),t=await s.json();if(!s.ok)throw(null==t?void 0:t.detail)==="Incorrect username or password"&&(c(null==t?void 0:t.detail),l.Am.error(null==t?void 0:t.detail)),c("Something went wrong"),Error("Something went wrong");localStorage.setItem("liquidator_token",t.access_token),localStorage.setItem("liquidator_name",t.name),localStorage.setItem("liquidator_id",t.liquidator_id),localStorage.setItem("H7kjAJ",t.registration_completed),t.registration_completed?m.push("/liquidator"):m.push("/liquidator/profile")}catch(e){console.log(e),l.Am.error(e)}k(!1)},I=async s=>{if(s.preventDefault(),q()){if(!f){O();return}try{k(!0),c(null);let s=await fetch("".concat(e,"/confirm_executive_otp"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({otp:g,executive_id:S,otp_for:"executive_log"})});if(!s.ok)throw Error("Could not confirm OTP");let a=await s.json();if("success"!==a.status)throw Error(a.message);localStorage.setItem("warehouse_token",a.access_token),localStorage.setItem("warehouse_name",a.name),localStorage.setItem("warehouse_id",a.warehouse_id),m.replace("/warehouse")}catch(e){c("Something went wrong: ".concat(e.message)),l.Am.error(e.message)}finally{k(!1)}}},O=async()=>{try{k(!0);let s=await fetch("".concat(e,"/send-opt-to-executive/"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({number:u.username,otp_for:"executive_log"})});if(!s.ok)throw Error("Could not send OTP");let a=await s.json();if("success"!==a.status)throw Error(a.message)}catch(e){l.Am.error(e.message)}finally{k(!1),j(!0),v(60)}},A=async()=>{A>0||O()};return(0,o.useEffect)(()=>{let e;return y>0&&(e=setInterval(()=>{v(e=>e-1)},1e3)),()=>clearInterval(e)},[y]),(0,t.jsx)("div",{className:"flex items-center justify-center py-20 bg-white -mt-20",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Liquidator Login"}),"username"===b&&(0,t.jsxs)("form",{onSubmit:e=>E(e),children:[(0,t.jsxs)("div",{className:"mb-6 relative",children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-gray-700 mb-0.5",children:"Username or Email Address"}),(0,t.jsx)("input",{type:"text",id:"username",name:"username",value:u.username,onChange:e=>C(e),className:"w-full p-3 border border-gray-300 rounded-lg ring-accent ".concat(x.username?"border-red-300":""),placeholder:"Enter username or email",autoComplete:"email"}),x.username&&(0,t.jsx)("span",{className:"text-red-500 text-xs absolute left-0 -bottom-5",children:x.username})]}),(0,t.jsxs)("div",{className:"mb-6 relative",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-gray-700 mb-0.5",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:s?"text":"password",id:"password",name:"password",value:u.password,onChange:e=>C(e),className:"w-full p-3 border border-gray-300 rounded-lg ring-accent ".concat(x.password?"border-red-300":""),placeholder:"Enter password",autoComplete:"current-password"}),(0,t.jsx)("span",{tabIndex:0,className:"absolute inset-y-0 text-gray-500 cursor-pointer content-center right-0 pe-3 ps-3 rounded-e-lg hover:bg-gray-100 hover:bg-opacity-50 focus:bg-gray-200 focus:bg-opacity-50 outline-none",onClick:()=>{a(e=>!e)},children:(0,t.jsx)("i",{className:"bi ".concat(s?"bi-eye-slash":"bi-eye")})})]}),x.password&&(0,t.jsx)("span",{className:"text-red-500 text-xs absolute left-0 -bottom-5",children:x.password})]}),d&&(0,t.jsx)("p",{className:"text-red-500 text-sm mb-4",children:d}),(0,t.jsx)(r.A,{isLoading:P,type:"submit",className:"w-full bg-accent text-white p-3 rounded-lg transition duration-300",children:"Login"})]}),"phone"===b&&(0,t.jsxs)("form",{onSubmit:e=>I(e),children:[(0,t.jsxs)("div",{className:"mb-4 relative",children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-gray-700 mb-2",children:"Phone Number"}),(0,t.jsx)("input",{type:"number",id:"username",name:"username",value:u.username,onChange:e=>C(e),className:"w-full p-3 border border-gray-300 rounded-lg ring-accent ".concat(x.username?"border-red-300":""),placeholder:"Enter your phone number",autoComplete:"tel"}),x.username&&(0,t.jsx)("span",{className:"text-red-500 text-xs",children:x.username})]}),(0,t.jsxs)("div",{className:"mb-4 relative",children:[(0,t.jsx)("label",{htmlFor:"OTP",className:"block text-gray-700 mb-2",children:"OTP"}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)(i.Z,{id:"OTP",value:g,onChange:N,numInputs:6,renderSeparator:(0,t.jsx)("span",{children:"\xa0"}),inputStyle:"border rounded p-0.5 w-8 outline-none",renderInput:e=>(0,t.jsx)("input",{...e})})}),x.password&&(0,t.jsx)("span",{className:"text-red-500 text-xs",children:x.password})]}),d&&(0,t.jsx)("p",{className:"text-red-500 text-sm mb-4",children:d}),(0,t.jsx)(r.A,{isLoading:P,type:"submit",className:"w-full bg-accent text-white p-3 rounded-lg transition duration-300 ring-accent",children:f?"Login":"Send OTP"})]}),(0,t.jsx)("div",{className:"relative flex justify-between mt-4",children:"phone"===b&&f&&(0,t.jsxs)("button",{className:"w-fit block mr-auto accent disabled:text-gray-400",disabled:y>0,onClick:A,children:["Resend OTP ",y>0?"in ".concat(y):""]})})]})})},c=a(9008),m=a.n(c);a(5675),a(2130);var u=function(){let e=(0,n.useRouter)(),[s,a]=(0,o.useState)("login"),[r,i]=(0,o.useState)({companyName:"",firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[c,u]=(0,o.useState)(!1),[p,x]=(0,o.useState)(!1),[h,b]=(0,o.useState)({}),[w,g]=(0,o.useState)(!1),N=e=>{let{name:s,value:a}=e.target;i(e=>({...e,[s]:a}))},f=()=>{i({companyName:"",firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""})},j=()=>{let e={};return r.companyName.trim()||(e.companyName="Company Name is required"),r.firstName.trim()||(e.firstName="First Name is required"),r.lastName.trim()||(e.lastName="Last Name is required"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(e.email="Email is invalid"):e.email="Email is required",r.phone.trim()||(e.phone="Phone Number is required"),r.password.trim()||(e.password="Password is required"),r.confirmPassword.trim()||(e.confirmPassword="Confirm Password is required"),r.password!==r.confirmPassword&&(e.confirmPassword="Passwords do not match"),b(e),0===Object.keys(e).length},y=async s=>{if(s.preventDefault(),j()){g(!0);try{let s=await fetch("".concat("https://buybackservice.unicornstore.in","/create-liquidator"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.firstName+" "+r.lastName,email:r.email,phone_number_1:r.phone,company_name:r.companyName,password:r.password,company_status:1})}),a=await s.json();if(!s.ok)throw Error("Could not create liquididator");"liquidator already exists"===a.message?l.Am.warn("User already exists, Login instead"):"error"===a.status?l.Am.error(a.message):(localStorage.setItem("liquidator_token",null==a?void 0:a.access_token),localStorage.setItem("liquidator_name","lorem "),localStorage.setItem("liquidator_id",null==a?void 0:a.liquidator_id),localStorage.setItem("H7kjAJ",null==a?void 0:a.registration_completed),e.push("/liquidator/profile"),console.log("form is valid"))}catch(e){console.log(e)}g(!1)}};return(0,t.jsxs)("div",{className:"container px-2 md:px-3 lg:px-4 xl:px-5 py-14 mx-auto min-h-screen",children:[(0,t.jsx)(m(),{children:(0,t.jsx)("title",{children:"BuyBack - Login"})}),(0,t.jsx)("div",{className:"flex flex-wrap -m-4 justify-center ".concat((null==s?void 0:s.length)===0?"":"hidden")}),"signup"===s&&(0,t.jsx)("div",{className:"relative flex flex-col items-center w-full ",children:(0,t.jsxs)("div",{className:"w-full md:w-2/3 border p-4 rounded shadow-lg",children:[(0,t.jsx)("span",{className:"font-semibold text-xl h-fit",children:"Create an Account"}),(0,t.jsx)("div",{className:"w-full mt-5",children:(0,t.jsxs)("form",{className:"grid grid-cols-3 gap-y-2 gap-x-2",onSubmit:e=>{y(e)},children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-5 col-span-3 ",children:[(0,t.jsxs)("div",{className:"relative col-span-2",children:[(0,t.jsxs)("label",{htmlFor:"companyName",children:["Company Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"companyName",value:r.companyName,onChange:N,className:"border px-2 py-1 rounded w-full outline-none col-span-2 ".concat(h.companyName?"border-red-300":"")}),h.companyName&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.companyName})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"firstName",children:["First Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"firstName",value:r.firstName,onChange:N,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.firstName?"border-red-300":""),autoComplete:"first-name"}),h.firstName&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.firstName})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"lastName",children:["Last Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"lastName",value:r.lastName,onChange:N,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.lastName?"border-red-300":""),autoComplete:"family-name"}),h.lastName&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.lastName})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"email",className:"col-span-2",children:["Email ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"email",value:r.email,onChange:N,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.email?"border-red-300":"")}),h.email&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.email})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"lastName",children:["Phone Number ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"number",name:"phone",value:r.phone,onChange:N,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.phone?"border-red-300":""),onKeyDown:e=>{("ArrowUp"===e.key||"ArrowDown"===e.key)&&e.preventDefault()}}),h.phone&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.phone})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"password",className:"col-span-2",children:["Password ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("span",{className:"w-full bg-white border px-2 py-1 rounded shadow-sm flex justify-between items-center ".concat(h.password?"border-red-300":""),children:[(0,t.jsx)("input",{type:"".concat(c?"text":"password"),name:"password",className:"outline-none w-full px-2 ",value:r.password,onChange:N,autoComplete:"new-password"}),(0,t.jsx)("i",{className:"bi ".concat(c?"bi-eye-slash":"bi-eye"," cursor-pointer"),onClick:()=>u(!c)})]}),h.password&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.password})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"lastName",children:["Confirm Password ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("span",{className:"w-full bg-white border px-2 py-1 rounded shadow-sm flex justify-between items-center ".concat(h.confirmPassword?"border-red-300":""),children:[(0,t.jsx)("input",{type:"".concat(p?"text":"password"),name:"confirmPassword",className:"outline-none w-full px-2 ",value:r.confirmPassword,onChange:N,autoComplete:"new-password"}),(0,t.jsx)("i",{className:"bi ".concat(p?"bi-eye-slash":"bi-eye"," cursor-pointer"),onClick:()=>x(!p)})]}),h.confirmPassword&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.confirmPassword})]})]}),(0,t.jsxs)("div",{className:"relative mt-3 col-span-3 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-x-3 gap-y-3",children:[(0,t.jsx)("button",{className:"bg-accent text-white px-4 py-1 rounded flex justify-center items-center",type:"submit",children:w?(0,t.jsx)("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent  rounded-full animate-spin"}):"Register"}),(0,t.jsx)("button",{className:"md:col-start-3 lg:col-start-5 bg-accent py-1 col-span-2 md:col-span-1 rounded text-white",onClick:()=>{a("login"),f()},children:"Login Instead?"})]})]})})]})}),"login"===s&&(0,t.jsx)(d,{setAction:a})]})}},9008:function(e,s,a){e.exports=a(7828)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5058)}),_N_E=e.O()}]);