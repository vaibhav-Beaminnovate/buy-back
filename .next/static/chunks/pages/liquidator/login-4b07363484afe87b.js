(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{5058:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/liquidator/login",function(){return a(5213)}])},5213:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return c}});var t=a(5893),r=a(1163),l=a(7294),o=a(9134),n=e=>{let{setAction:s}=e,a=(0,r.useRouter)(),[n,i]=(0,l.useState)(!0),[d,c]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[p,x]=(0,l.useState)(""),[h,w]=(0,l.useState)(!1),N=async e=>{if(w(!0),e.preventDefault(),!e.target.reportValidity()){console.log("error in form");return}let s=new FormData;s.append("username",d),s.append("password",m),x("");try{let e=await fetch("".concat("https://buybackservice.unicornstore.in","/liquidator/token"),{method:"POST",body:s}),t=await e.json();if(!e.ok)throw(null==t?void 0:t.detail)==="Incorrect username or password"&&(x("Incorrect username or password"),o.Am.error("Incorrect Username or Password",{toastId:"passwordError"})),x("Something went wrong"),Error("Something went wrong");localStorage.setItem("liquidator_token",t.access_token),localStorage.setItem("liquidator_name",t.name),localStorage.setItem("liquidator_id",t.liquidator_id),localStorage.setItem("H7kjAJ",t.registration_completed),t.registration_completed?a.push("/liquidator"):a.push("/liquidator/profile")}catch(e){console.log(e),o.Am.error(e)}w(!1)};return(0,t.jsx)("div",{className:"w-full flex justify-center",children:(0,t.jsxs)("div",{className:"w-full md:w-2/3 border p-4 rounded shadow-lg",children:[(0,t.jsx)("span",{className:"font-semibold text-xl h-fit",children:"Login"}),(0,t.jsxs)("form",{className:"flex flex-col w-full mt-5",onSubmit:N,children:[(0,t.jsxs)("label",{htmlFor:"email",children:["Email ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"email",id:"liqmail",className:"outline-none border px-2 py-1 rounded w-full shadow-sm",value:d,onChange:e=>c(e.target.value),autoComplete:"username",required:!0}),(0,t.jsxs)("label",{htmlFor:"password",className:"mt-3",children:["Password ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("span",{className:"w-full bg-white border px-2 py-1 rounded shadow-sm flex justify-between items-center",children:[(0,t.jsx)("input",{type:"".concat(n?"password":"text"),name:"password",id:"liqpass",className:"outline-none w-full px-2 ",value:m,onChange:e=>u(e.target.value),autoComplete:"password",required:!0}),(0,t.jsx)("i",{className:"bi ".concat(n?"bi-eye":"bi-eye-slash"),onClick:()=>i(!n)})]}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("span",{className:"".concat(p?"":"hidden"," text-red-500 absolute mt-2"),children:"Incorrect username or password"})}),(0,t.jsx)("div",{className:"grid grid-cols-2 items-center w-full md:w-1/2 lg:w-1/3 justify-between h-8 gap-x-3 mt-10",children:(0,t.jsx)("button",{type:"submit",className:"px-4 rounded bg-accent text-sm text-white h-full flex justify-center items-center",disabled:h,children:h?(0,t.jsx)("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent  rounded-full animate-spin"}):"Login"})})]})]})})},i=a(9008),d=a.n(i);a(5675),a(2130);var c=function(){let e=(0,r.useRouter)(),[s,a]=(0,l.useState)("login"),[i,c]=(0,l.useState)({companyName:"",firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[m,u]=(0,l.useState)(!1),[p,x]=(0,l.useState)(!1),[h,w]=(0,l.useState)({}),[N,f]=(0,l.useState)(!1),b=e=>{let{name:s,value:a}=e.target;c(e=>({...e,[s]:a}))},j=()=>{c({companyName:"",firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""})},g=()=>{let e={};return i.companyName.trim()||(e.companyName="Company Name is required"),i.firstName.trim()||(e.firstName="First Name is required"),i.lastName.trim()||(e.lastName="Last Name is required"),i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(e.email="Email is invalid"):e.email="Email is required",i.phone.trim()||(e.phone="Phone Number is required"),i.password.trim()||(e.password="Password is required"),i.confirmPassword.trim()||(e.confirmPassword="Confirm Password is required"),i.password!==i.confirmPassword&&(e.confirmPassword="Passwords do not match"),w(e),0===Object.keys(e).length},y=async s=>{if(s.preventDefault(),g()){f(!0);try{let s=await fetch("".concat("https://buybackservice.unicornstore.in","/create-liquidator"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.firstName+" "+i.lastName,email:i.email,phone_number_1:i.phone,company_name:i.companyName,password:i.password,company_status:1})}),a=await s.json();if(!s.ok)throw Error("Could not create liquididator");"liquidator already exists"===a.message?o.Am.warn("User already exists, Login instead"):"error"===a.status?o.Am.error(a.message):(localStorage.setItem("liquidator_token",null==a?void 0:a.access_token),localStorage.setItem("liquidator_name","lorem "),localStorage.setItem("liquidator_id",null==a?void 0:a.liquidator_id),localStorage.setItem("H7kjAJ",null==a?void 0:a.registration_completed),e.push("/liquidator/profile"),console.log("form is valid"))}catch(e){console.log(e)}f(!1)}};return(0,t.jsxs)("div",{className:"container px-2 md:px-3 lg:px-4 xl:px-5 py-14 mx-auto min-h-screen",children:[(0,t.jsx)(d(),{children:(0,t.jsx)("title",{children:"BuyBack - Login"})}),(0,t.jsx)("div",{className:"flex flex-wrap -m-4 justify-center ".concat((null==s?void 0:s.length)===0?"":"hidden")}),"signup"===s&&(0,t.jsx)("div",{className:"relative flex flex-col items-center w-full ",children:(0,t.jsxs)("div",{className:"w-full md:w-2/3 border p-4 rounded shadow-lg",children:[(0,t.jsx)("span",{className:"font-semibold text-xl h-fit",children:"Create an Account"}),(0,t.jsx)("div",{className:"w-full mt-5",children:(0,t.jsxs)("form",{className:"grid grid-cols-3 gap-y-2 gap-x-2",onSubmit:e=>{y(e)},children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-5 col-span-3 ",children:[(0,t.jsxs)("div",{className:"relative col-span-2",children:[(0,t.jsxs)("label",{htmlFor:"companyName",children:["Company Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"companyName",value:i.companyName,onChange:b,className:"border px-2 py-1 rounded w-full outline-none col-span-2 ".concat(h.companyName?"border-red-300":"")}),h.companyName&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.companyName})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"firstName",children:["First Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"firstName",value:i.firstName,onChange:b,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.firstName?"border-red-300":""),autoComplete:"first-name"}),h.firstName&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.firstName})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"lastName",children:["Last Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"lastName",value:i.lastName,onChange:b,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.lastName?"border-red-300":""),autoComplete:"family-name"}),h.lastName&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.lastName})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"email",className:"col-span-2",children:["Email ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"email",value:i.email,onChange:b,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.email?"border-red-300":"")}),h.email&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.email})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"lastName",children:["Phone Number ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"number",name:"phone",value:i.phone,onChange:b,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.phone?"border-red-300":""),onKeyDown:e=>{("ArrowUp"===e.key||"ArrowDown"===e.key)&&e.preventDefault()}}),h.phone&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.phone})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"password",className:"col-span-2",children:["Password ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("span",{className:"w-full bg-white border px-2 py-1 rounded shadow-sm flex justify-between items-center ".concat(h.password?"border-red-300":""),children:[(0,t.jsx)("input",{type:"".concat(m?"text":"password"),name:"password",className:"outline-none w-full px-2 ",value:i.password,onChange:b,autoComplete:"new-password"}),(0,t.jsx)("i",{className:"bi ".concat(m?"bi-eye-slash":"bi-eye"," cursor-pointer"),onClick:()=>u(!m)})]}),h.password&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.password})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"lastName",children:["Confirm Password ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("span",{className:"w-full bg-white border px-2 py-1 rounded shadow-sm flex justify-between items-center ".concat(h.confirmPassword?"border-red-300":""),children:[(0,t.jsx)("input",{type:"".concat(p?"text":"password"),name:"confirmPassword",className:"outline-none w-full px-2 ",value:i.confirmPassword,onChange:b,autoComplete:"new-password"}),(0,t.jsx)("i",{className:"bi ".concat(p?"bi-eye-slash":"bi-eye"," cursor-pointer"),onClick:()=>x(!p)})]}),h.confirmPassword&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.confirmPassword})]})]}),(0,t.jsxs)("div",{className:"relative mt-3 col-span-3 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-x-3 gap-y-3",children:[(0,t.jsx)("button",{className:"bg-accent text-white px-4 py-1 rounded flex justify-center items-center",type:"submit",children:N?(0,t.jsx)("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent  rounded-full animate-spin"}):"Register"}),(0,t.jsx)("button",{className:"md:col-start-3 lg:col-start-5 bg-accent py-1 col-span-2 md:col-span-1 rounded text-white",onClick:()=>{a("login"),j()},children:"Login Instead?"})]})]})})]})}),"login"===s&&(0,t.jsx)(n,{setAction:a})]})}},9008:function(e,s,a){e.exports=a(7828)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5058)}),_N_E=e.O()}]);