(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{5058:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/liquidator/login",function(){return a(5213)}])},5213:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var t=a(5893),r=a(3053),o=a(1163),l=a(7294),n=a(9134),i=e=>{let{setAction:s}=e,a=(0,o.useRouter)(),[i,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(""),[u,p]=(0,l.useState)(""),[x,h]=(0,l.useState)(""),[w,N]=(0,l.useState)(!1),[b,f]=(0,l.useState)({username:"",password:""}),[g,j]=(0,l.useState)({username:"",password:""});(0,l.useEffect)(()=>{let e=localStorage.getItem("liquidator_token"),s=localStorage.getItem("liquidator_name");e&&s&&a.replace("/liquidator")},[a]);let y=e=>{let{name:s,value:a}=e.target;f({...b,[s]:a}),j(e=>{let t={...e};return"username"===s&&(a.trim()?t.username="":t.username="Username is required"),"password"===s&&(a.trim()?t.password="":t.password="Password is required"),t})},v=()=>{let e={};return b.username.trim()||(e.username="Username is required"),b.password.trim()||(e.password="Password is required"),j(e),0===Object.keys(e).length},q=async e=>{if(e.preventDefault(),!v())return;if(N(!0),!e.target.reportValidity()){console.log("error in form");return}let s=new FormData;s.append("username",b.username),s.append("password",b.password),h("");try{let e=await fetch("".concat("https://buybackservice.unicornstore.in","/liquidator/token"),{method:"POST",body:s}),t=await e.json();if(!e.ok)throw(null==t?void 0:t.detail)==="Incorrect username or password"&&(h(null==t?void 0:t.detail),n.Am.error(null==t?void 0:t.detail)),h("Something went wrong"),Error("Something went wrong");localStorage.setItem("liquidator_token",t.access_token),localStorage.setItem("liquidator_name",t.name),localStorage.setItem("liquidator_id",t.liquidator_id),localStorage.setItem("H7kjAJ",t.registration_completed),t.registration_completed?a.push("/liquidator"):a.push("/liquidator/profile")}catch(e){console.log(e),n.Am.error(e)}N(!1)};return(0,t.jsx)("div",{className:"flex items-center justify-center py-20 bg-white",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Liquidator Login"}),(0,t.jsxs)("form",{onSubmit:e=>q(e),children:[(0,t.jsxs)("div",{className:"mb-6 relative",children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-gray-700 mb-0.5",children:"Username or Email Address"}),(0,t.jsx)("input",{type:"text",id:"username",name:"username",value:b.username,onChange:e=>y(e),className:"w-full p-3 border border-gray-300 rounded-lg ring-accent ".concat(g.username?"border-red-300":""),placeholder:"Enter username or email",autoComplete:"email"}),g.username&&(0,t.jsx)("span",{className:"text-red-500 text-xs absolute left-0 -bottom-5",children:g.username})]}),(0,t.jsxs)("div",{className:"mb-6 relative",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-gray-700 mb-0.5",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:i?"text":"password",id:"password",name:"password",value:b.password,onChange:e=>y(e),className:"w-full p-3 border border-gray-300 rounded-lg ring-accent ".concat(g.password?"border-red-300":""),placeholder:"Enter password",autoComplete:"current-password"}),(0,t.jsx)("span",{tabIndex:0,className:"absolute inset-y-0 text-gray-500 cursor-pointer content-center right-0 pe-3 ps-3 rounded-e-lg hover:bg-gray-100 hover:bg-opacity-50 focus:bg-gray-200 focus:bg-opacity-50 outline-none",onClick:()=>{d(e=>!e)},children:(0,t.jsx)("i",{className:"bi ".concat(i?"bi-eye-slash":"bi-eye")})})]}),g.password&&(0,t.jsx)("span",{className:"text-red-500 text-xs absolute left-0 -bottom-5",children:g.password})]}),x&&(0,t.jsx)("p",{className:"text-red-500 text-sm mb-6",children:x}),(0,t.jsx)(r.A,{isLoading:w,type:"submit",className:"w-full bg-accent text-white p-3 rounded-lg transition duration-300",children:"Login"})]})]})})},d=a(9008),c=a.n(d);a(5675),a(2130);var m=function(){let e=(0,o.useRouter)(),[s,a]=(0,l.useState)("login"),[r,d]=(0,l.useState)({companyName:"",firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[m,u]=(0,l.useState)(!1),[p,x]=(0,l.useState)(!1),[h,w]=(0,l.useState)({}),[N,b]=(0,l.useState)(!1),f=e=>{let{name:s,value:a}=e.target;d(e=>({...e,[s]:a}))},g=()=>{d({companyName:"",firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""})},j=()=>{let e={};return r.companyName.trim()||(e.companyName="Company Name is required"),r.firstName.trim()||(e.firstName="First Name is required"),r.lastName.trim()||(e.lastName="Last Name is required"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(e.email="Email is invalid"):e.email="Email is required",r.phone.trim()||(e.phone="Phone Number is required"),r.password.trim()||(e.password="Password is required"),r.confirmPassword.trim()||(e.confirmPassword="Confirm Password is required"),r.password!==r.confirmPassword&&(e.confirmPassword="Passwords do not match"),w(e),0===Object.keys(e).length},y=async s=>{if(s.preventDefault(),j()){b(!0);try{let s=await fetch("".concat("https://buybackservice.unicornstore.in","/create-liquidator"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.firstName+" "+r.lastName,email:r.email,phone_number_1:r.phone,company_name:r.companyName,password:r.password,company_status:1})}),a=await s.json();if(!s.ok)throw Error("Could not create liquididator");"liquidator already exists"===a.message?n.Am.warn("User already exists, Login instead"):"error"===a.status?n.Am.error(a.message):(localStorage.setItem("liquidator_token",null==a?void 0:a.access_token),localStorage.setItem("liquidator_name","lorem "),localStorage.setItem("liquidator_id",null==a?void 0:a.liquidator_id),localStorage.setItem("H7kjAJ",null==a?void 0:a.registration_completed),e.push("/liquidator/profile"),console.log("form is valid"))}catch(e){console.log(e)}b(!1)}};return(0,t.jsxs)("div",{className:"container px-2 md:px-3 lg:px-4 xl:px-5 py-14 mx-auto min-h-screen",children:[(0,t.jsx)(c(),{children:(0,t.jsx)("title",{children:"BuyBack - Login"})}),(0,t.jsx)("div",{className:"flex flex-wrap -m-4 justify-center ".concat((null==s?void 0:s.length)===0?"":"hidden")}),"signup"===s&&(0,t.jsx)("div",{className:"relative flex flex-col items-center w-full ",children:(0,t.jsxs)("div",{className:"w-full md:w-2/3 border p-4 rounded shadow-lg",children:[(0,t.jsx)("span",{className:"font-semibold text-xl h-fit",children:"Create an Account"}),(0,t.jsx)("div",{className:"w-full mt-5",children:(0,t.jsxs)("form",{className:"grid grid-cols-3 gap-y-2 gap-x-2",onSubmit:e=>{y(e)},children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-5 col-span-3 ",children:[(0,t.jsxs)("div",{className:"relative col-span-2",children:[(0,t.jsxs)("label",{htmlFor:"companyName",children:["Company Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"companyName",value:r.companyName,onChange:f,className:"border px-2 py-1 rounded w-full outline-none col-span-2 ".concat(h.companyName?"border-red-300":"")}),h.companyName&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.companyName})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"firstName",children:["First Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"firstName",value:r.firstName,onChange:f,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.firstName?"border-red-300":""),autoComplete:"first-name"}),h.firstName&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.firstName})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"lastName",children:["Last Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"lastName",value:r.lastName,onChange:f,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.lastName?"border-red-300":""),autoComplete:"family-name"}),h.lastName&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.lastName})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"email",className:"col-span-2",children:["Email ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"email",value:r.email,onChange:f,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.email?"border-red-300":"")}),h.email&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.email})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"lastName",children:["Phone Number ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"number",name:"phone",value:r.phone,onChange:f,className:"border px-2 py-1 rounded w-full outline-none ".concat(h.phone?"border-red-300":""),onKeyDown:e=>{("ArrowUp"===e.key||"ArrowDown"===e.key)&&e.preventDefault()}}),h.phone&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.phone})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"password",className:"col-span-2",children:["Password ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("span",{className:"w-full bg-white border px-2 py-1 rounded shadow-sm flex justify-between items-center ".concat(h.password?"border-red-300":""),children:[(0,t.jsx)("input",{type:"".concat(m?"text":"password"),name:"password",className:"outline-none w-full px-2 ",value:r.password,onChange:f,autoComplete:"new-password"}),(0,t.jsx)("i",{className:"bi ".concat(m?"bi-eye-slash":"bi-eye"," cursor-pointer"),onClick:()=>u(!m)})]}),h.password&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.password})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{htmlFor:"lastName",children:["Confirm Password ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("span",{className:"w-full bg-white border px-2 py-1 rounded shadow-sm flex justify-between items-center ".concat(h.confirmPassword?"border-red-300":""),children:[(0,t.jsx)("input",{type:"".concat(p?"text":"password"),name:"confirmPassword",className:"outline-none w-full px-2 ",value:r.confirmPassword,onChange:f,autoComplete:"new-password"}),(0,t.jsx)("i",{className:"bi ".concat(p?"bi-eye-slash":"bi-eye"," cursor-pointer"),onClick:()=>x(!p)})]}),h.confirmPassword&&(0,t.jsx)("span",{className:"text-red-400 text-xs absolute -bottom-5 left-0",children:h.confirmPassword})]})]}),(0,t.jsxs)("div",{className:"relative mt-3 col-span-3 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-x-3 gap-y-3",children:[(0,t.jsx)("button",{className:"bg-accent text-white px-4 py-1 rounded flex justify-center items-center",type:"submit",children:N?(0,t.jsx)("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent  rounded-full animate-spin"}):"Register"}),(0,t.jsx)("button",{className:"md:col-start-3 lg:col-start-5 bg-accent py-1 col-span-2 md:col-span-1 rounded text-white",onClick:()=>{a("login"),g()},children:"Login Instead?"})]})]})})]})}),"login"===s&&(0,t.jsx)(i,{setAction:a})]})}},9008:function(e,s,a){e.exports=a(7828)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5058)}),_N_E=e.O()}]);