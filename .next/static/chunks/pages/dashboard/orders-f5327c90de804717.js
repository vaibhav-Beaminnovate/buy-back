(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{4201:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/orders",function(){return s(1844)}])},2115:function(e,t,s){"use strict";var a=s(5893);s(7294),t.Z=e=>{let{itemsPerPage:t,setItemsPerPage:s,currentPage:r,setCurrentPage:l,totalEntries:c,totalPages:i}=e;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("label",{htmlFor:"items",className:"text-sm",children:"Items per page:"}),(0,a.jsx)("select",{id:"items",className:"border border-gray-300 rounded-md py-1 px-2 outline-none",value:t,onChange:e=>{s(parseInt(e.target.value,10)),l(1)},children:[15,20,25,30,35].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-3 md:mt-0",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:[t*r-t+1," to"," ",t*r<c?t*r:c," ","of ",c]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>l(1),disabled:1===r,className:"p-2 rounded-full ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>l(e=>e>1?e-1:e),disabled:1===r,className:"p-2 rounded-full ".concat(r>1?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-left text-lg"})}),(0,a.jsx)("button",{onClick:()=>l(e=>e<i?e+1:e),disabled:r===i,className:"p-2 rounded-full ".concat(r<i?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-right text-lg"})}),(0,a.jsx)("button",{onClick:()=>l(i),disabled:r===i,className:"p-2 rounded-full ".concat(r<i?"text-accent":"text-gray-400"),children:(0,a.jsx)("i",{className:"bi bi-chevron-bar-right text-lg"})})]})]})]})}},4625:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7294);function r(e,t){let[s,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let s=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(s)}},[e,t]),s}},1844:function(e,t,s){"use strict";s.r(t);var a=s(5893),r=s(7294),l=s(4625),c=s(373),i=s(2115),n=s(1163);t.default=()=>{(0,n.useRouter)();let[e,t]=(0,r.useState)(""),[s,d]=(0,r.useState)([]),[o,x]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(15),[p,b]=(0,r.useState)(1),[f,j]=(0,r.useState)(1),[N,y]=(0,r.useState)(!1),[v,w]=(0,r.useState)(""),[_,k]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[P,A]=(0,r.useState)(""),[q,E]=(0,r.useState)(!0),[I,O]=(0,r.useState)({key:"",direction:"ascending"}),z=async()=>{y(!0);try{let t=I.key,s="descending"===I.direction,a=await fetch("".concat("https://buybackservice.unicornstore.in","/get-order-details-by-staff?staff_id=").concat(e,"&per_page=").concat(h,"&page=").concat(f,"&search=").concat(C,"&sort_by=").concat(t,"&sort_desc=").concat(s));if(!a.ok)throw Error("Could not get order details by staff id");let r=await a.json();0===r.data.length?A("No entries found, please refine your search query"):A(""),d(r.data.length>0?r.data:[]),b(Math.ceil(r.total_count/h)),k(r.total_count),y(!1),E(!1),w("")}catch(e){console.log(e),w(e),y(!1),E(!1)}},Z=e=>{x(e)},T=e=>{u(e)},F=e=>{let t="ascending";I.key===e&&"ascending"===I.direction&&(t="descending"),O({key:e,direction:t}),j(1)};(0,r.useEffect)(()=>{t(localStorage.getItem("staff_id")),e&&z()},[e,h,f,I]),(0,r.useEffect)(()=>{o||m?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden")},[o,m]);let L=(0,l.Z)(C,500);(0,r.useEffect)(()=>{""!==L&&(j(1),z())},[L,C]);let M=e=>I.key!==e?null:"ascending"===I.direction?(0,a.jsx)("i",{className:"bi bi-arrow-up"}):(0,a.jsx)("i",{className:"bi bi-arrow-down"});return(0,a.jsx)("div",{className:"flex justify-center bg-gray-100 min-h-screen relative -top-28",children:(0,a.jsx)("div",{className:"container max-w-screen-xl ",children:(0,a.jsxs)("div",{className:"flex flex-col justify-center space-y-2 bg-white shadow p-4 my-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"relative pb-4",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{className:"text-sm text-gray-700",children:"Search by Customer Name, Final Price or Product Name"}),(0,a.jsxs)("span",{className:"w-full grid grid-cols-1 md:grid-cols-6 md:space-x-2",children:[(0,a.jsx)("input",{type:"text",className:"border border-gray-400 py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#42c8b7] col-span-5 transition-all",name:"search-bar",value:C,onChange:e=>S(e.target.value),spellCheck:!1,autoComplete:"off"}),(0,a.jsx)("button",{className:"mt-2 md:mt-0 px-3 py-1 rounded bg-accent text-white cursor-pointer",onClick:()=>{S(""),O({key:"",direction:"ascending"})},children:"Clear All"})]})]}),(0,a.jsxs)("div",{className:"mt-4 rounded-md p-4 text-md",children:[(0,a.jsxs)("table",{className:"min-w-full table-auto bg-white rounded overflow-hidden shadow",children:[(0,a.jsx)("thead",{className:"bg-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>F("order_detail_id"),children:["Order ID ",M("order_detail_id")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>F("customer_name"),children:["Customer Name ",M("customer_name")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>F("order_status"),children:["Order Status ",M("order_status")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>F("price"),children:["Final Price ",M("price")]}),(0,a.jsxs)("th",{className:"text-center cursor-pointer py-2.5",onClick:()=>F("product_name"),children:["Product Name ",M("product_name")]}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Images"}),(0,a.jsx)("th",{className:"text-center py-2.5",children:"Questions"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:s.map((e,t)=>(0,a.jsxs)("tr",{className:"text-center  text-sm md:text-base divide-x hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-1.5",children:e.order_id}),(0,a.jsx)("td",{className:"py-1.5",children:e.customer_name}),(0,a.jsx)("td",{className:"py-1.5",children:e.order_status}),(0,a.jsx)("td",{className:"py-1.5",children:e.price}),(0,a.jsx)("td",{className:"py-1.5",children:e.product_name}),(0,a.jsx)("td",{className:"py-1.5",children:(0,a.jsx)("button",{className:"cursor-pointer disabled:cursor-default ".concat(e.images&&e.images.length>0?"text-black":"text-gray-400"),onClick:()=>Z(e.order_detail_id),disabled:!(e.images&&e.images.length>0),children:(0,a.jsx)("i",{className:"bi bi-image text-xl"})})}),(0,a.jsxs)("td",{className:"py-1.5",children:[(0,a.jsx)("button",{className:"cursor-pointer disabled:cursor-default ".concat(e.qna&&e.qna.length>0?"text-black":"text-gray-400"),onClick:()=>T(e.order_detail_id),disabled:!(e.qna&&e.qna.length>0),children:(0,a.jsx)("i",{className:"bi bi-question-square text-xl"})}),o===e.order_detail_id&&(0,a.jsx)("div",{id:"imageGalleryModal",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm overflow-hidden",children:(0,a.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"relative w-full max-w-3xl bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsx)("span",{className:"absolute top-4 right-4 z-20 cursor-pointer rounded px-1 text-red-500 hover:bg-[#AAAAAA60] transition duration-200",onClick:()=>x(!1),children:(0,a.jsx)("i",{className:"bi bi-x-lg text-2xl"})}),(0,a.jsx)("div",{className:"p-6 grid grid-cols-2 sm:grid-cols-4 gap-4 overflow-y-auto max-h-[100vh]",children:e.images&&e.images.map((e,t)=>(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-lg shadow-md border flex flex-col pb-2",children:[(0,a.jsx)("p",{className:"w-full text-center",children:Object.keys(e)}),(0,a.jsx)("div",{className:"my-auto",children:(0,a.jsx)("img",{src:e[Object.keys(e)[0]],alt:"Product Image",className:"object-contain object-center w-full h-48"})})]},t))})]})}),m===e.order_detail_id&&(0,a.jsx)("div",{id:"qnaModal",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm overflow-hidden",children:(0,a.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"relative w-full max-w-screen-xl bg-white rounded-lg shadow-lg overflow-hidden min-h-fit",children:[(0,a.jsx)("span",{className:"absolute top-4 right-4 z-20 cursor-pointer rounded px-1 text-red-500 hover:bg-[#AAAAAA60] transition duration-200",onClick:()=>u(!1),children:(0,a.jsx)("i",{className:"bi bi-x-lg text-2xl"})}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto 2xl:overflow-y-clip max-h-[80vh]",children:e.qna&&e.qna.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:e.qna.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded p-4 shadow-sm bg-gray-50",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Question:"}),(0,a.jsx)("p",{children:e.question}),(0,a.jsx)("div",{className:"font-semibold mt-2",children:"Answer:"}),(0,a.jsx)("p",{children:e.answer})]},t))}):(0,a.jsx)("p",{children:"No questions available."})})]})})]})]},t))})]}),P&&(0,a.jsx)("div",{className:"text-red-500 text-center pt-2 min-h-96",children:P}),v&&(0,a.jsx)("div",{className:"text-red-500 text-center pt-2 min-h-96",children:"Something went wrong"}),q&&N&&(0,a.jsx)("div",{className:"text-yellow-500 text-center pt-2 min-h-96",children:(0,a.jsx)(c.Z,{color:"#42c8b7",loading:N,size:40,"aria-label":"Loading Spinner","data-testid":"loader"})})]})]}),(0,a.jsx)(i.Z,{itemsPerPage:h,setItemsPerPage:g,currentPage:f,setCurrentPage:j,totalEntries:_,totalPages:p})]})})})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=4201)}),_N_E=e.O()}]);